var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function a(t,e,n,r){if(t){const i=u(t,e,n,r);return t[0](i)}}function u(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function c(t,e,n,r,i,o,s){const a=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(a){const i=u(e,n,r,s);t.p(i,a)}}function h(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function v(t){return document.createTextNode(t)}function y(){return v(" ")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function I(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let E;function _(t){E=t}const T=[],A=[],N=[],S=[],k=Promise.resolve();let O=!1;function D(t){N.push(t)}function x(t){S.push(t)}let P=!1;const C=new Set;function R(){if(!P){P=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];_(e),L(e.$$)}for(_(null),T.length=0;A.length;)A.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];C.has(e)||(C.add(e),e())}N.length=0}while(T.length);for(;S.length;)S.pop()();O=!1,P=!1,C.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const M=new Set;let V;function j(){V={r:0,c:[],p:V}}function U(){V.r||r(V.c),V=V.p}function F(t,e){t&&t.i&&(M.delete(t),t.i(e))}function $(t,e,n,r){if(t&&t.o){if(M.has(t))return;M.add(t),V.c.push((()=>{M.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function q(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function G(t){t&&t.c()}function B(t,n,o,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=t.$$;a&&a.m(n,o),s||D((()=>{const n=u.map(e).filter(i);c?c.push(...n):r(n),t.$$.on_mount=[]})),h.forEach(D)}function z(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(T.push(t),O||(O=!0,k.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,i,o,s,a,u,c=[-1]){const h=E;_(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=o?o(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&H(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);f.fragment&&f.fragment.l(t),t.forEach(l)}else f.fragment&&f.fragment.c();i.intro&&F(e.$$.fragment),B(e,i.target,i.anchor,i.customElement),R()}_(h)}class Y{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W=[];function X(e,n=t){let r;const i=[];function s(t){if(o(e,t)&&(e=t,r)){const t=!W.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),W.push(n,e)}if(t){for(let t=0;t<W.length;t+=2)W[t][0](W[t+1]);W.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,a=t){const u=[o,a];return i.push(u),1===i.length&&(r=n(s)||t),o(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const Q=X(null),J=X([]),Z=X(null),tt=X([]);let et;Z.subscribe((t=>{var e,n;tt.set(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.events),et=null===(n=null==t?void 0:t.ref)||void 0===n?void 0:n.id})),J.subscribe((t=>{if(et){const e=t.find((t=>t.ref.id===et));Z.set(e)}else Z.set(t[0])}));
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var nt=function(t,e){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function rt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}nt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var it=function(){return(it=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ot(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function st(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function at(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ut(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ct(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ct(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ht=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ft(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,dt.prototype.create),o}return rt(e,t),e}(Error),dt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?vt(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new pt(i,a,r);return u},t}();function vt(t,e){return t.replace(yt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var yt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gt(t,e){var n=new bt(t,e);return n.subscribe.bind(n)}var bt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=wt),void 0===r.error&&(r.error=wt),void 0===r.complete&&(r.complete=wt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function wt(){}var It=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Et="[DEFAULT]",_t=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Et);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ht;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=it({identifier:Et,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(Et)}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=at(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Et),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ot(this,void 0,void 0,(function(){var t;return st(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ut(ut([],at(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),at(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=Et),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===Et?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Et:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tt,At=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new _t(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Nt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var St,kt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(St||(St={}));var Ot,Dt={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},xt=St.INFO,Pt=((Tt={})[St.DEBUG]="log",Tt[St.VERBOSE]="log",Tt[St.INFO]="info",Tt[St.WARN]="warn",Tt[St.ERROR]="error",Tt),Ct=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Pt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Nt(["["+i+"]  "+t.name+":"],n))}},Rt=function(){function t(t){this.name=t,this._logLevel=xt,this._logHandler=Ct,this._userLogHandler=null,kt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in St))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Dt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Nt([this,St.DEBUG],t)),this._logHandler.apply(this,Nt([this,St.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Nt([this,St.VERBOSE],t)),this._logHandler.apply(this,Nt([this,St.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Nt([this,St.INFO],t)),this._logHandler.apply(this,Nt([this,St.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Nt([this,St.WARN],t)),this._logHandler.apply(this,Nt([this,St.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Nt([this,St.ERROR],t)),this._logHandler.apply(this,Nt([this,St.ERROR],t))},t}();function Lt(t){kt.forEach((function(e){e.setLogLevel(t)}))}var Mt,Vt=((Ot={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ot["bad-app-name"]="Illegal App name: '{$appName}",Ot["duplicate-app"]="Firebase App named '{$appName}' already exists",Ot["app-deleted"]="Firebase App named '{$appName}' already deleted",Ot["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ot["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ot),jt=new dt("app","Firebase",Vt),Ut="@firebase/app",Ft="[DEFAULT]",$t=((Mt={})[Ut]="fire-core",Mt["@firebase/analytics"]="fire-analytics",Mt["@firebase/auth"]="fire-auth",Mt["@firebase/database"]="fire-rtdb",Mt["@firebase/functions"]="fire-fn",Mt["@firebase/installations"]="fire-iid",Mt["@firebase/messaging"]="fire-fcm",Mt["@firebase/performance"]="fire-perf",Mt["@firebase/remote-config"]="fire-rc",Mt["@firebase/storage"]="fire-gcs",Mt["@firebase/firestore"]="fire-fst",Mt["fire-js"]="fire-js",Mt["firebase-wrapper"]="fire-js-all",Mt),qt=new Rt("@firebase/app"),Gt=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ct(void 0,t),this.container=new At(e.name),this._addComponent(new It("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=Ft),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Ft),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){qt.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw jt.create("app-deleted",{appName:this.name_})},t}();Gt.prototype.name&&Gt.prototype.options||Gt.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Bt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=Ft);var s=o.name;if("string"!=typeof s||!s)throw jt.create("bad-app-name",{appName:String(s)});if(mt(e,s))throw jt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=$t[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void qt.warn(u.join(" "))}o(new It(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Lt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw jt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Dt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:St[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=kt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.3.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!mt(e,t=t||Ft))throw jt.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return qt.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw jt.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&ct(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var zt=function t(){var e=Bt(Gt);return e.INTERNAL=it(it({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ct(e,t)},createSubscribe:gt,ErrorFactory:dt,deepExtend:ct}),e}(),Ht=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){qt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Kt=self.firebase.SDK_VERSION;Kt&&Kt.indexOf("LITE")>=0&&qt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yt=zt.initializeApp;zt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return lt()&&qt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Yt.apply(void 0,t)};var Wt=zt;!function(t,e){t.INTERNAL.registerComponent(new It("platform-logger",(function(t){return new Ht(t)}),"PRIVATE")),t.registerVersion(Ut,"0.6.16",e),t.registerVersion("fire-js","")}(Wt);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Wt.registerVersion("firebase","8.3.0","app");var Xt=Object.freeze({__proto__:null,default:Wt});const Qt={apiKey:"AIzaSyCklqr0S4XQ-l0mejn56sW3O1ZHP04IfpY",authDomain:"date-keeper-696df.firebaseapp.com",projectId:"date-keeper-696df"};function Jt(...t){return Promise.all(t.map((t=>t.get())))}async function Zt(){const{default:t}=await Promise.resolve().then((function(){return Xt}));await Promise.resolve().then((function(){return Uy}));const e=t.firestore();return"getAll"in e||Object.assign(e,{getAll:Jt}),{firestore:e,consts:{DocumentReference:t.firestore.DocumentReference,Timestamp:t.firestore.Timestamp,FieldPath:t.firestore.FieldPath,FieldValue:t.firestore.FieldValue},getDocMeta:t=>({fromCache:t.metadata.fromCache,hasPendingWrites:t.metadata.hasPendingWrites})}}function te(t,e){return{__type__:"ref",collection:t,id:e}}function ee(t){const e=t.match(/^(.+)\/(.+)$/);if(!e)throw new Error(`Can't parse path ${t}`);const[,n,r]=e;return{__type__:"ref",collection:{__type__:"collection",path:n},id:r}}function ne(t,e){if(e&&"object"==typeof e){if("ref"===e.__type__)return function({firestore:t},e){return t.doc(function(t){return[t.collection.path].concat(t.id).join("/")}(e))}(t,e);if("value"===e.__type__){const n=e;switch(n.kind){case"remove":return t.consts.FieldValue.delete();case"increment":return t.consts.FieldValue.increment(n.number);case"arrayUnion":return t.consts.FieldValue.arrayUnion(...ne(t,n.values));case"arrayRemove":return t.consts.FieldValue.arrayRemove(...ne(t,n.values));case"serverDate":return t.consts.FieldValue.serverTimestamp()}}else if(e instanceof Date)return t.consts.Timestamp.fromDate(e);const n=Object.assign(Array.isArray(e)?[]:{},e);return Object.keys(n).forEach((e=>{n[e]=ne(t,n[e])})),n}return void 0===e?null:e}function re(t,e){if(e instanceof t.consts.DocumentReference)return ee(e.path);if(e instanceof t.consts.Timestamp)return e.toDate();if(e&&"object"==typeof e){const n=Object.assign(Array.isArray(e)?[]:{},e);return Object.keys(n).forEach((e=>{n[e]=re(t,n[e])})),n}return e}async function ie(t){const e=await Zt();return(await("collectionGroup"===t.__type__?e.firestore.collectionGroup(t.path):e.firestore.collection(t.path)).get()).docs.map((n=>function(t,e,n){return{__type__:"doc",ref:t,data:e,meta:n}}("collectionGroup"===t.__type__?ee(n.ref.path):te(t,n.id),re(e,n.data()),e.getDocMeta(n))))}function oe(t){return{__type__:"collection",path:t}}const se=oe("users"),ae=function(t,e){return n=>{let r,i;if(Array.isArray(n)){const t=n;r=t.pop(),i="function"==typeof e?e(t):e}else"string"==typeof n?(r=n,i=e):(r=n.id,i=n.collection);return oe(`${i.path}/${r}/${t}`)}}("timelines",se);async function ue(t){ie(ae(t)).then((t=>J.set(t)))}async function ce(t,e){(async function(t,e,n){const r=await Zt();let i,o,s;if("collection"===t.__type__)i=t,o=e,s=n;else{const n=t;i=n.collection,o=n.id,s=e}const a=r.firestore.collection(i.path).doc(o),u=Array.isArray(s)?s.reduce(((t,{key:e,value:n})=>(t[Array.isArray(e)?e.join("."):e]=n,t)),{}):s;await a.update(ne(r,u))})(ae(t),e.ref.id,e.data).then((e=>ue(t)))}async function he(t,e){(async function(t,e){const n=await Zt();return te(t,(await n.firestore.collection(t.path).add(ne(n,e))).id)})(ae(t),{name:e,events:[]}).then((e=>ue(t)))}function fe(t){let e,n,r,o;const s=t[2].default,u=a(s,t,t[1],null);return{c(){e=d("button"),u&&u.c(),g(e,"class","text-gray-100 border-gray-100 svelte-11mgmp1")},m(s,a){f(s,e,a),u&&u.m(e,null),n=!0,r||(o=m(e,"click",(function(){i(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(e,[n]){t=e,u&&u.p&&2&n&&c(u,s,t,t[1],n,null,null)},i(t){n||(F(u,t),n=!0)},o(t){$(u,t),n=!1},d(t){t&&l(e),u&&u.d(t),r=!1,o()}}}function le(t,e,n){let{$$slots:r={},$$scope:i}=e,{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick),"$$scope"in t&&n(1,i=t.$$scope)},[o,i,r]}Q.subscribe((t=>{t?ue(t.id):J.set([])})),Q.subscribe((t=>{t&&async function(t){(async function(t,e,n){const r=await Zt();let i,o,s;if("collection"===t.__type__)i=t,o=e,s=n;else{const n=t;i=n.collection,o=n.id,s=e}const a=r.firestore.collection(i.path).doc(o);await a.set(ne(r,s))})(se,t,{})}(t.id)}));class pe extends Y{constructor(t){super(),K(this,t,le,fe,o,{onClick:0})}}function de(t){let e,n;const r=t[1].default,i=a(r,t,t[0],null);return{c(){e=d("label"),i&&i.c(),g(e,"class","block text-gray-100 text-xs font-bold uppercase")},m(t,r){f(t,e,r),i&&i.m(e,null),n=!0},p(t,[e]){i&&i.p&&1&e&&c(i,r,t,t[0],e,null,null)},i(t){n||(F(i,t),n=!0)},o(t){$(i,t),n=!1},d(t){t&&l(e),i&&i.d(t)}}}function ve(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=t=>{"$$scope"in t&&n(0,i=t.$$scope)},[i,r]}class ye extends Y{constructor(t){super(),K(this,t,ve,de,o,{})}}function me(t){let e;return{c(){e=v(t[2])},m(t,n){f(t,e,n)},p(t,n){4&n&&b(e,t[2])},d(t){t&&l(e)}}}function ge(t){let e,n,r,i,o,s,a;return n=new ye({props:{$$slots:{default:[me]},$$scope:{ctx:t}}}),{c(){e=d("div"),G(n.$$.fragment),r=y(),i=d("input"),g(i,"type","text"),g(i,"class","text-sm outline-none focus:outline-none focus:shadow-outline w-full pl-1"),g(i,"placeholder",t[1])},m(u,c){f(u,e,c),B(n,e,null),h(e,r),h(e,i),w(i,t[0]),o=!0,s||(a=m(i,"input",t[3]),s=!0)},p(t,[e]){const r={};20&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),(!o||2&e)&&g(i,"placeholder",t[1]),1&e&&i.value!==t[0]&&w(i,t[0])},i(t){o||(F(n.$$.fragment,t),o=!0)},o(t){$(n.$$.fragment,t),o=!1},d(t){t&&l(e),z(n),s=!1,a()}}}function be(t,e,n){let{placeholder:r}=e,{value:i}=e,{label:o}=e;return t.$$set=t=>{"placeholder"in t&&n(1,r=t.placeholder),"value"in t&&n(0,i=t.value),"label"in t&&n(2,o=t.label)},[i,r,o,function(){i=this.value,n(0,i)}]}class we extends Y{constructor(t){super(),K(this,t,be,ge,o,{placeholder:1,value:0,label:2})}}const Ie=t=>({}),Ee=t=>({}),_e=t=>({}),Te=t=>({}),Ae=t=>({}),Ne=t=>({});function Se(t){let e,n,r;return{c(){e=d("div"),n=d("h1"),r=v(t[0]),g(n,"class","text-gray-100 text-lg font-bold uppercase"),g(e,"class","justify-self-center")},m(t,i){f(t,e,i),h(e,n),h(n,r)},p(t,e){1&e&&b(r,t[0])},d(t){t&&l(e)}}}function ke(t){let e,n,r,i,o,s,u=t[0]&&Se(t);const p=t[2].input1,v=a(p,t,t[1],Ne),m=t[2].input2,b=a(m,t,t[1],Te),w=t[2].submit,I=a(w,t,t[1],Ee);return{c(){e=d("div"),u&&u.c(),n=y(),v&&v.c(),r=y(),b&&b.c(),i=y(),o=d("div"),I&&I.c(),g(o,"class","justify-self-center"),g(e,"class","border-4 border-gray-100 p-2 grid gap-2")},m(t,a){f(t,e,a),u&&u.m(e,null),h(e,n),v&&v.m(e,null),h(e,r),b&&b.m(e,null),h(e,i),h(e,o),I&&I.m(o,null),s=!0},p(t,[r]){t[0]?u?u.p(t,r):(u=Se(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),v&&v.p&&2&r&&c(v,p,t,t[1],r,Ae,Ne),b&&b.p&&2&r&&c(b,m,t,t[1],r,_e,Te),I&&I.p&&2&r&&c(I,w,t,t[1],r,Ie,Ee)},i(t){s||(F(v,t),F(b,t),F(I,t),s=!0)},o(t){$(v,t),$(b,t),$(I,t),s=!1},d(t){t&&l(e),u&&u.d(),v&&v.d(t),b&&b.d(t),I&&I.d(t)}}}function Oe(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:o}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"$$scope"in t&&n(1,i=t.$$scope)},[o,i,r]}class De extends Y{constructor(t){super(),K(this,t,Oe,ke,o,{title:0})}}function xe(t){let e,n,r;function i(e){t[5](e)}let o={slot:"input1",label:"name",placeholder:"Most Boring Day in History"};return void 0!==t[0]&&(o.value=t[0]),e=new we({props:o}),A.push((()=>q(e,"value",i))),{c(){G(e.$$.fragment)},m(t,n){B(e,t,n),r=!0},p(t,r){const i={};!n&&1&r&&(n=!0,i.value=t[0],x((()=>n=!1))),e.$set(i)},i(t){r||(F(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){z(e,t)}}}function Pe(t){let e,n,r;function i(e){t[4](e)}let o={slot:"input2",label:"date",placeholder:"1954-04-11"};return void 0!==t[1]&&(o.value=t[1]),e=new we({props:o}),A.push((()=>q(e,"value",i))),{c(){G(e.$$.fragment)},m(t,n){B(e,t,n),r=!0},p(t,r){const i={};!n&&2&r&&(n=!0,i.value=t[1],x((()=>n=!1))),e.$set(i)},i(t){r||(F(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){z(e,t)}}}function Ce(t){let e;return{c(){e=v("Add")},m(t,n){f(t,e,n)},d(t){t&&l(e)}}}function Re(t){let e,n;return e=new pe({props:{slot:"submit",onClick:t[2],$$slots:{default:[Ce]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};128&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Le(t){let e,n;return e=new De({props:{title:"event",$$slots:{submit:[Re],input2:[Pe],input1:[xe]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,[n]){const r={};131&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Me(t,e,n){let r;s(t,Q,(t=>n(6,r=t)));let i,o,{timeline:a}=e;return t.$$set=t=>{"timeline"in t&&n(3,a=t.timeline)},[i,o,function(){const t={name:i,date:o};a.data.events.push(t),ce(r.id,a),n(0,i=void 0),n(1,o=void 0)},a,function(t){o=t,n(1,o)},function(t){i=t,n(0,i)}]}class Ve extends Y{constructor(t){super(),K(this,t,Me,Le,o,{timeline:3})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var je=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){t.exports=function(){var t="millisecond",e="second",n="minute",r="hour",i="day",o="week",s="month",a="quarter",u="year",c="date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},d={s:p,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+p(r,2,"0")+":"+p(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,s),o=n-i<0,a=e.clone().add(r+(o?-1:1),s);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:s,y:u,w:o,d:i,D:c,h:r,m:n,s:e,ms:t,Q:a}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",y={};y[v]=l;var m=function(t){return t instanceof I},g=function(t,e,n){var r;if(!t)return v;if("string"==typeof t)y[t]&&(r=t),e&&(y[t]=e,r=t);else{var i=t.name;y[i]=t,r=i}return!n&&r&&(v=r),r||!n&&v},b=function(t,e){if(m(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new I(n)},w=d;w.l=g,w.i=m,w.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var I=function(){function l(t){this.$L=g(t.locale,null,!0),this.parse(t)}var p=l.prototype;return p.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},p.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},p.$utils=function(){return w},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(t,e){var n=b(t);return this.startOf(e)<=n&&n<=this.endOf(e)},p.isAfter=function(t,e){return b(t)<this.startOf(e)},p.isBefore=function(t,e){return this.endOf(e)<b(t)},p.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(t,a){var h=this,f=!!w.u(a)||a,l=w.p(t),p=function(t,e){var n=w.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return f?n:n.endOf(i)},d=function(t,e){return w.w(h.toDate()[t].apply(h.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case u:return f?p(1,0):p(31,11);case s:return f?p(1,y):p(0,y+1);case o:var b=this.$locale().weekStart||0,I=(v<b?v+7:v)-b;return p(f?m-I:m+(6-I),y);case i:case c:return d(g+"Hours",0);case r:return d(g+"Minutes",1);case n:return d(g+"Seconds",2);case e:return d(g+"Milliseconds",3);default:return this.clone()}},p.endOf=function(t){return this.startOf(t,!1)},p.$set=function(o,a){var h,f=w.p(o),l="set"+(this.$u?"UTC":""),p=(h={},h[i]=l+"Date",h[c]=l+"Date",h[s]=l+"Month",h[u]=l+"FullYear",h[r]=l+"Hours",h[n]=l+"Minutes",h[e]=l+"Seconds",h[t]=l+"Milliseconds",h)[f],d=f===i?this.$D+(a-this.$W):a;if(f===s||f===u){var v=this.clone().set(c,1);v.$d[p](d),v.init(),this.$d=v.set(c,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](d);return this.init(),this},p.set=function(t,e){return this.clone().$set(t,e)},p.get=function(t){return this[w.p(t)]()},p.add=function(t,a){var c,h=this;t=Number(t);var f=w.p(a),l=function(e){var n=b(h);return w.w(n.date(n.date()+Math.round(e*t)),h)};if(f===s)return this.set(s,this.$M+t);if(f===u)return this.set(u,this.$y+t);if(f===i)return l(1);if(f===o)return l(7);var p=(c={},c[n]=6e4,c[r]=36e5,c[e]=1e3,c)[f]||1,d=this.$d.getTime()+t*p;return w.w(d,this)},p.subtract=function(t,e){return this.add(-1*t,e)},p.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=w.z(this),i=this.$locale(),o=this.$H,s=this.$m,a=this.$M,u=i.weekdays,c=i.months,h=function(t,r,i,o){return t&&(t[r]||t(e,n))||i[r].substr(0,o)},l=function(t){return w.s(o%12||12,t,"0")},p=i.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:w.s(a+1,2,"0"),MMM:h(i.monthsShort,a,c,3),MMMM:h(c,a),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:h(i.weekdaysMin,this.$W,u,2),ddd:h(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:w.s(o,2,"0"),h:l(1),hh:l(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:w.s(s,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:r};return n.replace(f,(function(t,e){return e||d[t]||r.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(t,c,h){var f,l=w.p(c),p=b(t),d=6e4*(p.utcOffset()-this.utcOffset()),v=this-p,y=w.m(this,p);return y=(f={},f[u]=y/12,f[s]=y,f[a]=y/3,f[o]=(v-d)/6048e5,f[i]=(v-d)/864e5,f[r]=v/36e5,f[n]=v/6e4,f[e]=v/1e3,f)[l]||v,h?y:w.a(y)},p.daysInMonth=function(){return this.endOf(s).$D},p.$locale=function(){return y[this.$L]},p.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=g(t,e,!0);return r&&(n.$L=r),n},p.clone=function(){return w.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},l}(),E=I.prototype;return b.prototype=E,[["$ms",t],["$s",e],["$m",n],["$H",r],["$W",i],["$M",s],["$y",u],["$D",c]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),b.extend=function(t,e){return t.$i||(t(e,I,b),t.$i=!0),b},b.locale=g,b.isDayjs=m,b.unix=function(t){return b(1e3*t)},b.en=y[v],b.Ls=y,b.p={},b}()}));function Ue(e){let n,r,i,o,s,a,u,c,p,m;return{c(){n=d("div"),r=d("div"),r.textContent="Years",i=y(),o=d("div"),o.textContent="Months",s=y(),a=d("div"),u=v(e[0]),c=y(),p=d("div"),m=v(e[1]),g(r,"class","flex justify-center font-bold border-r-4"),g(o,"class","flex justify-center font-bold"),g(a,"class","flex justify-center border-r-4"),g(p,"class","flex justify-center"),g(n,"class","grid grid-cols-2")},m(t,e){f(t,n,e),h(n,r),h(n,i),h(n,o),h(n,s),h(n,a),h(a,u),h(n,c),h(n,p),h(p,m)},p(t,[e]){1&e&&b(u,t[0]),2&e&&b(m,t[1])},i:t,o:t,d(t){t&&l(n)}}}function Fe(t,e,n){let r,i,{date:o}=e;const s=je();return t.$$set=t=>{"date"in t&&n(2,o=t.date)},t.$$.update=()=>{4&t.$$.dirty&&n(0,r=Math.abs(o.diff(s,"year"))),5&t.$$.dirty&&n(1,i=Math.abs(o.diff(s,"month"))-12*r)},[r,i,o]}class $e extends Y{constructor(t){super(),K(this,t,Fe,Ue,o,{date:2})}}function qe(t){let e,n,r,i,o,s,a,u,c;return u=new $e({props:{date:t[0]}}),{c(){e=d("div"),n=d("h3"),r=v(t[1]),i=y(),o=d("div"),s=v(t[2]),a=y(),G(u.$$.fragment),g(n,"class","flex justify-center text-2xl font-bold"),g(o,"class","flex justify-center"),g(e,"class","p-4 bg-gray-200")},m(t,l){f(t,e,l),h(e,n),h(n,r),h(e,i),h(e,o),h(o,s),h(e,a),B(u,e,null),c=!0},p(t,[e]){(!c||2&e)&&b(r,t[1]),(!c||4&e)&&b(s,t[2]);const n={};1&e&&(n.date=t[0]),u.$set(n)},i(t){c||(F(u.$$.fragment,t),c=!0)},o(t){$(u.$$.fragment,t),c=!1},d(t){t&&l(e),z(u)}}}function Ge(t,e,n){let r,{name:i}=e,{date:o}=e;return t.$$set=t=>{"name"in t&&n(1,i=t.name),"date"in t&&n(0,o=t.date)},t.$$.update=()=>{1&t.$$.dirty&&n(0,o=je(o)),1&t.$$.dirty&&n(2,r=o.format("MMMM D, YYYY"))},[o,i,r]}class Be extends Y{constructor(t){super(),K(this,t,Ge,qe,o,{name:1,date:0})}}function ze(t,e,n){const r=t.slice();return r[4]=e[n],r}function He(t){let e;return{c(){e=v("timeline")},m(t,n){f(t,e,n)},d(t){t&&l(e)}}}function Ke(t){let e,n,r,i,o=t[4].data.name+"";return{c(){e=d("option"),n=v(o),r=y(),e.__value=i=t[4],e.value=e.__value},m(t,i){f(t,e,i),h(e,n),h(e,r)},p(t,r){2&r&&o!==(o=t[4].data.name+"")&&b(n,o),2&r&&i!==(i=t[4])&&(e.__value=i,e.value=e.__value)},d(t){t&&l(e)}}}function Ye(t){let e,n,r,i,o,s,a;n=new ye({props:{$$slots:{default:[He]},$$scope:{ctx:t}}});let u=t[1],c=[];for(let e=0;e<u.length;e+=1)c[e]=Ke(ze(t,u,e));return{c(){e=d("div"),G(n.$$.fragment),r=y(),i=d("select");for(let t=0;t<c.length;t+=1)c[t].c();g(i,"class","w-full"),void 0===t[0]&&D((()=>t[2].call(i)))},m(u,l){f(u,e,l),B(n,e,null),h(e,r),h(e,i);for(let t=0;t<c.length;t+=1)c[t].m(i,null);I(i,t[0]),o=!0,s||(a=m(i,"change",t[2]),s=!0)},p(t,[e]){const r={};if(128&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),2&e){let n;for(u=t[1],n=0;n<u.length;n+=1){const r=ze(t,u,n);c[n]?c[n].p(r,e):(c[n]=Ke(r),c[n].c(),c[n].m(i,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=u.length}3&e&&I(i,t[0])},i(t){o||(F(n.$$.fragment,t),o=!0)},o(t){$(n.$$.fragment,t),o=!1},d(t){t&&l(e),z(n),p(c,t),s=!1,a()}}}function We(t,e,n){let r,i;s(t,Z,(t=>n(3,r=t))),s(t,J,(t=>n(1,i=t)));let o=r;return t.$$.update=()=>{1&t.$$.dirty&&Z.set(o)},[o,i,function(){o=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,o)}]}class Xe extends Y{constructor(t){super(),K(this,t,We,Ye,o,{})}}function Qe(t,e,n){const r=t.slice();return r[2]=e[n].name,r[3]=e[n].date,r}function Je(t){let e,n,r,i;return n=new Be({props:{name:t[2],date:t[3]}}),{c(){e=d("div"),G(n.$$.fragment),r=y(),g(e,"class","col-start-2 my-2")},m(t,o){f(t,e,o),B(n,e,null),h(e,r),i=!0},p(t,e){const r={};1&e&&(r.name=t[2]),1&e&&(r.date=t[3]),n.$set(r)},i(t){i||(F(n.$$.fragment,t),i=!0)},o(t){$(n.$$.fragment,t),i=!1},d(t){t&&l(e),z(n)}}}function Ze(t){let e,n,r,i;n=new Xe({});let o=t[0],s=[];for(let e=0;e<o.length;e+=1)s[e]=Je(Qe(t,o,e));const a=t=>$(s[t],1,1,(()=>{s[t]=null}));return{c(){e=d("div"),G(n.$$.fragment),r=y();for(let t=0;t<s.length;t+=1)s[t].c()},m(t,o){f(t,e,o),B(n,e,null),h(e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);i=!0},p(t,[n]){if(1&n){let r;for(o=t[0],r=0;r<o.length;r+=1){const i=Qe(t,o,r);s[r]?(s[r].p(i,n),F(s[r],1)):(s[r]=Je(i),s[r].c(),F(s[r],1),s[r].m(e,null))}for(j(),r=o.length;r<s.length;r+=1)a(r);U()}},i(t){if(!i){F(n.$$.fragment,t);for(let t=0;t<o.length;t+=1)F(s[t]);i=!0}},o(t){$(n.$$.fragment,t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)$(s[t]);i=!1},d(t){t&&l(e),z(n),p(s,t)}}}function tn(t,e,n){let r,i;return s(t,tt,(t=>n(1,i=t))),t.$$.update=()=>{2&t.$$.dirty&&n(0,r=i.sort(((t,e)=>t.date.localeCompare(e.date))))},[r,i]}class en extends Y{constructor(t){super(),K(this,t,tn,Ze,o,{})}}function nn(t){let e,n,r;function i(e){t[2](e)}let o={slot:"input1",label:"name",placeholder:"Birthdays"};return void 0!==t[0]&&(o.value=t[0]),e=new we({props:o}),A.push((()=>q(e,"value",i))),{c(){G(e.$$.fragment)},m(t,n){B(e,t,n),r=!0},p(t,r){const i={};!n&&1&r&&(n=!0,i.value=t[0],x((()=>n=!1))),e.$set(i)},i(t){r||(F(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){z(e,t)}}}function rn(t){let e;return{c(){e=v("Add")},m(t,n){f(t,e,n)},d(t){t&&l(e)}}}function on(t){let e,n;return e=new pe({props:{slot:"submit",onClick:t[1],$$slots:{default:[rn]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function sn(t){let e,n;return e=new De({props:{title:"timeline",$$slots:{submit:[on],input1:[nn]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,[n]){const r={};17&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function an(t,e,n){let r,i;return s(t,Q,(t=>n(3,r=t))),[i,function(){he(r.id,i)},function(t){i=t,n(0,i)}]}class un extends Y{constructor(t){super(),K(this,t,an,sn,o,{})}}function cn(t){let e,n,r=t[1]&&hn(t);return{c(){r&&r.c(),e=v("")},m(t,i){r&&r.m(t,i),f(t,e,i),n=!0},p(t,n){t[1]?r?(r.p(t,n),2&n&&F(r,1)):(r=hn(t),r.c(),F(r,1),r.m(e.parentNode,e)):r&&(j(),$(r,1,1,(()=>{r=null})),U())},i(t){n||(F(r),n=!0)},o(t){$(r),n=!1},d(t){r&&r.d(t),t&&l(e)}}}function hn(t){let e,n,r,i;return e=new Ve({props:{timeline:t[1]}}),r=new en({}),{c(){G(e.$$.fragment),n=y(),G(r.$$.fragment)},m(t,o){B(e,t,o),f(t,n,o),B(r,t,o),i=!0},p(t,n){const r={};2&n&&(r.timeline=t[1]),e.$set(r)},i(t){i||(F(e.$$.fragment,t),F(r.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),$(r.$$.fragment,t),i=!1},d(t){z(e,t),t&&l(n),z(r,t)}}}function fn(t){let e,n,r,i;n=new un({});let o=t[0]?.length>0&&cn(t);return{c(){e=d("div"),G(n.$$.fragment),r=y(),o&&o.c(),g(e,"class","grid gap-3")},m(t,s){f(t,e,s),B(n,e,null),h(e,r),o&&o.m(e,null),i=!0},p(t,[n]){t[0]?.length>0?o?(o.p(t,n),1&n&&F(o,1)):(o=cn(t),o.c(),F(o,1),o.m(e,null)):o&&(j(),$(o,1,1,(()=>{o=null})),U())},i(t){i||(F(n.$$.fragment,t),F(o),i=!0)},o(t){$(n.$$.fragment,t),$(o),i=!1},d(t){t&&l(e),z(n),o&&o.d()}}}function ln(t,e,n){let r,i;return s(t,J,(t=>n(0,r=t))),s(t,Z,(t=>n(1,i=t))),[r,i]}class pn extends Y{constructor(t){super(),K(this,t,ln,fn,o,{})}}class dn extends Y{constructor(t){super(),K(this,t,null,null,o,{})}}function vn(t){let e;return{c(){e=v("Sign in with Google")},m(t,n){f(t,e,n)},d(t){t&&l(e)}}}function yn(t){let e,n;return e=new pe({props:{onClick:t[0],$$slots:{default:[vn]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function mn(t){const{loginWithGoogle:e}=function(){const t=Wt.auth();return t.onAuthStateChanged((async t=>{if(t){const e=await t.getIdTokenResult();Q.set({id:e.claims.user_id,name:e.claims.name,email:e.claims.email})}else Q.set(null)})),{loginWithGoogle:()=>{const e=new Wt.auth.GoogleAuthProvider;return t.signInWithPopup(e)},logout:()=>t.signOut()}}();return[e]}(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Qa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function l(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(t){return t}function T(t,e,n){this.code=S+t,this.message=e||k[t]||"",this.a=n||null}function A(t){var e=t&&t.code;return e?new T(e.substring(S.length),t.message,t.serverResponse):null}E(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var N,S="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function R(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}N=D("__EID__")?"__EID__":void 0,E(P,Error),P.prototype.name="CustomError",E(C,P),C.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new L((function(){return new F}),(function(t){t.reset()}));function U(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function F(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var $=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var G=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=$(t,e)}function K(t,e){var n;return(n=0<=(e=$(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function W(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,tt=/</g,et=/>/g,nt=/"/g,rt=/'/g,it=/\x00/g,ot=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var ut=s.navigator;if(ut){var ct=ut.userAgent;if(ct){Q=ct;break t}}Q=""}function ht(t){return st(Q,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===It&&e||"",this.b=wt}function gt(t){return t instanceof mt&&t.constructor===mt&&t.b===wt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt,wt={},It={};function Et(){if(void 0===bt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:_,createScript:_,createScriptURL:_})}catch(t){s.console&&s.console.error(t.message)}bt=t}else bt=t}return bt}function _t(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof _t&&t.constructor===_t?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function At(t,e){var n=gt(t);if(!St.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new _t(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(Nt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?gt(t):encodeURIComponent(String(t))})))}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,St=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function Ot(t,e){this.a=e===Mt?t:""}function Dt(t){return t instanceof Ot&&t.constructor===Ot?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ct=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){if(t instanceof Ot)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Ct.test(t))t=new Ot(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&xt.test(e[1])?new Ot(t,Mt):null}return t}function Lt(t){return t instanceof Ot?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ct.test(t)||(t="about:invalid#zClosurez"),new Ot(t,Mt))}var Mt={},Vt=new Ot("about:invalid#zClosurez",Mt);function jt(t,e,n){this.a=n===Ut?t:""}jt.prototype.sa=!0,jt.prototype.ra=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function Ft(t,e,n,r){return t=t instanceof Ot?t:Lt(t),e=e||s,n=n instanceof mt?gt(n):n||"",e.open(Dt(t),n,r,void 0)}function $t(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(it,"&#0;"))),t}function Gt(t){return Gt[" "](t),t}Gt[" "]=h;var Bt,zt,Ht=ht("Opera"),Kt=ht("Trident")||ht("MSIE"),Yt=ht("Edge"),Xt=Yt||Kt,Qt=ht("Gecko")&&!(st(Q.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Jt=st(Q.toLowerCase(),"webkit")&&!ht("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=(zt=Q,Qt?/rv:([^\);]+)(\)|;)/.exec(zt):Yt?/Edge\/([\d\.]+)/.exec(zt):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zt):Jt?/WebKit\/(\S+)/.exec(zt):Ht?/(?:Version)[ \/]?(\S+)/.exec(zt):void 0);if(ee&&(te=ee?ee[1]:""),Kt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){Bt=String(ne);break t}}Bt=te}var re,ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(Bt)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=at(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||at(0==s[2].length,0==a[2].length)||at(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&Kt){var se=Zt();re=se||(parseInt(Bt,10)||void 0)}else re=void 0;var ae=re;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(zt){}var ue=!Kt||9<=Number(ae);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){ft(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,le,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!l(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}q(s?X(o):o,r)}}}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){s.setTimeout((function(){throw t}),0)}function me(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(we)}}else le=function(){var t=we;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(fe||(fe=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),fe(t)):s.setImmediate(t)}}(),ge||(le(),ge=!0),be.add(t,e)}var ge=!1,be=new V;function we(){for(var t;t=U();){try{t.a.call(t.b)}catch(t){ye(t)}M(j,t)}ge=!1}function Ie(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Le(n,_e,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,Te,t)}))}catch(t){Le(this,Te,t)}}var Ee=0,_e=2,Te=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new L((function(){return new Ae}),(function(t){t.reset()}));function Se(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof Ie)return t;var e=new Ie(h);return Le(e,_e,t),e}function Oe(t){return new Ie((function(e,n){n(t)}))}function De(t,e,n){Me(t,e,n,null)||me(w(e,t))}function xe(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ee&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):je(n),Ue(n,i,Te,e)))}t.c=null}else Le(t,Te,e)}function Ce(t,e){t.b||t.a!=_e&&t.a!=Te||Ve(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Se(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Ce(t,i),i.a}function Le(t,e,n){t.a==Ee&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ve(t),e!=Te||n instanceof qe||function(t,e){t.g=!0,me((function(){t.g&&$e.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof Ie)return Ce(t,Se(e||h,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ve(t){t.h||(t.h=!0,me(t.gc,t))}function je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(t){$e.call(null,t)}M(Ne,e)}function Fe(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Ce(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new qe(t);me((function(){Pe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Le(this,_e,t)},t.ad=function(t){this.a=Ee,Le(this,Te,t)},t.gc=function(){for(var t;t=je(this);)Ue(this,t,this.a,this.i);this.h=!1};var $e=ye;function qe(t){P.call(this,t)}function Ge(){this.xa=this.xa,this.pa=this.pa}E(qe,P),qe.prototype.name="cancel";function Be(t){!t.xa&&(t.xa=!0,t.Da(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}(t)}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var ze=Object.freeze||function(t){return t},He=!Kt||9<=Number(ae),Ke=Kt&&!oe("9"),Ye=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function We(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Gt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}We.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Xe,We);var Qe=ze({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&K(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?In(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=mn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=yn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?En(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&ln(t),n.call(r,e)}function yn(t,e){if(t.va)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function mn(t){return(t=t[sn])instanceof nn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function wn(){Ge.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function In(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function _n(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function An(t){var e=null;return new Ie((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Nn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(l(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(wn,Ge),wn.prototype[Je]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;vt(t=new We(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=_n(s,r,!0,t)&&i}if(i=_n(s=t.b=n,r,!0,t)&&i,i=_n(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=_n(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=kn.prototype).W=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return On(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},t.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Cn(this,t.c),this.l=t.l,this.a=t.a,Rn(this,t.g),this.f=t.f,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Cn(this,n[1]||"",!0),this.l=Fn(n[2]||""),this.a=Fn(n[3]||"",!0),Rn(this,n[4]),this.f=Fn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Fn(n[7]||"")):(this.i=!!e,this.b=new Yn(null,this.i))}function Cn(t,e,n){t.c=n?Fn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Yn?(t.b=e,function(t,e){e&&!t.f&&(Wn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=$n(e,Hn)),t.b=new Yn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Vn(t,e){return t.b.get(e)}function jn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Un(t,e,n,r){var i=new Pn(null,void 0);return t&&Cn(i,t),e&&(i.a=e),n&&Rn(i,n),r&&(i.f=r),i}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $n(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push($n(e,Gn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push($n(e,Gn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push($n(n,"/"==n.charAt(0)?zn:Bn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",$n(n,Kn)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Cn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Rn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Gn=/[#\/\?@]/g,Bn=/[#\?:]/g,zn=/[#\?]/g,Hn=/[#\?@]/g,Kn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Wn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Yn(null,void 0);t=Nn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Qn(t,e){Wn(t),e=er(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function Jn(t,e){return Wn(t),e=er(t,e),Dn(t.a.b,e)}function Zn(t,e,n){Qn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new Yn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Yn.prototype).add=function(t,e){Wn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Wn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Wn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Wn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=W(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return Wn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return Kt&&!!ae&&11==ae||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||s.window;var n="about:blank";t&&(n=Dt(Rt(t)||Vt)),e.location.href=n}function fr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<fr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function lr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||s.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Ar(kr())==_r&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ot?n:Rt(void 0!==n.href?n.href:String(n))||Vt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Ot?e:Lt(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=Dt(e),s&&(Xt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">',t=new jt(t=(r=Et())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof jt&&t.constructor===jt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new Ie((function(e){"complete"==s.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw fn(window,"load",t),e}))}function gr(t){return t=t||kr(),!("file:"!==Cr()&&"ionic:"!==Cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Ir(){return Wt.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Wt.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Er(){var t=Ir();return"ReactNative"===t||"Node"===t}var _r="Firefox",Tr="Chrome";function Ar(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?_r:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Nr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Nr)i[Nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ir())?r=Ar(i=kr()):"Worker"===r&&(r=Ar(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Or(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Dr(){try{var t=s.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(t){return wr()&&!!s.indexedDB}return!1}function xr(){return(Pr()||"chrome-extension:"===Cr()||gr())&&!Er()&&Dr()&&!wr()}function Pr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return s.location&&s.location.protocol||null}function Rr(t){return!lr(t=t||kr())&&Ar(t)!=_r}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Vr(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Ar(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Fr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function $r(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=Ir(),this.b=lr(t)||"ReactNative"===e}function qr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Gr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Br(){return!(!Or("fireauth.oauthhelper",s)&&!Or("fireauth.iframe",s))}$r.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zr,Hr={};function Kr(t){Hr[t]||(Hr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Yr={};Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:2}),zr=2==Yr.abcd}catch(zt){zr=!1}function Wr(t,e,n){zr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Wr(t,n,e[n])}function Qr(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Wr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Wr(this,"uid",t[ri]),Wr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Wr(this,"enrollmentTime",n),Wr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Wr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[hi],r=t[li],i=t[pi];if(t=ti(t[fi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[mi]=n||null,e[di]=r):(e[vi]=r||null,e[mi]=r||null,e[di]=n||null),e[yi]=t||null,Wr(this,bi,i),Wr(this,gi,Jr(e))}E(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",fi="mfaInfo",li="newEmail",pi="requestType",di="email",vi="fromEmail",yi="multiFactorInfo",mi="previousEmail",gi="data",bi="operation";function wi(t){var e=Vn(t=jn(t),Ii)||null,n=Vn(t,Ei)||null,r=Vn(t,Ai)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new T("argument-error",Ii+", "+Ei+"and "+Ai+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Vn(t,_i)||null,languageCode:Vn(t,Ti)||null,tenantId:Vn(t,Ni)||null})}var Ii="apiKey",Ei="oobCode",_i="continueUrl",Ti="languageCode",Ai="mode",Ni="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new wi(t)}catch(t){return null}}function Oi(t){var e=t[Ri];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Di];if(n&&"object"==typeof n){e=n[Vi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Vi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(e=t[Ci])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Ci+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new T("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Di="android",xi="dynamicLinkDomain",Pi="handleCodeInApp",Ci="iOS",Ri="url",Li="installApp",Mi="minimumVersion",Vi="packageName",ji="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Fi=null;function $i(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Fi){Fi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Fi[o]&&(Fi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function qi(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Gi(t){try{return new qi(t)}catch(t){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=$i(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],Ki={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Hi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Hi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Hi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Yi(t){for(var e in Ki)if(Ki[e].fa==t)return Ki[e];return null}function Wi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Qi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Xi])return new Ji(t)}catch(t){}return null}var Xi="idToken",Qi="providerId";function Ji(t){var e=t[Qi];if(!e&&t[Xi]){var n=Gi(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Wr(this,"providerId",e),Wr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Wr(this,"profile",Jr((t=Vr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Wr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Wr(this,"username",t.screenName||null)}function io(t){var e=jn(t),n=Vn(e,"link"),r=Vn(jn(n),"link");return e=Vn(e,"deep_link_id"),Vn(jn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}E(Zi,Ji),E(to,Zi),E(eo,Zi),E(no,Zi),E(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Js]){var n=Gi(t[Js]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==S+"user-not-found"?new T("user-mismatch"):t}))}function ho(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Wr(this,"providerId",t),Wr(this,"signInMethod",t)}function fo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Wr(this,"idToken",e.idToken),e.accessToken&&Wr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Wr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Wr(this,"accessToken",e.oauthToken),Wr(this,"secret",e.oauthTokenSecret)}Wr(this,"providerId",t),Wr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Yi(t)||{}).Ja||null,this.ob=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,Hi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function _o(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function To(){bo.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function No(){mo.call(this,"twitter.com",zi)}function So(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Wr(this,"providerId","password"),Wr(this,"signInMethod",n===Do.EMAIL_LINK_SIGN_IN_METHOD?Do.EMAIL_LINK_SIGN_IN_METHOD:Do.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oo(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Do(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=Po(e)))throw new T("argument-error","Invalid email link!");return new ko(t,e.code,Do.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=ki(t=io(t)))&&t.operation===ui?t:null}function Co(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new T("internal-error");this.a=t,Wr(this,"providerId","phone"),this.fa="phone",Wr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Co(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||Wt.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Co({eb:t,cb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Co({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Io(n);case"github.com":return _o(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Fo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function $o(t){return(t=t||{}).type?new Fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&A(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?ke(this.a):ke(this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return wa(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,Ia(t,n)},ho.prototype.c=function(t,e){return co(Ea(t,fo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return wa(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Ia(t,n)},po.prototype.c=function(t,e){return co(Ea(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Ib=pt(t),this},E(go,mo),E(bo,mo),bo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return X(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},E(wo,bo),Wr(wo,"PROVIDER_ID","facebook.com"),Wr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Eo,bo),Wr(Eo,"PROVIDER_ID","github.com"),Wr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),E(To,bo),Wr(To,"PROVIDER_ID","google.com"),Wr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),E(No,mo),Wr(No,"PROVIDER_ID","twitter.com"),Wr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Da,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?ru(t,xa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ba,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Do,{PROVIDER_ID:"password"}),Xr(Do,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Do,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Co.prototype.ka=function(t){return t.fb(Lo(this))},Co.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Co.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Co.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then((function(t){return function(t,e){return ru(t,Ha,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(e){return function(t,e){return ru(t,Ka,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,qa,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Fo.prototype.T=function(){return this.h},Fo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Go,Bo=null;function zo(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.c)?n=$t("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=$t("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Ho(t,e,n){T.call(this,t,n),(t=e||{}).Jb&&Wr(this,"email",t.Jb),t.ea&&Wr(this,"phoneNumber",t.ea),t.credential&&Wr(this,"credential",t.credential),t.Zb&&Wr(this,"tenantId",t.Zb)}function Ko(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:jo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Yo(){}function Wo(t){return t.c||(t.c=t.b())}function Xo(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}E(zo,T),E(Ho,T),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,E(Xo,Yo),Xo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Go=new Xo,E(Jo,Yo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(R("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function fs(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=fs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function ls(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=fs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ps,Yo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),E(ds,wn);var vs=0;function ys(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,gs(t)}function gs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){wn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ws,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,gs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,gs(this)),this.a&&(this.readyState=3,gs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ys(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):gs(this),3==this.readyState&&ys(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Ua=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(bs,wn);var ws="";bs.prototype.b=fs("goog.net.XhrIo");var Is=/^https?$/i,Es=["POST","PUT"];function _s(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Go.a(),t.C=t.D?Wo(t.D):Wo(Go),t.a.onreadystatechange=b(t.Vb,t);try{ls(t.b,Ps(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return ls(t.b,Ps(t,"Error opening Xhr: "+e.message)),void As(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)q(t,e,void 0);else for(var n=Sn(t),r=Nn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(Es,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Os(t),0<t.g&&(t.u=function(t){return Kt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,Ps(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),ls(t.b,Ps(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ls(t.b,Ps(t,"Send error: "+e.message)),As(t,e)}}function Ts(t){return"content-type"==t.toLowerCase()}function As(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ns(t),ks(t)}function Ns(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ss(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ds(t)&&2==xs(t))ls(t.b,Ps(t,"Local request error detected and ignored"));else if(t.i&&4==Ds(t))Tn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ds(t)){ls(t.b,Ps(t,"Request complete")),t.c=!1;try{var e,n=xs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(xn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Is.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ds(t)?t.a.statusText:""}catch(e){ls(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+xs(t)+"]",Ns(t)}}finally{ks(t)}}}function ks(t,e){if(t.a){Os(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Os(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ds(t){return t.a?t.a.readyState:0}function xs(t){try{return 2<Ds(t)?t.a.status:-1}catch(t){return-1}}function Ps(t,e){return e+" ["+t.R+" "+t.l+" "+xs(t)+"]"}function Cs(t){var e=Bs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Rs(t,e,n){t.a=!0,t.c=n,t.f=!e,js(t)}function Ls(t){if(t.a){if(!t.v)throw new Us(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&js(t)}function Vs(t){return z(t.g,(function(t){return p(t[1])}))}function js(t){if(t.h&&t.a&&Vs(t)){var e=t.h,n=qs[e];n&&(s.clearTimeout(n.a),delete qs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Vs(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Cs?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new $s(e),qs[e.a]=e,t.h=e.a)}function Us(){P.call(this)}function Fs(){P.call(this)}function $s(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,Ps(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,Ps(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ks(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ks(this,!0)),bs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ss(this):this.Jc())},t.Jc=function(){Ss(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ws:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ls(this.b,"Can not get response: "+t.message),null}},Cs.prototype.cancel=function(t){if(this.a)this.c instanceof Cs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Fs(this),Ls(this),Rs(this,!1,t))}},Cs.prototype.m=function(t,e){this.i=!1,Rs(this,t,e)},Cs.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof Fs?o.cancel():i(t)})),o.then(t,e,n)},Cs.prototype.$goog_Thenable=!0,E(Us,P),Us.prototype.message="Deferred has already fired",Us.prototype.name="AlreadyCalledError",E(Fs,P),Fs.prototype.message="Deferred was canceled",Fs.prototype.name="CanceledError",$s.prototype.c=function(){throw delete qs[this.a],this.b};var qs={};function Gs(t){var e,n=document,r=Tt(t).toString(),i=ve(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Cs(o);return e=window.setTimeout((function(){zs(i,!0);var t=new Ys(Ks,"Timeout reached for loading script "+r);Ls(a),Rs(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,!1,e),Ls(a),Rs(a,!0,null))},i.onerror=function(){zs(i,!0,e);var t=new Ys(Hs,"Error while loading script "+r);Ls(a),Rs(a,!1,t)},vt(o={},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Bs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Hs=0,Ks=1;function Ys(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Ws(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=pt(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=pt(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ir(),!(n=s.XMLHttpRequest||n&&Wt.INTERNAL.node&&Wt.INTERNAL.node.XMLHttpRequest)&&!wr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new ps(self):Er()?this.f=new Ws(n):this.f=new Jo,this.b=null}E(Ys,P),E(Ws,Yo),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var Qs,Js="idToken",Zs=new $r(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new $r(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=jn(t),e=jn(e.url),t.f=t.a+t.f,Cn(t,e.c),t.a=e.a,Rn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=Ar(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Kt&&ae&&!(9<ae))})()||wr()?t=b(t.u,t):(Qs||(Qs=new Ie((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Gs(At(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new bs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}In(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(a,"ready",(function(){u&&clearTimeout(u),Be(this)})),En(a,"timeout",(function(){u&&clearTimeout(u),Be(this),e&&e(null)})),_s(a,t,n,r,i)};var ua=new mt(It,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t,e,n,r,i,o,s){var a=jn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",I().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new Ie((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function fa(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new T("invalid-email")}function la(t){"email"in t&&fa(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,pt(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.zb=function(){return ru(this,za,{})},Xs.prototype.Bb=function(t,e){return ru(this,Ga,{idToken:t,email:e})},Xs.prototype.Cb=function(t,e){return ru(this,Ba,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ya(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new Yn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ko(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ko(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ko(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Ya,e)}function Ia(t,e){return e.returnIdpCredential=!0,ru(t,Xa,e)}function Ea(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Wa,e)}function _a(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Xs.prototype).Db=function(t,e){var n={idToken:t},r=[];return ft(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ga,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,ja,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Va,t)},t.fb=function(t){return ru(this,Za,t)},t.nb=function(t,e){return ru(this,$a,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Aa,{oobCode:t})},t.jb=function(t){return ru(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:_a,Z:"email",B:!0},Aa={endpoint:"resetPassword",A:_a,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Na={endpoint:"signupNewUser",A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},Sa={endpoint:"createAuthUri",B:!0},ka={endpoint:"deleteAccount",N:["idToken"]},Oa={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Da={endpoint:"emailLinkSignin",N:["email","oobCode"],A:fa,G:pa,V:!0,B:!0},xa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:fa,G:pa,V:!0},Pa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ya,G:pa,B:!0,Na:!0},Ca={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ya,G:pa,B:!0,Na:!0},Ra={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");fa(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Va={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");fa(t)},Z:"email",B:!0},Ua={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Fa={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},$a={endpoint:"resetPassword",A:_a,Z:"email",B:!0},qa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ga={endpoint:"setAccountInfo",N:["idToken"],A:la,V:!0},Ba={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(la(t),!t.password)throw new T("weak-password")},G:pa,V:!0},za={endpoint:"signupNewUser",G:pa,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ka={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ya={endpoint:"verifyAssertion",A:ma,Ya:ga,G:ba,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:ma,Ya:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new T("internal-error")},Ya:ga,G:ba,V:!0},Qa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(fa(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ko(t);pa(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Oe(new T("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return ke(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ha(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new Ie((function(t,e){function n(){Fr(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Fr(),e(Error("Network Error"))},timeout:uu.get()})}if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},ke(Gs(r=At(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ie((function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new mt(It,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new $r(3e4,6e4),cu=new $r(5e3,15e3),hu=null;function fu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=jn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Wt.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,Ua,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=jn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(cr())}))}function yu(t){return t.m||(t.m=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new fu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=$o(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Sr(t.c,pu(t.b)):null,t.l=new Xs(t.g,D(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new lu(t,e,n,r,i,f)).l=o,t.g=s,t.i=a,t.b=pt(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||Wt.INTERNAL.reactNative&&Wt.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=b(this.c,this)}fu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Qn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Qn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Qn(this.a.b,"fw"),this.a.toString()},lu.prototype.yb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.v){var t=jn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Wt.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),lt(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Qn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Qn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Qn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Vn(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):Qn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Qn(t.b,"eid"),(s=pu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return yu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Ie((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return An(n).then((function(){e(r)}))}))},t.Xb=function(){var t=kr();return!Rr(t)&&!Ur(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Oe(new T("popup-blocked"));if(s&&!Rr())return this.ma().o((function(e){pr(t),i(e)})),r(),ke();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),s)||hr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Uo(e),hr(gu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return yu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Y(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Vr(t)}))},t.set=function(t,e){return ke(this.a.setItem(t,Lr(e)))},t.U=function(t){return ke(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Eu=[];function _u(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Au(t){this.c=t,this.b=!1,this.a=[]}function Nu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Su(t,c),e})).o((function(e){throw Su(t,c),e}))}function Su(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function ku(){if(!Pu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(q(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Eu.push(e)}return e}(),_u(this.v,"keyChanged",(function(e,n){return Vu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),_u(this.v,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new Au(new Tu(e)),Nu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Ou(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Ou(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.i||(t.i=Ou(t)),t.i}function xu(t,e){var n=0;return new Ie((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Pu(){try{return!!s.indexedDB}catch(t){return!1}}function Cu(t){return t.objectStore("firebaseLocalStorage")}function Ru(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Nu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Vu(t){return Du(t).then((function(t){var e=Cu(Ru(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=fr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Pu()){var t=jr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function Fu(){this.a={},this.type="inMemory"}function $u(){if(!function(){var t="Node"==Ir();if(!(t=qu()||t&&Wt.INTERNAL.node&&Wt.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=qu()||Wt.INTERNAL.node.localStorage,this.type="localStorage"}function qu(){try{var t=s.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){this.type="nullStorage"}function Bu(){if(!function(){var t="Node"==Ir();if(!(t=zu()||t&&Wt.INTERNAL.node&&Wt.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ir())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=zu()||Wt.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zu(){try{var t=s.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hu(){var t={};t.Browser=Wu,t.Node=Xu,t.ReactNative=Qu,t.Worker=Ju,this.a=t[Ir()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Au.prototype.close=function(){for(;0<this.a.length;)Su(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return xu(this,(function(e){return Lu((e=Cu(Ru(e,!0))).get(t))})).then((function(i){return xu(n,(function(o){if(o=Cu(Ru(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return xu(this,(function(e){return Lu(Cu(Ru(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return xu(this,(function(r){return n=!0,e.b++,Lu(Cu(Ru(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Vu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}ju(t),e()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Fu.prototype).get=function(t){return ke(this.a[t])},t.set=function(t,e){return this.a[t]=e,ke()},t.U=function(t){return delete this.a[t],ke()},t.ca=function(){},t.ia=function(){},(t=$u.prototype).get=function(t){var e=this;return ke().then((function(){return Vr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&fn(s.window,"storage",t)},(t=Gu.prototype).get=function(){return ke(null)},t.set=function(){return ke()},t.U=function(){return ke()},t.ca=function(){},t.ia=function(){},(t=Bu.prototype).get=function(t){var e=this;return ke().then((function(){return Vr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return ke().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Ku,Yu,Wu={F:$u,bb:Bu},Xu={F:$u,bb:Bu},Qu={F:bu,bb:Gu},Ju={F:$u,bb:Gu},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(kr())||!br()),e=Rr(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},Ku||(Ku=new Hu),t=Ku;try{this.g=!ur()&&Br()||!s.indexedDB?new t.a.F:new Uu(wr()?new Fu:new t.a.F)}catch(t){this.g=new Fu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Fu}this.v=new Fu,this.f=b(this.Yb,this),this.b={}}function ec(){return Yu||(Yu=new tc),Yu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Br())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Kt&&ae&&10==ae&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=fc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(gc):gc),this.reset()}E(hc,(function(){this.b=-1}));for(var fc=64,lc=fc-1,pc=[],dc=0;dc<lc;dc++)pc[dc]=0;var vc=W(128,pc);function yc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|ac[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(yc(t),i=0);else{if(!l(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(yc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}E(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new T("invalid-cordova-configuration",t)}function _c(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(yc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return B(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ac(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Nc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Vr(Vn(o=jn(i),"firebaseError")||null))?A(o):null)?new Fo(r.c,r.b,null,null,o,null,r.T()):new Fo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new Fo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=An(500).then((function(){return Nc(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Bo||(Bo=new qo),function(t){var e=Bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Or("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Nc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return $o(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Sc(t){this.a=t,this.b=ec()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?mr().then((function(){return new Ie((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Or("universalLinks.subscribe",s))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",s))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",s))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",s))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Ob=function(t,e){return e(new T("operation-not-supported-in-this-environment")),ke()},t.Mb=function(){return Oe(new T("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Oe(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=ke().then((function(){return Uo(e),Ac(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Fo(e,r,null,o,new T("no-auth-event"),null,i),u=Or("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",s),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!kr().toLowerCase().match(/android/))return Oe(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=_c(o),h.sessionId=o;var f=gu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Or("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=kr(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){u=function(){var e=Or("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=An(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){qr()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Nc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Ac(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Fo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Sa=function(t){Y(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Oc(t){return ic(t.b,kc,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new zc,this.C=new Xc,this.g=new Sc(Gc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=xc(this.D,this.v,this.m,N,this.J)}function xc(t,e,n,r,i){var o=Wt.SDK_VERSION||null;return gr()?new Ic(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Pc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Cc(t){t.a.Xb()&&Pc(t).o((function(e){var n=new Fo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||Hc(t.b)}function Rc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Oc(t.g).then((function(){Pc(t).o((function(e){var n=new Fo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Cc(t)})).o((function(){Cc(t)}))}function Lc(t,e){Y(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=xc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=I()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=I())),e=!0;break}}return Hc(this.b),e};var Mc=new $r(2e3,1e4),Vc=new $r(3e4,6e4);function jc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Fc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Oc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Oc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function $c(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Dc.prototype.qa=function(){return this.b.qa()};var qc={};function Gc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Bc(t,e,n,r){var i=Gc(e,n,r);return qc[i]||(qc[i]=new Dc(t,e,n,r)),qc[i]}function zc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Wc(t,!1,null,null))}function Kc(t){t.g&&!t.i&&Wc(t,!1,null,null)}function Yc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Wc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Yc(t,n):Yc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Qc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,Wr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Gr(1e3*e.exp),authTime:Gr(1e3*e.auth_time),issuedAtTime:Gr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;q(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Wr(this,"auth",this.a),Wr(this,"session",this.c),Wr(this,"hints",this.b)}zc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},zc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Wc(this,!0,null,t.a),ke()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Wc(t,a,e,null)})).o((function(e){Wc(t,a,null,e)}))}(this,t,e):Oe(new T("invalid-auth-event")):(Wc(this,!1,null,null),ke())}else Oe(new T("invalid-auth-event"))},zc.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=An(Vc.get()).then((function(){t.b||(t.g=!0,Wc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),ke()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Oe(new T("invalid-auth-event"))}else Oe(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Wr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function sh(){}function ah(t){Wr(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in We.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),fh(this,n)}function fh(t,e){t.b=e,Wr(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return qr()||!t?ke():new Ie((function(n){e=function(){qr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function yh(t,e){t.b=Gi(e[Js]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Gi(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function gh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Gr(e||null),creationTime:Gr(t||null)})}function bh(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Wt.SDK_VERSION?Sr(Wt.SDK_VERSION):null;this.a=new Xs(this.l,D(N),r),t.emulatorConfig&&ia(this.a,t.emulatorConfig),this.b=new dh(this.a),kh(this,e[Js]),yh(this.b,e),Wr(this,"refreshToken",this.b.a),xh(this,n||{}),wn.call(this),this.R=!1,this.s&&xr()&&(this.i=Bc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=b(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ia(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){_h(i,t.f)},this.ba=null,this.O=new hh(this,n),Wr(this,"multiFactor",this.O)}function Ih(t,e){t.ja&&fn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function Eh(t,e){t.X&&fn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function _h(t,e){t.$=e,sa(t.a,Wt.SDK_VERSION?Sr(Wt.SDK_VERSION,t.$):null)}function Th(t,e){t.ba&&fn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function Ah(t){try{return Wt.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Nh(t){t.D||t.u.b||(t.u.start(),fn(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function Sh(t){fn(t,"tokenChanged",t.aa),t.u.stop()}function kh(t,e){t.za=e,Wr(t,"_lat",e)}function Oh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return xe(e).then((function(){return t}))}function Dh(t){t.i&&!t.R&&(t.R=!0,Rc(t.i,t))}function xh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ph(){}function Ch(t){return ke().then((function(){if(t.D)throw new T("app-deleted")}))}function Rh(t){return B(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Vh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Wr(t,e,n)}function jh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Wr(t,"metadata",function(t){return new gh(t.a,t.b)}(e.metadata)):Wr(t,"metadata",new gh),q(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Wr(t,"refreshToken",t.b.a),fh(t.O,e.O.b))}function Uh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ra,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Vh(t,"isAnonymous",!1),e}))}))}function Fh(t,e){e[Js]&&t.za!=e[Js]&&(yh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),kh(t,e[Js]),Vh(t,"refreshToken",t.b.a))}function $h(t,e){return Uh(t).then((function(){if(H(Rh(t),e))return Oh(t).then((function(){throw new T("provider-already-linked")}))}))}function qh(t,e,n){return Qr({user:t,credential:jo(e),additionalUserInfo:e=Wi(e),operationType:n})}function Gh(t,e){return Fh(t,e),t.reload().then((function(){return t}))}function Bh(t,e,n,r,i){if(!xr())return Oe(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return Oe(t.h);var o=Yi(n.providerId),s=jr(t.uid+":::"),a=null;(!Rr()||br())&&t.s&&n.isOAuthProvider&&(a=gu(t.s,t.l,t.m,e,n,null,s,Wt.SDK_VERSION||null,null,null,t.tenantId));var u=dr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return jc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=$c(t.i,t,e,u,s)}))})).then((function(t){return u&&pr(u),t?Qr(t):null})).o((function(t){throw u&&pr(u),t})),Kh(t,r,i)}function zh(t,e,n,r,i){if(!xr())return Oe(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return Oe(t.h);var o=null,s=jr(t.uid+":::");return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Oh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Fc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Qh(t.ha);throw o})).then((function(){if(o)throw o})),Kh(t,r,i)}function Hh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Kh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Oe(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ch("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){K(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Ah(t),b(t.jc,t))),n||e}))}function Yh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new wh(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&Lh(i,Qr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[nh],delete n[rh],vt(n,t),e.g(n)}))},E(ih,T),sh.prototype.sb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Pa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Ca,n)}))}(this,t,e)},E(ah,sh),E(uh,ah),E(ch,We),(t=hh.prototype).yc=function(t){fh(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Fh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=G(e.b,(function(t){return t.uid!=n}));return fh(e,r),Fh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,ph(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?mh(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},gh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(wh,wn),wh.prototype.wa=function(t){this.ya=t,ra(this.a,t)},wh.prototype.la=function(){return this.ya},wh.prototype.Ga=function(){return X(this.$)},wh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Wr(wh.prototype,"providerId","firebase"),(t=wh.prototype).reload=function(){var t=this;return Kh(this,Ch(this).then((function(){return Uh(t).then((function(){return Oh(t)})).then(Ph)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return Kh(this,Ch(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.za&&(kh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Vh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");xh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?B(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Vh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Kh(this,t.c(this.a,this.uid).then((function(t){return Fh(e,t),n=qh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Kh(this,$h(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=qh(e,t,"link"),Gh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Kh(this,$h(this,"phone").then((function(){return Zc(Ah(n),t,e,b(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Kh(this,ke().then((function(){return Zc(Ah(n),t,e,b(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Kh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Fh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Kh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Fh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Kh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Fh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ch(this);var e=this;return Kh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Fh(e,t),Vh(e,"displayName",t.displayName||null),Vh(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Wr(t,"displayName",e.displayName),Wr(t,"photoURL",e.photoURL))})),Oh(e)})).then(Ph))},t.cd=function(t){var e=this;return Kh(this,Uh(this).then((function(n){return H(Rh(e),t)?function(t,e,n){return ru(t,Oa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(Rh(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||Wr(e,"phoneNumber",null),Oh(e)})):Oh(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Kh(this,this.I().then((function(e){return ru(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Ih(t,null),Eh(t,null),Th(t,null),t.J=[],t.D=!0,Sh(t),Wr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return Bh(this,"linkViaPopup",t,(function(){return $h(e,t.providerId).then((function(){return Oh(e)}))}),!1)},t.Nc=function(t){return Bh(this,"reauthViaPopup",t,(function(){return ke()}),!0)},t.Fc=function(t){var e=this;return zh(this,"linkViaRedirect",t,(function(){return $h(e,t.providerId)}),!1)},t.Oc=function(t){return zh(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kh(this,this.I().then((function(n){return Ia(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=qh(i,t,"link"),Gh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kh(this,ke().then((function(){return co(Ea(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=qh(i,t,"reauthenticate"),Fh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Kh(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Ui(new Oi(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Kh(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:Ui(new Oi(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Kh(this,t=co(ke(t),n.uid).then((function(t){return e=qh(n,t,"reauthenticate"),Fh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Qh(t){return ic(t.b,Xh,t.a)}function Jh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=ef("local"),n=ef("session"),r=ef("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Vr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tf,t.a).then((function(t){return t?ef(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(ef("local"),this.a,b(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,ef(Zu[n]),t.a));return r.push(ic(t.b,tf,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)De(t[a],w(o,a),s);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=ef("local");sf(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tf={name:"persistence",F:"session"};function ef(t){return{name:"authUser",F:t}}function nf(t,e){return sf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rf(t){return sf(t,(function(){return ic(t.b,t.c,t.a)}))}function of(t,e,n){return sf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Yh(t||{})}))}))}function sf(t,e){return t.f=t.f.then(e,e),t.f}function af(t){if(this.l=!1,Wr(this,"settings",new Qc),Wr(this,"app",t),!yf(this).options||!yf(this).options.apiKey)throw new T("invalid-api-key");t=Wt.SDK_VERSION?Sr(Wt.SDK_VERSION):null,this.a=new Xs(yf(this).options&&yf(this).options.apiKey,D(N),t),this.R=[],this.s=[],this.O=[],this.hb=Wt.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=Wt.INTERNAL.createSubscribe(b(this.Ac,this)),df(this,null),this.i=new Jh(yf(this).options.apiKey+":"+yf(this).name),this.D=new Wh(yf(this).options.apiKey+":"+yf(this).name),this.$=wf(this,function(t){var e=yf(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yh(t||{})}))}(t.D,yf(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Qh(t.D)}));return wf(t,e)}(t).then((function(){return of(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rf(t.i)}))):null})).then((function(e){df(t,e||null)}));return wf(t,n)}(this)),this.h=wf(this,function(t){return t.$.then((function(){return lf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(ef("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=yf(t).options.authDomain,n=yf(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Bc(e,n,yf(t).name,t.P),Rc(t.b,t),mf(t)&&Dh(mf(t)),t.m){Dh(t.m);var r=t.m;r.wa(t.la()),Ih(r,t),_h(r=t.m,t.J),Th(r,t),ia((r=t.m).a,t.P),Eh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=jn(this.P.url);t=Qr({protocol:t.c,host:t.a,port:t.g,options:Qr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function uf(t){We.call(this,"languageCodeChanged"),this.h=t}function cf(t){We.call(this,"emulatorConfigChanged"),this.c=t}function hf(t){We.call(this,"frameworkChanged"),this.f=t}function ff(t){return t.Oa||Oe(new T("auth-domain-config-required"))}function lf(t){if(!xr())return Oe(new T("operation-not-supported-in-this-environment"));var e=ff(t).then((function(){return t.b.qa()})).then((function(t){return t?Qr(t):null}));return wf(t,e)}function pf(t,e){var n={};return n.apiKey=yf(t).options.apiKey,n.authDomain=yf(t).options.authDomain,n.appName=yf(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new wh(t,e);return n&&(i.ha=n),r&&_h(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return mf(t)&&e.uid==mf(t).uid?(jh(mf(t),e),t.da(e)):(df(t,e),Dh(e),t.da(e))})).then((function(){bf(t)}))}function df(t,e){mf(t)&&(function(t,e){Y(t.S,(function(t){return t==e}))}(mf(t),t.Ba),fn(mf(t),"tokenChanged",t.ya),fn(mf(t),"userDeleted",t.za),fn(mf(t),"userInvalidated",t.Aa),Sh(mf(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&Nh(e)),Wr(t,"currentUser",e),e&&(e.wa(t.la()),Ih(e,t),_h(e,t.J),Th(e,t),ia(e.a,t.P),Eh(e,t))}function vf(t,e){var n=null,r=null;return wf(t,e.then((function(e){return n=jo(e),r=Wi(e),pf(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Qr({user:mf(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function yf(t){return t.app}function mf(t){return t.currentUser}function gf(t){return mf(t)&&mf(t)._lat||null}function bf(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](gf(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](gf(t))}}function wf(t,e){return t.R.push(e),e.oa((function(){K(t.R,e)})),e}function If(){}function Ef(){this.a={},this.b=1e12}Jh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ir()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pu()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),sf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=ef(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},E(af,wn),E(uf,We),E(cf,We),E(hf,We),(t=af.prototype).xb=function(t){return wf(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new uf(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&mr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ia(this.a,this.P),this.dispatchEvent(new cf(this.P))}},t.Gc=function(t){this.J.push(t),sa(this.a,Wt.SDK_VERSION?Sr(Wt.SDK_VERSION,this.J):null),this.dispatchEvent(new hf(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:yf(this).options.apiKey,authDomain:yf(this).options.authDomain,appName:yf(this).name,currentUser:mf(this)&&mf(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vf(i,wa(i.a,o))}))},t.Xc=function(t){if(!xr())return Oe(new T("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=jr(),i=null;(!Rr()||br())&&yf(this).options.authDomain&&t.isOAuthProvider&&(i=gu(yf(this).options.authDomain,yf(this).options.apiKey,yf(this).name,"signInViaPopup",t,null,r,Wt.SDK_VERSION||null,null,null,this.T(),this.P));var o=dr(i,n&&n.ua,n&&n.ta);return wf(this,n=ff(this).then((function(n){return jc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=$c(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Qr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!xr())return Oe(new T("operation-not-supported-in-this-environment"));var e=this;return wf(this,ff(this).then((function(){return function(t){return sf(t,(function(){return t.b.set(tf,t.c.F,t.a)}))}(e.i)})).then((function(){return Fc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return lf(this).then((function(e){return t.b&&Kc(t.b.b),e})).o((function(e){throw t.b&&Kc(t.b.b),e}))},t.dd=function(t){if(!t)return Oe(new T("null-user"));if(this.S!=t.tenantId)return Oe(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=yf(this).options.apiKey,n.authDomain=yf(this).options.authDomain,n.appName=yf(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_h(e,r),jh(e,t),e}(t,n,e.D,e.Ga());return wf(this,this.h.then((function(){if(yf(e).options.apiKey!=t.l)return r.reload()})).then((function(){return mf(e)&&t.uid==mf(e).uid?(jh(mf(e),t),e.da(t)):(df(e,r),Dh(r),e.da(r))})).then((function(){bf(e)})))},t.Ab=function(){var t=this;return wf(this,this.h.then((function(){return t.b&&Kc(t.b.b),mf(t)?(df(t,null),rf(t.i).then((function(){bf(t)}))):ke()})))},t.Zc=function(){var t=this;return of(this.i,yf(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=mf(t)&&e){n=mf(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jh(mf(t),e),mf(t).I();(mf(t)||e)&&(df(t,e),e&&(Dh(e),e.ha=t.D),t.b&&Rc(t.b,t),bf(t))}}))},t.da=function(t){return nf(this.i,t)},t.mc=function(){bf(this),this.da(mf(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return vf(e,ke(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(mf(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),wf(t,t.h.then((function(){!t.l&&H(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(gf(t)))})))}(this,(function(){t.next(mf(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(mf(r)):"function"==typeof t.next&&t.next(mf(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(mf(r)):"function"==typeof t.next&&t.next(mf(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return wf(this,this.h.then((function(){return mf(e)?mf(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vf(e,ru(e.a,Qa,{token:t}))})).then((function(t){var n=t.user;return Vh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vf(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vf(n,ru(n.a,Na,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return vf(e,t.ka(e.a))}))},t.Sc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=mf(t);if(e&&e.isAnonymous){var n=Qr({providerId:null,isNewUser:!1});return Qr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vf(t,t.a.zb()).then((function(e){var n=e.user;return Vh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return mf(this)&&mf(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&mf(this)&&Nh(mf(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&mf(this)&&Sh(mf(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),wf(this,this.h.then((function(){e.l||H(e.s,t)&&t(gf(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(ef("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Kc(this.b.b)),Promise.resolve()},t.hc=function(t){return wf(this,function(t,e){return ru(t,Sa,{identifier:e,continueUri:Pr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Po(t)},t.wb=function(t,e){var n=this;return wf(this,ke().then((function(){var t=new Oi(e);if(!t.c)throw new T("argument-error",Pi+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return wf(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return wf(this,this.a.Ra(t).then((function(t){return new si(t)})))},t.jb=function(t){return wf(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return wf(this,ke().then((function(){return void 0===e||lt(e)?{}:Ui(new Oi(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return wf(this,Zc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return wf(this,ke().then((function(){var r=e||cr(),i=xo(t,r);if(!(r=Po(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.$a(i)})))},If.prototype.render=function(){},If.prototype.reset=function(){},If.prototype.getResponse=function(){},If.prototype.execute=function(){};var _f=null;function Tf(t,e){return(e=Af(e))&&t.a[e]||null}function Af(t){return(t=void 0===t?1e12:t)?t.toString():null}function Nf(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Sf(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function kf(){}function Of(){}Ef.prototype.render=function(t,e){return this.a[this.b.toString()]=new Nf(t,e),this.b++},Ef.prototype.reset=function(t){var e=Tf(this,t);t=Af(t),e&&t&&(e.delete(),delete this.a[t])},Ef.prototype.getResponse=function(t){return(t=Tf(this,t))?t.getResponse():null},Ef.prototype.execute=function(t){(t=Tf(this,t))&&t.execute()},Nf.prototype.getResponse=function(){return Sf(this),this.b},Nf.prototype.execute=function(){Sf(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Nf.prototype.delete=function(){Sf(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Wr(kf,"FACTOR_ID","phone"),Of.prototype.g=function(){return _f||(_f=new Ef),ke(_f)},Of.prototype.c=function(){};var Df=null;function xf(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Pf=new mt(It,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Cf=new $r(3e4,6e4);xf.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Cf.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},ke(Gs(At(Pf,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},xf.prototype.c=function(){this.b--};var Rf=null;function Lf(t,e,n,r,i,o,a){if(Wr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Df||(Df=new Of),a=Df):(Rf||(Rf=new xf),a=Rf),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[jf])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Uf],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Mf];this.a[Mf]=function(t){if(Ff(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Or(c,s);"function"==typeof e&&e(t)}};var h=this.a[Vf];this.a[Vf]=function(){if(Ff(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Or(h,s);"function"==typeof t&&t()}}}var Mf="callback",Vf="expired-callback",jf="sitekey",Uf="size";function Ff(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function $f(t,e){return t.h.push(e),e.oa((function(){K(t.h,e)})),e}function qf(t){if(t.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Gf(t,e,n){var r=!1;try{this.b=n||Wt.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Wt.SDK_VERSION?Sr(Wt.SDK_VERSION,o):null,Lf.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,D(N),r)}function Bf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=zf.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=zf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Lf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=$f(this,ke().then((function(){if(Pr()&&!wr())return mr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Fa,{})})).then((function(e){t.a[jf]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){qf(this);var t=this;return $f(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ue&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',qt(s.name),'"'),s.type){o.push(' type="',qt(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ve(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):he(o,s)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){qf(this);var t=this;return $f(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){qf(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){qf(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Gf,Lf);var zf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hf(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kf(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Yf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Wf(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Xf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Qf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jf(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zf(t){return d(t)&&"string"==typeof t.uid}function tl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function el(t,e){for(var n in e){var r=e[n].name;t[r]=il(r,t[n],e[n].j)}}function nl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Bf(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function rl(t,e,n,r){t[e]=il(e,n,r)}function il(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}el(af.prototype,{jb:{name:"applyActionCode",j:[Hf("code")]},Ra:{name:"checkActionCode",j:[Hf("code")]},nb:{name:"confirmPasswordReset",j:[Hf("code"),Hf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Hf("email"),Hf("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Hf("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Hf("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tl(Yf(),Wf(),"nextOrObserver"),Wf("opt_error",!0),Wf("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tl(Yf(),Wf(),"nextOrObserver"),Wf("opt_error",!0),Wf("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Hf("email"),tl(Yf("opt_actionCodeSettings",!0),Xf(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Hf("email"),Yf("actionCodeSettings")]},xb:{name:"setPersistence",j:[Hf("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Qf()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Qf()]},Tc:{name:"signInWithCustomToken",j:[Hf("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Hf("email"),Hf("password")]},Vc:{name:"signInWithEmailLink",j:[Hf("email"),Hf("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Hf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof wh)}},Xf(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hf(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Hf("url"),Yf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Hf("code")]}}),nl(af.prototype,{lc:{name:"languageCode",kb:tl(Hf(),Xf(),"languageCode")},ti:{name:"tenantId",kb:tl(Hf(),Xf(),"tenantId")}}),af.Persistence=Zu,af.Persistence.LOCAL="local",af.Persistence.SESSION="session",af.Persistence.NONE="none",el(wh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Qf()]},qb:{name:"linkWithCredential",j:[Qf()]},Dc:{name:"linkWithPhoneNumber",j:[Hf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Qf()]},tb:{name:"reauthenticateWithCredential",j:[Qf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Hf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[tl(Yf("opt_actionCodeSettings",!0),Xf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hf(null,!0)]},cd:{name:"unlink",j:[Hf("provider")]},Bb:{name:"updateEmail",j:[Hf("email")]},Cb:{name:"updatePassword",j:[Hf("password")]},ed:{name:"updatePhoneNumber",j:[Qf("phone")]},Db:{name:"updateProfile",j:[Yf("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Hf("email"),tl(Yf("opt_actionCodeSettings",!0),Xf(null,!0),"opt_actionCodeSettings",!0)]}}),el(Ef.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),el(If.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),el(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nl(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Kf("appVerificationDisabledForTesting")}}),el(Jc.prototype,{confirm:{name:"confirm",j:[Hf("verificationCode")]}}),rl(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Oo,Ro,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tl(Hf(),Yf(),"json")]),rl(Do,"credential",(function(t,e){return new ko(t,e)}),[Hf("email"),Hf("password")]),el(ko.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),el(wo.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},Ka:{name:"setCustomParameters",j:[Yf("customOAuthParameters")]}}),rl(wo,"credential",Io,[tl(Hf(),Yf(),"token")]),rl(Do,"credentialWithLink",xo,[Hf("email"),Hf("emailLink")]),el(Eo.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},Ka:{name:"setCustomParameters",j:[Yf("customOAuthParameters")]}}),rl(Eo,"credential",_o,[tl(Hf(),Yf(),"token")]),el(To.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},Ka:{name:"setCustomParameters",j:[Yf("customOAuthParameters")]}}),rl(To,"credential",Ao,[tl(Hf(),tl(Yf(),Xf()),"idToken"),tl(Hf(),Xf(),"accessToken",!0)]),el(No.prototype,{Ka:{name:"setCustomParameters",j:[Yf("customOAuthParameters")]}}),rl(No,"credential",So,[tl(Hf(),Yf(),"token"),Hf("secret",!0)]),el(bo.prototype,{Ca:{name:"addScope",j:[Hf("scope")]},credential:{name:"credential",j:[tl(Hf(),tl(Yf(),Xf()),"optionsOrIdToken"),tl(Hf(),Xf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Yf("customOAuthParameters")]}}),el(po.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),el(ho.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),rl(Mo,"credential",Vo,[Hf("verificationId"),Hf("verificationCode")]),el(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[tl(Hf(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jf(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jf(t.session,ao)&&Zf(t.multiFactorHint):t.session&&t.multiFactorUid?Jf(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),el(Co.prototype,{w:{name:"toJSON",j:[Hf(null,!0)]}}),el(T.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(Ho.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(zo.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(ih.prototype,{toJSON:{name:"toJSON",j:[Hf(null,!0)]}}),el(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),el(hh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Hf("displayName",!0)]},bd:{name:"unenroll",j:[tl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zf},Hf(),"multiFactorInfoIdentifier")]}}),el(Gf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rl(wi,"parseLink",ki,[Hf("link")]),rl(kf,"assertion",(function(t){return new uh(t)}),[Qf("phone")]),function(){if(void 0===Wt||!Wt.INTERNAL||!Wt.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:af,AuthCredential:uo,Error:T};rl(t,"EmailAuthProvider",Do,[]),rl(t,"FacebookAuthProvider",wo,[]),rl(t,"GithubAuthProvider",Eo,[]),rl(t,"GoogleAuthProvider",To,[]),rl(t,"TwitterAuthProvider",No,[]),rl(t,"OAuthProvider",bo,[Hf("providerId")]),rl(t,"SAMLAuthProvider",go,[Hf("providerId")]),rl(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof af)}}]),rl(t,"RecaptchaVerifier",Gf,[tl(Hf(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Yf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Wt.app.App)}}]),rl(t,"ActionCodeURL",wi,[]),rl(t,"PhoneMultiFactorGenerator",kf,[]),Wt.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new af(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Wt.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Wt.registerVersion("@firebase/auth","0.16.4"),Wt.INTERNAL.extendNamespace({User:wh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});class gn extends Y{constructor(t){super(),K(this,t,mn,yn,o,{})}}function bn(t){let e,n,r;return n=new gn({}),{c(){e=d("div"),G(n.$$.fragment),g(e,"class","col-start-2 justify-self-center")},m(t,i){f(t,e,i),B(n,e,null),r=!0},i(t){r||(F(n.$$.fragment,t),r=!0)},o(t){$(n.$$.fragment,t),r=!1},d(t){t&&l(e),z(n)}}}function wn(t){let e,n,r;return n=new pn({}),{c(){e=d("div"),G(n.$$.fragment),g(e,"class","col-start-2 max-w-lg justify-self-stretch")},m(t,i){f(t,e,i),B(n,e,null),r=!0},i(t){r||(F(n.$$.fragment,t),r=!0)},o(t){$(n.$$.fragment,t),r=!1},d(t){t&&l(e),z(n)}}}function In(t){let e,n,r,i,o,s;e=new dn({});const a=[wn,bn],u=[];function c(t,e){return t[0]?0:1}return i=c(t),o=u[i]=a[i](t),{c(){G(e.$$.fragment),n=y(),r=d("div"),o.c(),g(r,"class","grid grid-cols-3 m-6")},m(t,o){B(e,t,o),f(t,n,o),f(t,r,o),u[i].m(r,null),s=!0},p(t,[e]){let n=i;i=c(t),i!==n&&(j(),$(u[n],1,1,(()=>{u[n]=null})),U(),o=u[i],o||(o=u[i]=a[i](t),o.c()),F(o,1),o.m(r,null))},i(t){s||(F(e.$$.fragment,t),F(o),s=!0)},o(t){$(e.$$.fragment,t),$(o),s=!1},d(t){z(e,t),t&&l(n),t&&l(r),u[i].d()}}}function En(t,e,n){let r;return s(t,Q,(t=>n(0,r=t))),Wt.initializeApp(Qt),[r]}const _n=new class extends Y{constructor(t){super(),K(this,t,En,In,o,{})}}({target:document.body});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Tn=function(t,e){return(Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function An(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Nn,Sn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},kn=kn||{},On=Sn||self;function Dn(){}function xn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Pn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Cn="closure_uid_"+(1e9*Math.random()>>>0),Rn=0;function Ln(t,e,n){return t.call.apply(t.bind,arguments)}function Mn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Vn(t,e,n){return(Vn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ln:Mn).apply(null,arguments)}function jn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Un(){return Date.now()}function Fn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function $n(){this.j=this.j,this.i=this.i}$n.prototype.j=!1,$n.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Cn)&&t[Cn]||(t[Cn]=++Rn))},$n.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Gn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Bn(t){return Array.prototype.concat.apply([],arguments)}function zn(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Hn(t){return/^[\s\xa0]*$/.test(t)}var Kn,Yn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Wn(t,e){return-1!=t.indexOf(e)}function Xn(t,e){return t<e?-1:t>e?1:0}t:{var Qn=On.navigator;if(Qn){var Jn=Qn.userAgent;if(Jn){Kn=Jn;break t}}Kn=""}function Zn(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function tr(t){var e={};for(var n in t)e[n]=t[n];return e}var er="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nr(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<er.length;o++)n=er[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function rr(t){return rr[" "](t),t}rr[" "]=Dn;var ir,or,sr=Wn(Kn,"Opera"),ar=Wn(Kn,"Trident")||Wn(Kn,"MSIE"),ur=Wn(Kn,"Edge"),cr=ur||ar,hr=Wn(Kn,"Gecko")&&!(Wn(Kn.toLowerCase(),"webkit")&&!Wn(Kn,"Edge"))&&!(Wn(Kn,"Trident")||Wn(Kn,"MSIE"))&&!Wn(Kn,"Edge"),fr=Wn(Kn.toLowerCase(),"webkit")&&!Wn(Kn,"Edge");function lr(){var t=On.document;return t?t.documentMode:void 0}t:{var pr="",dr=(or=Kn,hr?/rv:([^\);]+)(\)|;)/.exec(or):ur?/Edge\/([\d\.]+)/.exec(or):ar?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(or):fr?/WebKit\/(\S+)/.exec(or):sr?/(?:Version)[ \/]?(\S+)/.exec(or):void 0);if(dr&&(pr=dr?dr[1]:""),ar){var vr=lr();if(null!=vr&&vr>parseFloat(pr)){ir=String(vr);break t}}ir=pr}var yr,mr={};function gr(t){return function(t,e){var n=mr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Yn(String(ir)).split("."),r=Yn(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Xn(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Xn(0==s[2].length,0==a[2].length)||Xn(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(On.document&&ar){var br=lr();yr=br||(parseInt(ir,10)||void 0)}else yr=void 0;var wr=yr,Ir=!ar||9<=Number(wr),Er=ar&&!gr("9"),_r=function(){if(!On.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{On.addEventListener("test",Dn,e),On.removeEventListener("test",Dn,e)}catch(t){}return t}();function Tr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ar(t,e){if(Tr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(hr){t:{try{rr(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Nr[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Tr.prototype.b=function(){this.defaultPrevented=!0},Fn(Ar,Tr);var Nr={2:"touch",3:"pen",4:"mouse"};Ar.prototype.b=function(){Ar.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Er)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Sr="closure_listenable_"+(1e6*Math.random()|0),kr=0;function Or(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++kr,this.Y=this.Z=!1}function Dr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function xr(t){this.src=t,this.a={},this.b=0}function Pr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Dr(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Cr(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}xr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Cr(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Or(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Rr="closure_lm_"+(1e6*Math.random()|0),Lr={};function Mr(t,e,n,r,i){if(r&&r.once)return jr(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mr(t,e[o],n,r,i);return null}return n=Hr(n),t&&t[Sr]?t.va(e,n,Pn(r)?!!r.capture:!!r,i):Vr(t,e,n,!1,r,i)}function Vr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Pn(i)?!!i.capture:!!i;if(s&&!Ir)return null;var a=Br(t);if(a||(t[Rr]=a=new xr(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Gr,e=Ir?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)_r||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($r(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function jr(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)jr(t,e[o],n,r,i);return null}return n=Hr(n),t&&t[Sr]?t.wa(e,n,Pn(r)?!!r.capture:!!r,i):Vr(t,e,n,!0,r,i)}function Ur(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ur(t,e[o],n,r,i);else r=Pn(r)?!!r.capture:!!r,n=Hr(n),t&&t[Sr]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Cr(o=t.a[e],n,r,i))&&(Dr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Br(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Cr(e,n,r,i)),(n=-1<t?e[t]:null)&&Fr(n))}function Fr(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Sr])Pr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($r(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Br(e))?(Pr(n,t),0==n.b&&(n.src=null,e[Rr]=null)):Dr(t)}}}function $r(t){return t in Lr?Lr[t]:Lr[t]="on"+t}function qr(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Fr(t),n.call(r,e)}function Gr(t,e){if(t.Y)return!0;if(!Ir){if(!e)t:{e=["window","event"];for(var n=On,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qr(t,e=new Ar(e,this))}return qr(t,new Ar(e,this))}function Br(t){return(t=t[Rr])instanceof xr?t:null}var zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(t){return"function"==typeof t?t:(t[zr]||(t[zr]=function(e){return t.handleEvent(e)}),t[zr])}function Kr(){$n.call(this),this.c=new xr(this),this.J=this,this.C=null}function Yr(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Tr(e,t);else if(e instanceof Tr)e.target=e.target||t;else{var i=e;nr(e=new Tr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Wr(s,r,!0,e)&&i}if(i=Wr(s=e.a=t,r,!0,e)&&i,i=Wr(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Wr(s=e.a=n[o],r,!1,e)&&i}function Wr(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Pr(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Fn(Kr,$n),Kr.prototype[Sr]=!0,(Nn=Kr.prototype).addEventListener=function(t,e,n,r){Mr(this,t,e,n,r)},Nn.removeEventListener=function(t,e,n,r){Ur(this,t,e,n,r)},Nn.G=function(){if(Kr.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Dr(n[r]);delete e.a[t],e.b--}}this.C=null},Nn.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Nn.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Xr=On.JSON.stringify;function Qr(){this.b=this.a=null}var Jr,Zr=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new ei}),(function(t){t.reset()}));function ti(){var t=oi,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ei(){this.next=this.b=this.a=null}function ni(t){On.setTimeout((function(){throw t}),0)}function ri(t,e){Jr||function(){var t=On.Promise.resolve(void 0);Jr=function(){t.then(si)}}(),ii||(Jr(),ii=!0),oi.add(t,e)}Qr.prototype.add=function(t,e){var n=Zr.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ei.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ei.prototype.reset=function(){this.next=this.b=this.a=null};var ii=!1,oi=new Qr;function si(){for(var t;t=ti();){try{t.a.call(t.b)}catch(t){ni(t)}var e=Zr;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ii=!1}function ai(t,e){Kr.call(this),this.b=t||1,this.a=e||On,this.f=Vn(this.Za,this),this.g=Un()}function ui(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ci(t,e,n){if("function"==typeof t)n&&(t=Vn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Vn(t.handleEvent,t)}return 2147483647<Number(e)?-1:On.setTimeout(t,e||0)}function hi(t){t.a=ci((function(){t.a=null,t.c&&(t.c=!1,hi(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Fn(ai,Kr),(Nn=ai.prototype).aa=!1,Nn.M=null,Nn.Za=function(){if(this.aa){var t=Un()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Yr(this,"tick"),this.aa&&(ui(this),this.start()))}},Nn.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Un())},Nn.G=function(){ai.X.G.call(this),ui(this),delete this.a};var fi=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Tn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:hi(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(On.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}($n);function li(t){$n.call(this),this.b=t,this.a={}}Fn(li,$n);var pi=[];function di(t,e,n,r){Array.isArray(n)||(n&&(pi[0]=n.toString()),n=pi);for(var i=0;i<n.length;i++){var o=Mr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function vi(t){Zn(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Fr(t)}),t),t.a={}}function yi(){this.a=!0}function mi(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Xr(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}li.prototype.G=function(){li.X.G.call(this),vi(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yi.prototype.info=function(){};var gi={},bi=null;function wi(){return bi=bi||new Kr}function Ii(t){Tr.call(this,gi.Fa,t)}function Ei(t){var e=wi();Yr(e,new Ii(e,t))}function _i(t,e){Tr.call(this,gi.STAT_EVENT,t),this.stat=e}function Ti(t){var e=wi();Yr(e,new _i(e,t))}function Ai(t){Tr.call(this,gi.Ga,t)}function Ni(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return On.setTimeout((function(){t()}),e)}gi.Fa="serverreachability",Fn(Ii,Tr),gi.STAT_EVENT="statevent",Fn(_i,Tr),gi.Ga="timingevent",Fn(Ai,Tr);var Si={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ki={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Oi(){}function Di(t){var e;return(e=t.a)||(e=t.a={}),e}function xi(){}Oi.prototype.a=null;var Pi,Ci={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ri(){Tr.call(this,"d")}function Li(){Tr.call(this,"c")}function Mi(){}function Vi(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new li(this),this.P=ji,t=cr?125:void 0,this.R=new ai(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Fn(Ri,Tr),Fn(Li,Tr),Fn(Mi,Oi),Pi=new Mi;var ji=45e3,Ui={},Fi={};function $i(t,e,n){t.H=1,t.i=co(ro(e)),t.j=n,t.I=!0,qi(t,null)}function qi(t,e){t.u=Un(),zi(t),t.l=ro(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),_o(n.b,"t",r),t.D=0,t.a=ms(t.g,t.g.C?e:null),0<t.O&&(t.F=new fi(Vn(t.Ca,t,t.a),t.O)),di(t.J,t.a,"readystatechange",t.Xa),e=t.B?tr(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ei(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Gi(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Bi(t,n);if(i==Fi){4==e&&(t.h=4,Ti(14),r=!1),mi(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ui){t.h=4,Ti(15),mi(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}mi(t.c,t.f,i,null),Xi(t,i)}4==e&&0==n.length&&(t.h=1,Ti(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),cs(e),e.F=!0,Ti(11))):(mi(t.c,t.f,n,"[Invalid Chunked Response]"),Wi(t),Yi(t))}function Bi(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Fi:(n=Number(e.substring(n,r)),isNaN(n)?Ui:(r+=1)+n>e.length?Fi:(e=e.substr(r,n),t.D=r+n,e))}function zi(t){t.T=Un()+t.P,Hi(t,t.P)}function Hi(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ni(Vn(t.Va,t),e)}function Ki(t){t.o&&(On.clearTimeout(t.o),t.o=null)}function Yi(t){0==t.g.v||t.A||ls(t.g,t)}function Wi(t){Ki(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ui(t.R),vi(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Xi(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Do(n.b,t)))if(n.I=t.N,!t.C&&Do(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;fs(n),ts(n)}us(n),Ti(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ni(Vn(n.Sa,n),6e3));if(1>=Oo(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else ds(n,11)}else if((t.C||n.a==t)&&fs(n),!Hn(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(Wn(h,"spdy")||Wn(h,"quic")||Wn(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(xo(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,uo(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Un()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=ys(u,u.C?u.ga:null,u.fa),p.C){Po(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ki(d),zi(d)),u.a=p}else as(u);0<n.g.length&&rs(n)}else"stop"!=i[0]&&"close"!=i[0]||ds(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ds(n,7):Zo(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ei(4)}catch(t){}}function Qi(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(xn(t)||"string"==typeof t)Gn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(xn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(xn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ji(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ji)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Zi(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];to(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)to(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function to(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Nn=Vi.prototype).setTimeout=function(t){this.P=t},Nn.Xa=function(t){t=t.target;var e=this.F;e&&3==Wo(t)?e.f():this.Ca(t)},Nn.Ca=function(t){try{if(t==this.a)t:{var e=Wo(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!cr&&!this.a.$())){this.A||4!=e||7==n||Ei(8==n||0>=r?3:2),Ki(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hn(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ti(12),Wi(this),Yi(this);break t}mi(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xi(this,u)}this.I?(Gi(this,e,o),cr&&this.b&&3==e&&(di(this.J,this.R,"tick",this.Wa),this.R.start())):(mi(this.c,this.f,o,null),Xi(this,o)),4==e&&Wi(this),this.b&&!this.A&&(4==e?ls(this.g,this):(this.b=!1,zi(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ti(12)):(this.h=0,Ti(13)),Wi(this),Yi(this)}}}catch(t){}},Nn.Wa=function(){if(this.a){var t=Wo(this.a),e=this.a.$();this.D<e.length&&(Ki(this),Gi(this,t,e),this.b&&4!=t&&zi(this))}},Nn.cancel=function(){this.A=!0,Wi(this)},Nn.Va=function(){this.o=null;var t=Un();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Ei(3),Ti(17)),Wi(this),this.h=2,Yi(this)):Hi(this,this.T-t)},(Nn=Ji.prototype).K=function(){Zi(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Nn.L=function(){return Zi(this),this.a.concat()},Nn.get=function(t,e){return to(this.b,t)?this.b[t]:e},Nn.set=function(t,e){to(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Nn.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var eo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function no(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof no){this.a=void 0!==e?e:t.a,io(this,t.f),this.j=t.j,oo(this,t.c),so(this,t.h),this.g=t.g,e=t.b;var n=new bo;n.c=e.c,e.a&&(n.a=new Ji(e.a),n.b=e.b),ao(this,n),this.i=t.i}else t&&(n=String(t).match(eo))?(this.a=!!e,io(this,n[1]||"",!0),this.j=ho(n[2]||""),oo(this,n[3]||"",!0),so(this,n[4]),this.g=ho(n[5]||"",!0),ao(this,n[6]||"",!0),this.i=ho(n[7]||"")):(this.a=!!e,this.b=new bo(null,this.a))}function ro(t){return new no(t)}function io(t,e,n){t.f=n?ho(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function oo(t,e,n){t.c=n?ho(e,!0):e}function so(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ao(t,e,n){e instanceof bo?(t.b=e,function(t,e){e&&!t.f&&(wo(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Io(this,e),_o(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=fo(e,mo)),t.b=new bo(e,t.a))}function uo(t,e,n){t.b.set(e,n)}function co(t){return uo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Un()).toString(36)),t}function ho(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fo(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,lo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function lo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}no.prototype.toString=function(){var t=[],e=this.f;e&&t.push(fo(e,po,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(fo(e,po,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(fo(n,"/"==n.charAt(0)?yo:vo,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",fo(n,go)),t.join("")};var po=/[#\/\?@]/g,vo=/[#\?:]/g,yo=/[#\?]/g,mo=/[#\?@]/g,go=/#/g;function bo(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function wo(t){t.a||(t.a=new Ji,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Io(t,e){wo(t),e=To(t,e),to(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,to((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Zi(t)))}function Eo(t,e){return wo(t),e=To(t,e),to(t.a.b,e)}function _o(t,e,n){Io(t,e),0<n.length&&(t.c=null,t.a.set(To(t,e),zn(n)),t.b+=n.length)}function To(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Nn=bo.prototype).add=function(t,e){wo(this),this.c=null,t=To(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Nn.forEach=function(t,e){wo(this),this.a.forEach((function(n,r){Gn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Nn.L=function(){wo(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Nn.K=function(t){wo(this);var e=[];if("string"==typeof t)Eo(this,t)&&(e=Bn(e,this.a.get(To(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Bn(e,t[n])}return e},Nn.set=function(t,e){return wo(this),this.c=null,Eo(this,t=To(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Nn.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Nn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ao=function(t,e){this.b=t,this.a=e};function No(t){this.g=t||So,On.PerformanceNavigationTiming?t=0<(t=On.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(On.ia&&On.ia.ya&&On.ia.ya()&&On.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var So=10;function ko(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Oo(t){return t.b?1:t.a?t.a.size:0}function Do(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function xo(t,e){t.a?t.a.add(e):t.b=e}function Po(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Co(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=An(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return zn(t.c)}function Ro(){}function Lo(){this.a=new Ro}function Mo(t,e,n){var r=n||"";try{Qi(t,(function(t,n){var i=t;Pn(t)&&(i=Xr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Vo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}No.prototype.cancel=function(){var t,e;if(this.c=Co(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=An(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ro.prototype.stringify=function(t){return On.JSON.stringify(t,void 0)},Ro.prototype.parse=function(t){return On.JSON.parse(t,void 0)};var jo=On.JSON.parse;function Uo(t){Kr.call(this),this.headers=new Ji,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Fo,this.D=this.F=!1}Fn(Uo,Kr);var Fo="",$o=/^https?$/i,qo=["POST","PUT"];function Go(t){return"content-type"==t.toLowerCase()}function Bo(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,zo(t),Ko(t)}function zo(t){t.u||(t.u=!0,Yr(t,"complete"),Yr(t,"error"))}function Ho(t){if(t.b&&void 0!==kn&&(!t.s[1]||4!=Wo(t)||2!=t.W()))if(t.l&&4==Wo(t))ci(t.za,0,t);else if(Yr(t,"readystatechange"),4==Wo(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(eo)[1]||null;if(!o&&On.self&&On.self.location){var s=On.self.location.protocol;o=s.substr(0,s.length-1)}i=!$o.test(o?o.toLowerCase():"")}e=i}if(e)Yr(t,"complete"),Yr(t,"success");else{t.h=6;try{var a=2<Wo(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",zo(t)}}finally{Ko(t)}}}function Ko(t,e){if(t.a){Yo(t);var n=t.a,r=t.s[0]?Dn:null;t.a=null,t.s=null,e||Yr(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Yo(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(On.clearTimeout(t.m),t.m=null)}function Wo(t){return t.a?t.a.readyState:0}function Xo(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Zn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):uo(t,e,n))}function Qo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jo(t){this.pa=0,this.g=[],this.c=new yi,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Qo("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Qo("baseRetryDelayMs",5e3,t),this.Ra=Qo("retryDelaySeedMs",1e4,t),this.Ma=Qo("forwardChannelMaxRetries",2,t),this.ma=Qo("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new No(t&&t.concurrentRequestLimit),this.ka=new Lo,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Zo(t){if(es(t),3==t.v){var e=t.R++,n=ro(t.B);uo(n,"SID",t.J),uo(n,"RID",e),uo(n,"TYPE","terminate"),os(t,n),(e=new Vi(t,t.c,e,void 0)).H=2,e.i=co(ro(n)),n=!1,On.navigator&&On.navigator.sendBeacon&&(n=On.navigator.sendBeacon(e.i.toString(),"")),!n&&On.Image&&((new Image).src=e.i,n=!0),n||(e.a=ms(e.g,null),e.a.ba(e.i)),e.u=Un(),zi(e)}vs(t)}function ts(t){t.a&&(cs(t),t.a.cancel(),t.a=null)}function es(t){ts(t),t.j&&(On.clearTimeout(t.j),t.j=null),fs(t),t.b.cancel(),t.h&&("number"==typeof t.h&&On.clearTimeout(t.h),t.h=null)}function ns(t,e){t.g.push(new Ao(t.Oa++,e)),3==t.v&&rs(t)}function rs(t){ko(t.b)||t.h||(t.h=!0,ri(t.Ba,t),t.u=0)}function is(t,e){var n;n=e?e.f:t.R++;var r=ro(t.B);uo(r,"SID",t.J),uo(r,"RID",n),uo(r,"AID",t.P),os(t,r),t.i&&t.l&&Xo(r,t.i,t.l),n=new Vi(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ss(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),xo(t.b,n),$i(n,r,e)}function os(t,e){t.f&&Qi({},(function(t,n){uo(e,n,t)}))}function ss(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Vn(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Mo(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function as(t){t.a||t.j||(t.T=1,ri(t.Aa,t),t.o=0)}function us(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Ni(Vn(t.Aa,t),ps(t,t.o)),t.o++,!0)}function cs(t){null!=t.s&&(On.clearTimeout(t.s),t.s=null)}function hs(t){t.a=new Vi(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ro(t.la);uo(e,"RID","rpc"),uo(e,"SID",t.J),uo(e,"CI",t.H?"0":"1"),uo(e,"AID",t.P),os(t,e),uo(e,"TYPE","xmlhttp"),t.i&&t.l&&Xo(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=co(ro(e)),n.j=null,n.I=!0,qi(n,t)}function fs(t){null!=t.m&&(On.clearTimeout(t.m),t.m=null)}function ls(t,e){var n=null;if(t.a==e){fs(t),cs(t),t.a=null;var r=2}else{if(!Do(t.b,e))return;n=e.s,Po(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Un()-e.u;var i=t.u;Yr(r=wi(),new Ai(r,n,e,i)),rs(t)}else as(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Oo(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ni(Vn(t.Ba,t,e),ps(t,t.u)),t.u++,0)))}(t,e)||2==r&&us(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:ds(t,5);break;case 4:ds(t,10);break;case 3:ds(t,6);break;default:ds(t,2)}}function ps(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function ds(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Vn(t.Ya,t);n||(n=new no("//www.google.com/images/cleardot.gif"),On.location&&"http"==On.location.protocol||io(n,"https"),co(n)),function(t,e){var n=new yi;if(On.Image){var r=new Image;r.onload=jn(Vo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=jn(Vo,n,r,"TestLoadImage: error",!1,e),r.onabort=jn(Vo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=jn(Vo,n,r,"TestLoadImage: timeout",!1,e),On.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ti(2);t.v=0,t.f&&t.f.ra(e),vs(t),es(t)}function vs(t){t.v=0,t.I=-1,t.f&&(0==Co(t.b).length&&0==t.g.length||(t.b.c.length=0,zn(t.g),t.g.length=0),t.f.qa())}function ys(t,e,n){var r=function(t){return t instanceof no?ro(t):new no(t,void 0)}(n);if(""!=r.c)e&&oo(r,e+"."+r.c),so(r,r.h);else{var i=On.location;r=function(t,e,n,r){var i=new no(null,void 0);return t&&io(i,t),e&&oo(i,e),n&&so(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Zn(t.V,(function(t,e){uo(r,e,t)})),e=t.A,n=t.na,e&&n&&uo(r,e,n),uo(r,"VER",t.ha),os(t,r),r}function ms(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Uo(t.Na)).F=t.C,e}function gs(){}function bs(){if(ar&&!(10<=Number(wr)))throw Error("Environmental error: no available transport.")}function ws(t,e){Kr.call(this),this.a=new Jo(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Hn(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new _s(this)}function Is(t){Ri.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Es(){Li.call(this),this.status=1}function _s(t){this.a=t}(Nn=Uo.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Di(this.H):Di(Pi),this.a.onreadystatechange=Vn(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Bo(this,t)}t=n||"";var i=new Ji(this.headers);r&&Qi(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Go,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=On.FormData&&t instanceof On.FormData,!(0<=qn(qo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Yo(this),0<this.o&&((this.D=function(t){return ar&&gr(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Vn(this.xa,this)):this.m=ci(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Bo(this,t)}},Nn.xa=function(){void 0!==kn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Yr(this,"timeout"),this.abort(8))},Nn.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Yr(this,"complete"),Yr(this,"abort"),Ko(this))},Nn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ko(this,!0)),Uo.X.G.call(this)},Nn.za=function(){this.j||(this.A||this.l||this.g?Ho(this):this.Ua())},Nn.Ua=function(){Ho(this)},Nn.W=function(){try{return 2<Wo(this)?this.a.status:-1}catch(t){return-1}},Nn.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Nn.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),jo(e)}},Nn.ua=function(){return this.h},Nn.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Nn=Jo.prototype).ha=8,Nn.v=1,Nn.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Vi(this,this.c,t,void 0),r=this.l;if(this.O&&(r?nr(r=tr(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ss(this,n,e),uo(i=ro(this.B),"RID",t),uo(i,"CVER",22),this.A&&uo(i,"X-HTTP-Session-Id",this.A),os(this,i),this.i&&r&&Xo(i,this.i,r),xo(this.b,n),this.Ia&&uo(i,"TYPE","init"),this.da?(uo(i,"$req",e),uo(i,"SID","null"),n.U=!0,$i(n,i,null)):$i(n,i,e),this.v=2}}else 3==this.v&&(t?is(this,t):0==this.g.length||ko(this.b)||is(this))},Nn.Aa=function(){if(this.j=null,hs(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ni(Vn(this.Ta,this),t)}},Nn.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ti(10),ts(this),hs(this))},Nn.Sa=function(){null!=this.m&&(this.m=null,ts(this),us(this),Ti(19))},Nn.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ti(2)):(this.c.info("Failed to ping google.com"),Ti(1))},(Nn=gs.prototype).ta=function(){},Nn.sa=function(){},Nn.ra=function(){},Nn.qa=function(){},Nn.Ja=function(){},bs.prototype.a=function(t,e){return new ws(t,e)},Fn(ws,Kr),ws.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ti(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ys(t,null,t.fa),rs(t)},ws.prototype.close=function(){Zo(this.a)},ws.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,ns(this.a,e)}else this.l?((e={}).__data__=Xr(t),ns(this.a,e)):ns(this.a,t)},ws.prototype.G=function(){this.a.f=null,delete this.f,Zo(this.a),delete this.a,ws.X.G.call(this)},Fn(Is,Ri),Fn(Es,Li),Fn(_s,gs),_s.prototype.ta=function(){Yr(this.a,"a")},_s.prototype.sa=function(t){Yr(this.a,new Is(t))},_s.prototype.ra=function(t){Yr(this.a,new Es(t))},_s.prototype.qa=function(){Yr(this.a,"b")},bs.prototype.createWebChannel=bs.prototype.a,ws.prototype.send=ws.prototype.h,ws.prototype.open=ws.prototype.g,ws.prototype.close=ws.prototype.close,Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,ki.COMPLETE="complete",xi.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",Kr.prototype.listen=Kr.prototype.va,Uo.prototype.listenOnce=Uo.prototype.wa,Uo.prototype.getLastError=Uo.prototype.Qa,Uo.prototype.getLastErrorCode=Uo.prototype.ua,Uo.prototype.getStatus=Uo.prototype.W,Uo.prototype.getResponseJson=Uo.prototype.Pa,Uo.prototype.getResponseText=Uo.prototype.$,Uo.prototype.send=Uo.prototype.ba;var Ts=Si,As=ki,Ns=gi,Ss=10,ks=11,Os=xi,Ds=Uo,xs=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Ps=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Cs=new Rt("@firebase/firestore");function Rs(){return Cs.logLevel}function Ls(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cs.logLevel<=St.DEBUG){var r=e.map(js);Cs.debug.apply(Cs,ut(["Firestore (8.3.0): "+t],r))}}function Ms(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cs.logLevel<=St.ERROR){var r=e.map(js);Cs.error.apply(Cs,ut(["Firestore (8.3.0): "+t],r))}}function Vs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cs.logLevel<=St.WARN){var r=e.map(js);Cs.warn.apply(Cs,ut(["Firestore (8.3.0): "+t],r))}}function js(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Us(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.0) INTERNAL ASSERTION FAILED: "+t;throw Ms(e),new Error(e)}function Fs(t,e){t||Us()}function $s(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gs=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=qs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Bs(t,e){return t<e?-1:t>e?1:0}function zs(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Hs(t){return t+"\0"}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ks=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Bs(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Ks.T=new Ks("");var Ys={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ws=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return rt(e,t),e}(Error),Xs=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Ks.fromBase64String(e))}catch(e){throw new Ws(Ys.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ks.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Qs=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Qs.UNAUTHENTICATED=new Qs(null),Qs.R=new Qs("google-credentials-uid"),Qs.P=new Qs("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Js=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Zs=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Qs.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),ta=function(){function t(t){var e=this;this.D=null,this.currentUser=Qs.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(Ls("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Fs("string"==typeof n.accessToken),new Js(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Fs(null===t||"string"==typeof t),new Qs(t)},t}(),ea=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Qs.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),na=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new ea(this.F,this.O))},t.prototype.v=function(t){t(Qs.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),ra=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();ra.q=-1;var ia=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ws(Ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ws(Ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ws(Ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ws(Ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Bs(this.nanoseconds,t.nanoseconds):Bs(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),oa=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new ia(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),sa=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Us(),void 0===n?n=t.length-e:n>t.length-e&&Us(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(sa),ua=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return ua.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ws(Ys.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ws(Ys.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ws(Ys.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(sa),ha=function(){function t(t){this.path=t}return t._t=function(e){return new t(aa.ot(e))},t.ft=function(e){return new t(aa.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===aa.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return aa.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new aa(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fa(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pa(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var da=function(){function t(t){this.fields=t,t.sort(ca.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return zs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),va=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ya(t){if(Fs(!!t),"string"==typeof t){var e=0,n=va.exec(t);if(Fs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ma(t.seconds),nanos:ma(t.nanos)}}function ma(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ga(t){return"string"==typeof t?Ks.fromBase64String(t):Ks.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ba(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wa(t){var e=t.mapValue.fields.__previous_value__;return ba(e)?wa(e):e}function Ia(t){var e=ya(t.mapValue.fields.__local_write_time__.timestampValue);return new ia(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ea(t){return null==t}function _a(t){return 0===t&&1/t==-1/0}function Ta(t){return"number"==typeof t&&Number.isInteger(t)&&!_a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ba(t)?4:10:Us()}function Na(t,e){var n=Aa(t);if(n!==Aa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ia(t).isEqual(Ia(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ya(t.timestampValue),r=ya(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ga(t.bytesValue).isEqual(ga(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ma(t.geoPointValue.latitude)===ma(e.geoPointValue.latitude)&&ma(t.geoPointValue.longitude)===ma(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ma(t.integerValue)===ma(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ma(t.doubleValue),r=ma(e.doubleValue);return n===r?_a(n)===_a(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zs(t.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(fa(n)!==fa(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Na(n[i],r[i])))return!1;return!0}(t,e);default:return Us()}}function Sa(t,e){return void 0!==(t.values||[]).find((function(t){return Na(t,e)}))}function ka(t,e){var n=Aa(t),r=Aa(e);if(n!==r)return Bs(n,r);switch(n){case 0:return 0;case 1:return Bs(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ma(t.integerValue||t.doubleValue),r=ma(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Oa(t.timestampValue,e.timestampValue);case 4:return Oa(Ia(t),Ia(e));case 5:return Bs(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ga(t),r=ga(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Bs(n[i],r[i]);if(0!==o)return o}return Bs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Bs(ma(t.latitude),ma(e.latitude));return 0!==n?n:Bs(ma(t.longitude),ma(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ka(n[i],r[i]);if(o)return o}return Bs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Bs(r[s],o[s]);if(0!==a)return a;var u=ka(n[r[s]],i[o[s]]);if(0!==u)return u}return Bs(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Us()}}function Oa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Bs(t,e);var n=ya(t),r=ya(e),i=Bs(n.seconds,r.seconds);return 0!==i?i:Bs(n.nanos,r.nanos)}function Da(t){return xa(t)}function xa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ya(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ga(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ha.ft(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=xa(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+xa(t.fields[o])}return e+"}"}(t.mapValue):Us();var e,n}function Pa(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Ca(t){return!!t&&"integerValue"in t}function Ra(t){return!!t&&"arrayValue"in t}function La(t){return!!t&&"nullValue"in t}function Ma(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Va(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ja=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Va(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Na(this.proto,t.proto)},t}(),Ua=function(){function t(t){void 0===t&&(t=ja.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Aa(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(ca.ct(),this.At);return null!=t?new ja(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Va(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Fa(t){var e=[];return la(t.fields||{},(function(t,n){var r=new ca([t]);if(Va(n)){var i=Fa(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new da(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var $a=function(t,e){this.key=t,this.version=e},qa=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return rt(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}($a),Ga=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return rt(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}($a),Ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}($a),za=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Ha(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new za(t,e,n,r,i,o,s)}function Ka(t){var e=$s(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+Da(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),Ea(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=su(e.startAt)),e.endAt&&(n+="|ub:",n+=su(e.endAt)),e.vt=n}return e.vt}function Ya(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!uu(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Na(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hu(t.startAt,e.startAt)&&hu(t.endAt,e.endAt)}function Wa(t){return ha.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Xa=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return rt(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Qa(t,n,r):"array-contains"===n?new eu(t,r):"in"===n?new nu(t,r):"not-in"===n?new ru(t,r):"array-contains-any"===n?new iu(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Ja(t,n):new Za(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(ka(e,this.value)):null!==e&&Aa(this.value)===Aa(e)&&this.Dt(ka(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Us()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Qa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ha.ft(r.referenceValue),i}return rt(e,t),e.prototype.matches=function(t){var e=ha.H(t.key,this.key);return this.Dt(e)},e}(Xa),Ja=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=tu("in",n),r}return rt(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xa),Za=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=tu("not-in",n),r}return rt(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xa);function tu(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ha.ft(t.referenceValue)}))}var eu=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return rt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ra(e)&&Sa(e.arrayValue,this.value)},e}(Xa),nu=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return rt(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Sa(this.value.arrayValue,e)},e}(Xa),ru=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return rt(e,t),e.prototype.matches=function(t){if(Sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Sa(this.value.arrayValue,e)},e}(Xa),iu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return rt(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ra(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Sa(e.value.arrayValue,t)}))},e}(Xa),ou=function(t,e){this.position=t,this.before=e};function su(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Da(t)})).join(",")}var au=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function uu(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function cu(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?ha.H(ha.ft(s.referenceValue),n.key):ka(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Na(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fu=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function lu(t,e,n,r,i,o,s,a){return new fu(t,e,n,r,i,o,s,a)}function pu(t){return new fu(t)}function du(t){return!Ea(t.limit)&&"F"===t.limitType}function vu(t){return!Ea(t.limit)&&"L"===t.limitType}function yu(t){return t.xt.length>0?t.xt[0].field:null}function mu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function gu(t){return null!==t.collectionGroup}function bu(t){var e=$s(t);if(null===e.Nt){e.Nt=[];var n=mu(e),r=yu(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new au(n)),e.Nt.push(new au(ca.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new au(ca.ht(),u))}}}return e.Nt}function wu(t){var e=$s(t);if(!e.$t)if("F"===e.limitType)e.$t=Ha(e.path,e.collectionGroup,bu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=bu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new au(o.field,s))}var a=e.endAt?new ou(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ou(e.startAt.position,!e.startAt.before):null;e.$t=Ha(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function Iu(t,e,n){return new fu(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eu(t,e){return Ya(wu(t),wu(e))&&t.limitType===e.limitType}function _u(t){return Ka(wu(t))+"|lt:"+t.limitType}function Tu(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+Da(e.value);var e})).join(", ")+"]"),Ea(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+su(t.startAt)),t.endAt&&(e+=", endAt: "+su(t.endAt)),"Target("+e+")"}(wu(t))+"; limitType="+t.limitType+")"}function Au(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):ha.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!cu(t.startAt,bu(t),e)||t.endAt&&cu(t.endAt,bu(t),e))}(t,e)}function Nu(t){return function(e,n){for(var r=!1,i=0,o=bu(t);i<o.length;i++){var s=o[i],a=Su(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Su(t,e,n){var r=t.field.ut()?ha.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ka(r,i):Us()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Us()}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ku=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=oa.min()),void 0===o&&(o=oa.min()),void 0===s&&(s=Ks.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ou(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_a(e)?"-0":e}}function Du(t){return{integerValue:""+t}}function xu(t,e){return Ta(e)?Du(e):Ou(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pu=function(){this.qt=void 0};function Cu(t,e,n){return t instanceof Mu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Vu?ju(t,e):t instanceof Uu?Fu(t,e):function(t,e){var n=Lu(t,e),r=qu(n)+qu(t.Ut);return Ca(n)&&Ca(t.Ut)?Du(r):Ou(t.Qt,r)}(t,e)}function Ru(t,e,n){return t instanceof Vu?ju(t,e):t instanceof Uu?Fu(t,e):n}function Lu(t,e){return t instanceof $u?Ca(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e}(Pu),Vu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return rt(e,t),e}(Pu);function ju(t,e){for(var n=Gu(e),r=function(t){n.some((function(e){return Na(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Uu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return rt(e,t),e}(Pu);function Fu(t,e){for(var n=Gu(e),r=function(t){n=n.filter((function(e){return!Na(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var $u=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return rt(e,t),e}(Pu);function qu(t){return ma(t.integerValue||t.doubleValue)}function Gu(t){return Ra(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bu=function(t,e){this.field=t,this.transform=e},zu=function(t,e){this.version=t,this.transformResults=e},Hu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ku(t,e){return void 0!==t.updateTime?e instanceof qa&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof qa}var Yu=function(){};function Wu(t,e,n){return t instanceof tc?function(t,e,n){var r=t.value,i=rc(t.fieldTransforms,e,n.transformResults);return r=oc(t.fieldTransforms,r,i),new qa(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ec?function(t,e,n){if(!Ku(t.jt,e))return new Ba(t.key,n.version);var r=nc(t,e,rc(t.fieldTransforms,e,n.transformResults));return new qa(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ga(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Xu(t,e,n){return t instanceof tc?function(t,e,n){if(!Ku(t.jt,e))return e;var r=t.value,i=ic(t.fieldTransforms,n,e);r=oc(t.fieldTransforms,r,i);var o=Zu(e);return new qa(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof ec?function(t,e,n){if(!Ku(t.jt,e))return e;var r=Zu(e),i=nc(t,e,ic(t.fieldTransforms,n,e));return new qa(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Ku(t.jt,e)?new Ga(t.key,oa.min()):e}(t,e)}function Qu(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof qa?e.field(o.field):void 0,a=Lu(o.transform,s||null);null!=a&&(n=null==n?(new Ua).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Ju(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&zs(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Vu&&e instanceof Vu||t instanceof Uu&&e instanceof Uu?zs(t.elements,e.elements,Na):t instanceof $u&&e instanceof $u?Na(t.Ut,e.Ut):t instanceof Mu&&e instanceof Mu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Zu(t){return t instanceof qa?t.version:oa.min()}var tc=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return rt(e,t),e}(Yu),ec=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return rt(e,t),e}(Yu);function nc(t,e,n){var r;return r=function(t,e){var n=new Ua(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof qa?e.data():ja.empty()),oc(t.fieldTransforms,r,n)}function rc(t,e,n){var r=[];Fs(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof qa&&(a=e.field(o.field)),r.push(Ru(s,a,n[i]))}return r}function ic(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof qa&&(u=n.field(s.field)),r.push(Cu(a,u,e))}return r}function oc(t,e,n){for(var r=new Ua(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var sc,ac,uc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return rt(e,t),e}(Yu),cc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return rt(e,t),e}(Yu),hc=function(t){this.count=t};function fc(t){switch(t){case Ys.OK:return Us();case Ys.CANCELLED:case Ys.UNKNOWN:case Ys.DEADLINE_EXCEEDED:case Ys.RESOURCE_EXHAUSTED:case Ys.INTERNAL:case Ys.UNAVAILABLE:case Ys.UNAUTHENTICATED:return!1;case Ys.INVALID_ARGUMENT:case Ys.NOT_FOUND:case Ys.ALREADY_EXISTS:case Ys.PERMISSION_DENIED:case Ys.FAILED_PRECONDITION:case Ys.ABORTED:case Ys.OUT_OF_RANGE:case Ys.UNIMPLEMENTED:case Ys.DATA_LOSS:return!0;default:return Us()}}function lc(t){if(void 0===t)return Ms("GRPC error has no .code"),Ys.UNKNOWN;switch(t){case sc.OK:return Ys.OK;case sc.CANCELLED:return Ys.CANCELLED;case sc.UNKNOWN:return Ys.UNKNOWN;case sc.DEADLINE_EXCEEDED:return Ys.DEADLINE_EXCEEDED;case sc.RESOURCE_EXHAUSTED:return Ys.RESOURCE_EXHAUSTED;case sc.INTERNAL:return Ys.INTERNAL;case sc.UNAVAILABLE:return Ys.UNAVAILABLE;case sc.UNAUTHENTICATED:return Ys.UNAUTHENTICATED;case sc.INVALID_ARGUMENT:return Ys.INVALID_ARGUMENT;case sc.NOT_FOUND:return Ys.NOT_FOUND;case sc.ALREADY_EXISTS:return Ys.ALREADY_EXISTS;case sc.PERMISSION_DENIED:return Ys.PERMISSION_DENIED;case sc.FAILED_PRECONDITION:return Ys.FAILED_PRECONDITION;case sc.ABORTED:return Ys.ABORTED;case sc.OUT_OF_RANGE:return Ys.OUT_OF_RANGE;case sc.UNIMPLEMENTED:return Ys.UNIMPLEMENTED;case sc.DATA_LOSS:return Ys.DATA_LOSS;default:return Us()}}(ac=sc||(sc={}))[ac.OK=0]="OK",ac[ac.CANCELLED=1]="CANCELLED",ac[ac.UNKNOWN=2]="UNKNOWN",ac[ac.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ac[ac.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ac[ac.NOT_FOUND=5]="NOT_FOUND",ac[ac.ALREADY_EXISTS=6]="ALREADY_EXISTS",ac[ac.PERMISSION_DENIED=7]="PERMISSION_DENIED",ac[ac.UNAUTHENTICATED=16]="UNAUTHENTICATED",ac[ac.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ac[ac.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ac[ac.ABORTED=10]="ABORTED",ac[ac.OUT_OF_RANGE=11]="OUT_OF_RANGE",ac[ac.UNIMPLEMENTED=12]="UNIMPLEMENTED",ac[ac.INTERNAL=13]="INTERNAL",ac[ac.UNAVAILABLE=14]="UNAVAILABLE",ac[ac.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var pc=function(){function t(t,e){this.H=t,this.root=e||vc.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,vc.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,vc.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new dc(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new dc(this.root,t,this.H,!1)},t.prototype.ne=function(){return new dc(this.root,null,this.H,!0)},t.prototype.se=function(t){return new dc(this.root,t,this.H,!0)},t}(),dc=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),vc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Us();if(this.right.le())throw Us();var t=this.left.Ie();if(t!==this.right.Ie())throw Us();return t+(this.le()?0:1)},t}();vc.EMPTY=null,vc.RED=!0,vc.Ht=!1,vc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Us()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Us()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new vc(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var yc=function(){function t(t){this.H=t,this.data=new pc(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new mc(this.data.te())},t.prototype.ee=function(t){return new mc(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),mc=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),gc=new pc(ha.H);function bc(){return gc}function wc(){return bc()}var Ic=new pc(ha.H);function Ec(){return Ic}var _c=new pc(ha.H);var Tc=new yc(ha.H);function Ac(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Tc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Nc=new yc(Bs);function Sc(){return Nc}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kc=function(){function t(t){this.H=t?function(e,n){return t(e,n)||ha.H(e.key,n.key)}:function(t,e){return ha.H(t.key,e.key)},this.ge=Ec(),this.Ve=new pc(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Oc=function(){function t(){this.be=new pc(ha.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Us():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),Dc=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,kc.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Eu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xc=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Pc.Le(e,n)),new t(oa.min(),r,Sc(),bc(),Ac())},t}(),Pc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Ks.T,n,Ac(),Ac(),Ac())},t}(),Cc=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Rc=function(t,e){this.targetId=t,this.je=e},Lc=function(t,e,n,r){void 0===n&&(n=Ks.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Mc=function(){function t(){this.Ge=0,this.ze=Uc(),this.He=Ks.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Ac(),e=Ac(),n=Ac();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Us()}})),new Pc(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Uc()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),Vc=function(){function t(t){this.un=t,this.hn=new Map,this.ln=bc(),this._n=jc(),this.fn=new yc(Bs)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof qa?this.wn(r,t.We):t.We instanceof Ga&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Us()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Wa(i))if(0===n){var o=new ha(i.path);this.En(e,o,new Ga(o,oa.min()))}else Fs(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Wa(o.target)){var s=new ha(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Ga(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Ac();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new xc(t,n,this.fn,this.ln,r);return this.ln=bc(),this._n=jc(),this.fn=new yc(Bs),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Mc,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new yc(Bs),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||Ls("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Mc),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jc(){return new pc(ha.H)}function Uc(){return new pc(ha.H)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Fc={asc:"ASCENDING",desc:"DESCENDING"},$c={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc=function(t,e){this.t=t,this.Bt=e};function Gc(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bc(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function zc(t,e){return Gc(t,e.j())}function Hc(t){return Fs(!!t),oa.K(function(t){var e=ya(t);return new ia(e.seconds,e.nanos)}(t))}function Kc(t,e){return function(t){return new aa(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Yc(t){var e=aa.ot(t);return Fs(mh(e)),e}function Wc(t,e){return Kc(t.t,e.path)}function Xc(t,e){var n=Yc(e);if(n.get(1)!==t.t.projectId)throw new Ws(Ys.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Ws(Ys.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new ha(th(n))}function Qc(t,e){return Kc(t.t,e)}function Jc(t){var e=Yc(t);return 4===e.length?aa.ct():th(e)}function Zc(t){return new aa(["projects",t.t.projectId,"databases",t.t.database]).rt()}function th(t){return Fs(t.length>4&&"documents"===t.get(4)),t.Y(5)}function eh(t,e,n){return{name:Wc(t,e),fields:n.proto.mapValue.fields}}function nh(t,e){var n;if(e instanceof tc)n={update:eh(t,e.key,e.value)};else if(e instanceof uc)n={delete:Wc(t,e.key)};else if(e instanceof ec)n={update:eh(t,e.key,e.data),updateMask:yh(e.Gt)};else{if(!(e instanceof cc))return Us();n={verify:Wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Mu)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vu)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Uu)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof $u)return{fieldPath:e.field.rt(),increment:n.Ut};throw Us()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:zc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Us()}(t,e.jt)),n}function rh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Hu.updateTime(Hc(t.updateTime)):void 0!==t.exists?Hu.exists(t.exists):Hu.Kt()}(e.currentDocument):Hu.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Fs("REQUEST_TIME"===e.setToServerValue),n=new Mu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Vu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Uu(i)}else"increment"in e?n=new $u(t,e.increment):Us();var o=ca.lt(e.fieldPath);return new Bu(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Xc(t,e.update.name),o=new ja({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new da(e.map((function(t){return ca.lt(t)})))}(e.updateMask);return new ec(i,o,s,n,r)}return new tc(i,o,n,r)}if(e.delete){var a=Xc(t,e.delete);return new uc(a,n)}if(e.verify){var u=Xc(t,e.verify);return new cc(u,n)}return Us()}function ih(t,e){return{documents:[Qc(t,e.path)]}}function oh(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Qc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Qc(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ma(t.value))return{unaryFilter:{field:lh(t.field),op:"IS_NAN"}};if(La(t.value))return{unaryFilter:{field:lh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ma(t.value))return{unaryFilter:{field:lh(t.field),op:"IS_NOT_NAN"}};if(La(t.value))return{unaryFilter:{field:lh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lh(t.field),op:fh(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:lh(t.field),direction:hh(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Ea(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=uh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=uh(e.endAt)),n}function sh(t){var e=Jc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ah(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new au(ph(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Ea(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ch(n.startAt));var h=null;return n.endAt&&(h=ch(n.endAt)),lu(e,i,a,s,u,"F",c,h)}function ah(t){return t?void 0!==t.unaryFilter?[vh(t)]:void 0!==t.fieldFilter?[dh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ah(t)})).reduce((function(t,e){return t.concat(e)})):Us():[]}function uh(t){return{before:t.before,values:t.position}}function ch(t){var e=!!t.before,n=t.values||[];return new ou(n,e)}function hh(t){return Fc[t]}function fh(t){return $c[t]}function lh(t){return{fieldPath:t.rt()}}function ph(t){return ca.lt(t.fieldPath)}function dh(t){return Xa.create(ph(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Us()}}(t.fieldFilter.op),t.fieldFilter.value)}function vh(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ph(t.unaryFilter.field);return Xa.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ph(t.unaryFilter.field);return Xa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ph(t.unaryFilter.field);return Xa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ph(t.unaryFilter.field);return Xa.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Us()}}function yh(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function mh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gh=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},bh=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Us(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),wh=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new gh,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new _h(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=kh(e.target.error);n.Bn.reject(new _h(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new _h(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Ls("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ah(e)},t}(),Ih=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(ft())&&Ms("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ls("SimpleDb","Removing database:",t),Nh(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=ft(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return ot(this,void 0,void 0,(function(){var e,n=this;return st(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ls("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new _h(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ws(Ys.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new _h(t,n))},i.onupgradeneeded=function(t){Ls("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){Ls("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ot(this,void 0,void 0,(function(){var i,o,s,a,u;return st(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return st(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=f.sent(),e=wh.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),bh.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(f.sent(),s),u)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,Ls("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Eh=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Nh(this.Zn.delete())},t}(),_h=function(t){function e(e,n){var r=this;return(r=t.call(this,Ys.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return rt(e,t),e}(Ws);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Th(t){return"IndexedDbTransactionError"===t.name}var Ah=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ls("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ls("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Nh(n)},t.prototype.add=function(t){return Ls("SimpleDb","ADD",this.store.name,t,t),Nh(this.store.add(t))},t.prototype.get=function(t){var e=this;return Nh(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ls("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ls("SimpleDb","DELETE",this.store.name,t),Nh(this.store.delete(t))},t.prototype.count=function(){return Ls("SimpleDb","COUNT",this.store.name),Nh(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){Ls("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new bh((function(n,r){e.onerror=function(t){var e=kh(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new bh((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Eh(i),s=e(i.primaryKey,i.value,o);if(s instanceof bh){var a=s.catch((function(t){return o.done(),bh.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return bh.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Nh(t){return new bh((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=kh(t.target.error);n(e)}}))}var Sh=!1;function kh(t){var e=Ih.Qn(ft());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ws("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sh||(Sh=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oh=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new gh,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Ws(Ys.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Dh(t,e){if(Ms("AsyncQueue",e+": "+t),Th(t))return new Ws(Ys.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ph=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ch(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Lh(e)),e=Rh(t.get(n),e);return Lh(e)}function Rh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Lh(t){return t+""}function Mh(t){var e=t.length;if(Fs(e>=2),2===e)return Fs(""===t.charAt(0)&&""===t.charAt(1)),aa.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Us(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Us()}o=s+2}return new aa(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vh=function(t,e){this.seconds=t,this.nanoseconds=e},jh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};jh.store="owner",jh.key="owner";var Uh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Uh.store="mutationQueues",Uh.keyPath="userId";var Fh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Fh.store="mutations",Fh.keyPath="batchId",Fh.userMutationsIndex="userMutationsIndex",Fh.userMutationsKeyPath=["userId","batchId"];var $h=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ch(e)]},t.key=function(t,e,n){return[t,Ch(e),n]},t}();$h.store="documentMutations",$h.PLACEHOLDER=new $h;var qh=function(t,e){this.path=t,this.readTime=e},Gh=function(t,e){this.path=t,this.version=e},Bh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Bh.store="remoteDocuments",Bh.readTimeIndex="readTimeIndex",Bh.readTimeIndexPath="readTime",Bh.collectionReadTimeIndex="collectionReadTimeIndex",Bh.collectionReadTimeIndexPath=["parentPath","readTime"];var zh=function(t){this.byteSize=t};zh.store="remoteDocumentGlobal",zh.key="remoteDocumentGlobalKey";var Hh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Hh.store="targets",Hh.keyPath="targetId",Hh.queryTargetsIndexName="queryTargetsIndex",Hh.queryTargetsKeyPath=["canonicalId","targetId"];var Kh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Kh.store="targetDocuments",Kh.keyPath=["targetId","path"],Kh.documentTargetsIndex="documentTargetsIndex",Kh.documentTargetsKeyPath=["path","targetId"];var Yh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yh.key="targetGlobalKey",Yh.store="targetGlobal";var Wh=function(t,e){this.collectionId=t,this.parent=e};Wh.store="collectionParents",Wh.keyPath=["collectionId","parent"];var Xh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Xh.store="clientMetadata",Xh.keyPath="clientId";var Qh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Qh.store="bundles",Qh.keyPath="bundleId";var Jh=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Jh.store="namedQueries",Jh.keyPath="name";var Zh=ut(ut([],ut(ut([],ut(ut([],ut(ut([],[Uh.store,Fh.store,$h.store,Bh.store,Hh.store,jh.store,Yh.store,Kh.store]),[Xh.store])),[zh.store])),[Wh.store])),[Qh.store,Jh.store]),tf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return rt(e,t),e}(Ph);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ef(t,e){var n=$s(t);return Ih.zn(n.ps,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nf=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Wu(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Xu(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Xu(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ac())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zs(this.mutations,t.mutations,(function(t,e){return Ju(t,e)}))&&zs(this.baseMutations,t.baseMutations,(function(t,e){return Ju(t,e)}))},t}(),rf=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Fs(e.mutations.length===r.length);for(var i=_c,o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),of=function(t){this.Fs=t};function sf(t,e){if(e.document)return function(t,e,n){var r=Xc(t,e.name),i=Hc(e.updateTime),o=new ja({mapValue:{fields:e.fields}});return new qa(r,i,o,{hasCommittedMutations:!!n})}(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ha.Et(e.noDocument.path),r=ff(e.noDocument.readTime);return new Ga(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ha.Et(e.unknownDocument.path);return r=ff(e.unknownDocument.version),new Ba(i,r)}return Us()}function af(t,e,n){var r=uf(n),i=e.key.path.X().it();if(e instanceof qa){var o=function(t,e){return{name:Wc(t,e.key),fields:e.bt().mapValue.fields,updateTime:Gc(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Bh(null,null,o,s,r,i)}if(e instanceof Ga){var a=e.key.path.it(),u=hf(e.version);return s=e.hasCommittedMutations,new Bh(null,new qh(a,u),null,s,r,i)}if(e instanceof Ba){var c=e.key.path.it(),h=hf(e.version);return new Bh(new Gh(c,h),null,null,!0,r,i)}return Us()}function uf(t){var e=t.j();return[e.seconds,e.nanoseconds]}function cf(t){var e=new ia(t[0],t[1]);return oa.K(e)}function hf(t){var e=t.j();return new Vh(e.seconds,e.nanoseconds)}function ff(t){var e=new ia(t.seconds,t.nanoseconds);return oa.K(e)}function lf(t,e){for(var n=(e.baseMutations||[]).map((function(e){return rh(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return rh(t.Fs,e)})),a=ia.fromMillis(e.localWriteTimeMs);return new nf(e.batchId,a,n,s)}function pf(t){var e,n,r=ff(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ff(t.lastLimboFreeSnapshotVersion):oa.min();return void 0!==t.query.documents?(Fs(1===(n=t.query).documents.length),e=wu(pu(Jc(n.documents[0])))):e=function(t){return wu(sh(t))}(t.query),new ku(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ks.fromBase64String(t.resumeToken))}function df(t,e){var n,r=hf(e.Ot),i=hf(e.lastLimboFreeSnapshotVersion);n=Wa(e.target)?ih(t.Fs,e.target):oh(t.Fs,e.target);var o=e.resumeToken.toBase64();return new Hh(e.targetId,Ka(e.target),r,o,e.sequenceNumber,i,n)}function vf(t){var e=sh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Iu(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yf=function(){function t(){}return t.prototype.Os=function(t,e){return mf(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ff(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return mf(t).put({bundleId:(n=e).id,createTime:hf(Hc(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return gf(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:vf(e.bundledQuery),readTime:ff(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return gf(t).put(function(t){return{name:t.name,readTime:hf(Hc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function mf(t){return ef(t,Qh.store)}function gf(t){return ef(t,Jh.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bf=function(){function t(){this.Bs=new wf}return t.prototype.qs=function(t,e){return this.Bs.add(e),bh.resolve()},t.prototype.Us=function(t,e){return bh.resolve(this.Bs.getEntries(e))},t}(),wf=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new yc(aa.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new yc(aa.H)).it()},t}(),If=function(){function t(){this.Qs=new wf}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:Ch(i)};return Ef(t).put(o)}return bh.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Hs(e),""],!1,!0);return Ef(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Mh(o.parent))}return n}))},t}();function Ef(t){return ef(t,Wh.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var _f={Ks:!1,Ws:0,js:0,Gs:0},Tf=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Af(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){if(t.code!==Ys.FAILED_PRECONDITION||t.message!==xh)throw t;return Ls("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Tf.Xs=10,Tf.Zs=1e3,Tf.ti=new Tf(41943040,Tf.Xs,Tf.Zs),Tf.ei=new Tf(-1,0,0);var Nf=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){la(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return pa(this.ii)},t}(),Sf=function(){function t(){this.ri=new Nf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:oa.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?bh.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kf(t,e,n){var r=t.store(Fh.store),i=t.store($h.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Fs(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=$h.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return bh.Mn(o).next((function(){return c}))}function Of(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Us();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Df=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Fs(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pf(t).hs({index:Fh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=Cf(t),s=Pf(t);return s.add({}).next((function(a){Fs("number"==typeof a);for(var u=new nf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return nh(t.Fs,e)})),i=n.mutations.map((function(e){return nh(t.Fs,e)}));return new Fh(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],f=new yc((function(t,e){return Bs(t.rt(),e.rt())})),l=0,p=r;l<p.length;l++){var d=p[l],v=$h.key(i.userId,d.key.path,a);f=f.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,$h.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),bh.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return Pf(t).get(e).next((function(t){return t?(Fs(t.userId===n.userId),lf(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?bh.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Pf(t).hs({index:Fh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Fs(e.batchId>=r),o=lf(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pf(t).hs({index:Fh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pf(t).rs(Fh.userMutationsIndex,n).next((function(t){return t.map((function(t){return lf(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=$h.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Cf(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Mh(u);if(a===n.userId&&e.path.isEqual(h))return Pf(t).get(c).next((function(t){if(!t)throw Us();Fs(t.userId===n.userId),o.push(lf(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new yc(Bs),i=[];return e.forEach((function(e){var o=$h.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Cf(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Mh(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),bh.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=$h.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new yc(Bs);return Cf(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Mh(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Pf(t).get(e).next((function(t){if(null===t)throw Us();Fs(t.userId===n.userId),r.push(lf(n.Qt,t))})))})),bh.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return kf(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),bh.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return bh.resolve();var r=IDBKeyRange.lowerBound($h.prefixForUser(e.userId)),i=[];return Cf(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Mh(t[1]);i.push(o)}else r.done()})).next((function(){Fs(0===i.length)}))}))},t.prototype.Fi=function(t,e){return xf(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return Rf(t).get(this.userId).next((function(t){return t||new Uh(e.userId,-1,"")}))},t}();function xf(t,e,n){var r=$h.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Cf(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Pf(t){return ef(t,Fh.store)}function Cf(t){return ef(t,$h.store)}function Rf(t){return ef(t,Uh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lf=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Mf=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new Lf(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return oa.K(new ia(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return Vf(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return Fs(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Vf(t).hs((function(s,a){var u=pf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return bh.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return Vf(t).hs((function(t,n){var r=pf(n);e(r)}))},t.prototype.qi=function(t){return jf(t).get(Yh.key).next((function(t){return Fs(null!==t),t}))},t.prototype.Ui=function(t,e){return jf(t).put(Yh.key,e)},t.prototype.Gi=function(t,e){return Vf(t).put(df(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=Ka(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Vf(t).hs({range:r,index:Hh.queryTargetsIndexName},(function(t,n,r){var o=pf(n);Ya(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=Uf(t);return e.forEach((function(e){var s=Ch(e.path);i.push(o.put(new Kh(n,s))),i.push(r.Ti.nr(t,n,e))})),bh.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Uf(t);return bh.forEach(e,(function(e){var o=Ch(e.path);return bh.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=Uf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Uf(t),i=Ac();return r.hs({range:n,us:!0},(function(t,e,n){var r=Mh(t[1]),o=new ha(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=Ch(e.path),r=IDBKeyRange.bound([n],[Hs(n)],!1,!0),i=0;return Uf(t).hs({index:Kh.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return Vf(t).get(e).next((function(t){return t?pf(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vf(t){return ef(t,Hh.store)}function jf(t){return ef(t,Yh.store)}function Uf(t){return ef(t,Kh.store)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ff(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Bs(n,i);return 0===s?Bs(r,o):s}var $f=function(){function t(t){this.cr=t,this.buffer=new yc(Ff),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ff(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),qf=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;Ls("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return ot(e,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Th(e=n.sent())?(Ls("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Af(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Gf=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return bh.resolve(ra.q);var r=new $f(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(Ls("LruGarbageCollector","Garbage collection skipped; disabled"),bh.resolve(_f)):this.pr(t).next((function(r){return r<n.params.zs?(Ls("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),_f):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(Ls("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),Rs()<=St.DEBUG&&Ls("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),bh.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),Bf=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new Gf(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return zf(t,n)},t.prototype.ir=function(t,e,n){return zf(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return zf(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return Rf(t).ls((function(r){return xf(t,r,e).next((function(t){return t&&(n=!0),bh.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),Uf(t).delete([0,Ch(s.path)])}))}));i.push(u)}})).next((function(){return bh.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return zf(t,e)},t.prototype.Dr=function(t,e){var n,r=Uf(t),i=ra.q;return r.hs({index:Kh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==ra.q&&e(new ha(Mh(n)),i),i=a,n=s):i=ra.q})).next((function(){i!==ra.q&&e(new ha(Mh(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function zf(t,e){return Uf(t).put(function(t,e){return new Kh(0,Ch(t.path),e)}(e,t.bs))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Hf=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Wf(t).put(Xf(e),n)},t.prototype.li=function(t,e){var n=Wf(t),r=Xf(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Wf(t).get(Xf(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Wf(t).get(Xf(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:Of(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=wc();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=wc(),i=new pc(ha.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Of(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return bh.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Wf(t).hs({range:r},(function(t,e,r){for(var s=ha.Et(t);o&&ha.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Ec(),o=e.path.length+1,s={};if(n.isEqual(oa.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=uf(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Bh.collectionReadTimeIndex}return Wf(t).hs(s,(function(t,n,s){if(t.length===o){var a=sf(r.Qt,n);e.path.nt(a.key.path)?a instanceof qa&&Au(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new Kf(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Yf(t).get(zh.key).next((function(t){return Fs(!!t),t}))},t.prototype.kr=function(t,e){return Yf(t).put(zh.key,e)},t.prototype.Mr=function(t){if(t){var e=sf(this.Qt,t);return e instanceof Ga&&e.version.isEqual(oa.min())?null:e}return null},t}(),Kf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Nf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return rt(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new yc((function(t,e){return Bs(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=af(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Of(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=af(e.jr.Qt,new Ga(o,oa.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),bh.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(Sf);function Yf(t){return ef(t,zh.store)}function Wf(t){return ef(t,Bh.store)}function Xf(t){return t.path.it()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qf=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Fs(n<r&&n>=0&&r<=11);var o=new wh("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(jh.store)}(t),function(t){t.createObjectStore(Uh.store,{keyPath:Uh.keyPath}),t.createObjectStore(Fh.store,{keyPath:Fh.keyPath,autoIncrement:!0}).createIndex(Fh.userMutationsIndex,Fh.userMutationsKeyPath,{unique:!0}),t.createObjectStore($h.store)}(t),Jf(t),function(t){t.createObjectStore(Bh.store)}(t));var s=bh.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Kh.store),t.deleteObjectStore(Hh.store),t.deleteObjectStore(Yh.store)}(t),Jf(t)),s=s.next((function(){return function(t){var e=t.store(Yh.store),n=new Yh(0,0,oa.min().j(),0);return e.put(Yh.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Fh.store).rs().next((function(n){t.deleteObjectStore(Fh.store),t.createObjectStore(Fh.store,{keyPath:Fh.keyPath,autoIncrement:!0}).createIndex(Fh.userMutationsIndex,Fh.userMutationsKeyPath,{unique:!0});var r=e.store(Fh.store),i=n.map((function(t){return r.put(t)}));return bh.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Xh.store,{keyPath:Xh.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(zh.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Bh.store);e.createIndex(Bh.readTimeIndex,Bh.readTimeIndexPath,{unique:!1}),e.createIndex(Bh.collectionReadTimeIndex,Bh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Qh.store,{keyPath:Qh.keyPath})}(t),function(t){t.createObjectStore(Jh.store,{keyPath:Jh.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(Bh.store).hs((function(t,n){e+=Of(n)})).next((function(){var n=new zh(e);return t.store(zh.store).put(zh.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(Uh.store),r=t.store(Fh.store);return n.rs().next((function(n){return bh.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Fh.userMutationsIndex,i).next((function(r){return bh.forEach(r,(function(r){Fs(r.userId===n.userId);var i=lf(e.Qt,r);return kf(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Kh.store),n=t.store(Bh.store);return t.store(Yh.store).get(Yh.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new aa(n),s=function(t){return[0,Ch(t)]}(o);r.push(e.get(s).next((function(n){return n?bh.resolve():function(n){return e.put(new Kh(0,Ch(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return bh.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Wh.store,{keyPath:Wh.keyPath});var n=e.store(Wh.store),r=new wf,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Ch(i)})}};return e.store(Bh.store).hs({us:!0},(function(t,e){var n=new aa(t);return i(n.X())})).next((function(){return e.store($h.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Mh(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(Hh.store);return n.hs((function(t,r){var i=pf(r),o=df(e.Qt,i);return n.put(o)}))},t}();function Jf(t){t.createObjectStore(Kh.store,{keyPath:Kh.keyPath}).createIndex(Kh.documentTargetsIndex,Kh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Hh.store,{keyPath:Hh.keyPath}).createIndex(Hh.queryTargetsIndexName,Hh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yh.store)}var Zf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tl=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Ws(Ys.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new Bf(this,i),this.ho=n+"main",this.Qt=new of(u),this.lo=new Ih(this.ho,11,new Qf(this.Qt)),this._o=new Mf(this.Ti,this.Qt),this.Ei=new If,this.fo=function(t,e){return new Hf(t,e)}(this.Qt,this.Ei),this.wo=new yf,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&Ms("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ws(Ys.FAILED_PRECONDITION,Zf);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new ra(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return ot(e,void 0,void 0,(function(){return st(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return ot(e,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return ot(e,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return nl(e).put(new Xh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(Th(e))return Ls("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ls("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return el(t).get(jh.key).next((function(t){return bh.resolve(e.Do(t))}))},t.prototype.Co=function(t){return nl(t).delete(this.clientId)},t.prototype.xo=function(){return ot(this,void 0,void 0,(function(){var t,e,n,r,i=this;return st(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ef(t,Xh.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return bh.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?bh.resolve(!0):el(t).get(jh.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Ws(Ys.FAILED_PRECONDITION,Zf);return!1}}return!(!e.networkEnabled||!e.inForeground)||nl(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ls("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return ot(this,void 0,void 0,(function(){var t=this;return st(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[jh.store,Xh.store],(function(e){var n=new tf(e,ra.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return nl(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Df.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Ls("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Zh,(function(o){return i=new tf(o,r.so?r.so.next():ra.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw Ms("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new Ws(Ys.FAILED_PRECONDITION,xh);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return el(t).get(jh.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ws(Ys.FAILED_PRECONDITION,Zf)}))},t.prototype.So=function(t){var e=new jh(this.clientId,this.allowTabSynchronization,Date.now());return el(t).put(jh.key,e)},t.Kn=function(){return Ih.Kn()},t.prototype.vo=function(t){var e=this,n=el(t);return n.get(jh.key).next((function(t){return e.Do(t)?(Ls("IndexedDbPersistence","Releasing primary lease."),n.delete(jh.key)):bh.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ms("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Ls("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ms("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Ms("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function el(t){return ef(t,jh.store)}function nl(t){return ef(t,Xh.store)}function rl(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var il=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=wc();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=bc();return i.forEach((function(t,e){e||(e=new Ga(t,oa.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return ha.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):gu(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new ha(e)).next((function(t){var e=Ec();return t instanceof qa&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Ec();return this.Ei.Us(t,i).next((function(s){return bh.forEach(s,(function(s){var a=function(t,e){return new fu(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=Xu(u,r.get(c),o.vs);r=h instanceof qa?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Au(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Ac(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ec&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof qa&&(c=c.zt(t,e))})),c}))},t}(),ol=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Ac(),i=Ac(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),sl=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(oa.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(du(e)||vu(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(Rs()<=St.DEBUG&&Ls("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Tu(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new yc(Nu(t));return e.forEach((function(e,r){r instanceof qa&&Au(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Rs()<=St.DEBUG&&Ls("QueryEngine","Using full collection scan to execute query:",Tu(e)),this.ac.Kr(t,e,oa.min())},t}(),al=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new pc(Bs),this.dc=new Nf((function(t){return Ka(t)}),Ya),this.wc=oa.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new il(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ul(t,e,n,r){return new al(t,e,n,r)}function cl(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o;return st(this,(function(s){switch(s.label){case 0:return n=$s(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new il(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Ac(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function hl(t,e){var n=$s(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=bh.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);Fs(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function fl(t){var e=$s(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function ll(t,e){var n=$s(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Fs(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=bc();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(function(t,e,n,r,i){var o=Ac();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=bc();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Ga&&s.version.isEqual(oa.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):Ls("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(oa.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return bh.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function pl(t,e){var n=$s(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function dl(t,e){var n=$s(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,bh.resolve(r)):n._o.Bi(t).next((function(i){return r=new ku(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function vl(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o,s;return st(this,(function(a){switch(a.label){case 0:r=$s(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Th(s=a.sent()))throw s;return Ls("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function yl(t,e,n){var r=$s(t),i=oa.min(),o=Ac();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=$s(t),i=r.dc.get(n);return void 0!==i?bh.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,wu(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:oa.min(),n?o:Ac())})).next((function(t){return{documents:t,Rc:o}}))}))}function ml(t,e){var n=$s(t),r=$s(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function gl(t){var e=$s(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=$s(t),i=bc(),o=uf(n),s=Wf(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Bh.readTimeIndex,range:a},(function(t,e){var n=sf(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:cf(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function bl(t){return ot(this,void 0,void 0,(function(){var e;return st(this,(function(n){return[2,(e=$s(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Wf(t),n=oa.min();return e.hs({index:Bh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=cf(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wl=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return bh.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Hc(n.createTime)}),bh.resolve()},t.prototype.Ms=function(t,e){return bh.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:vf(t.bundledQuery),readTime:Hc(t.readTime)}}(e)),bh.resolve()},t}(),Il=function(){function t(){this.vc=new yc(El.Sc),this.Dc=new yc(El.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new El(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new El(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new ha(new aa([])),r=new El(n,t),i=new El(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new ha(new aa([])),n=new El(e,t),r=new El(e,t+1),i=Ac();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new El(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),El=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return ha.H(t.key,e.key)||Bs(t.Mc,e.Mc)},t.Cc=function(t,e){return Bs(t.Mc,e.Mc)||ha.H(t.key,e.key)},t}(),_l=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new yc(El.Sc)}return t.prototype.Ai=function(t){return bh.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new nf(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new El(u.key,i)),this.Ei.qs(t,u.key.path.X())}return bh.resolve(o)},t.prototype.Pi=function(t,e){return bh.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return bh.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return bh.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return bh.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new El(e,0),i=new El(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),bh.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new yc(Bs);return e.forEach((function(t){var e=new El(t,0),i=new El(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),bh.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;ha.wt(i)||(i=i.child(""));var o=new El(new ha(i),0),s=new yc(Bs);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),bh.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;Fs(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return bh.forEach(e.mutations,(function(i){var o=new El(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new El(e,0),r=this.Bc.Re(n);return bh.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,bh.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Tl=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new pc(ha.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return bh.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=wc();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),bh.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Ec(),i=new ha(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof qa&&Au(e,c)&&(r=r.zt(c.key,c))}return bh.resolve(r)},t.prototype.jc=function(t,e){return bh.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Al(this)},t.prototype.Or=function(t){return bh.resolve(this.size)},t}(),Al=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return rt(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),bh.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Sf),Nl=function(){function t(t){this.persistence=t,this.Gc=new Nf((function(t){return Ka(t)}),Ya),this.lastRemoteSnapshotVersion=oa.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Il,this.targetCount=0,this.Jc=Lf.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),bh.resolve()},t.prototype.Qi=function(t){return bh.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return bh.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),bh.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),bh.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new Lf(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,bh.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),bh.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,bh.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),bh.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return bh.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return bh.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),bh.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),bh.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),bh.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return bh.resolve(n)},t.prototype.Fi=function(t,e){return bh.resolve(this.Hc.Fi(e))},t}(),Sl=function(){function t(t,e){var n=this;this.Yc={},this.so=new ra(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Nl(this),this.Ei=new bf,this.fo=function(t,e){return new Tl(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new of(e),this.wo=new wl(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new _l(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;Ls("MemoryPersistence","Starting transaction:",t);var i=new kl(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return bh.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),kl=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return rt(e,t),e}(Ph),Ol=function(){function t(t){this.persistence=t,this.na=new Il,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Us()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),bh.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),bh.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),bh.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return bh.forEach(this.ra,(function(r){var i=ha._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return bh.Ln([function(){return bh.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dl(t,e){return"firestore_clients_"+t+"_"+e}function xl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Pl(t,e){return"firestore_targets_"+t+"_"+e}var Cl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ws(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ms("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ws(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ms("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ll=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sc(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ta(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ms("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ml=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ms("SharedClientState","Failed to parse online state: "+e),null)},t}(),Vl=function(){function t(){this.activeTargetIds=Sc()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),jl=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new pc(Bs),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Dl(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Vl),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ot(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,f=this;return st(this,(function(l){switch(l.label){case 0:return[4,this._a.Uo()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Dl(this.persistenceKey,r)))&&(o=Ll.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",(function(){return f.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Pl(this.persistenceKey,t));if(n){var r=Rl.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Pl(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ls("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ls("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ls("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ls("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Ms("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return ot(e,void 0,void 0,(function(){var t,e,r,i,o,s;return st(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=ra.q;if(null!=t)try{var n=JSON.parse(t);Fs("number"==typeof n),e=n}catch(t){Ms("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ra.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Cl(this.currentUser,t,e,n),i=xl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=xl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=Pl(this.persistenceKey,t),i=new Rl(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Ll.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cl.ca(new Qs(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Rl.ca(r,e)},t.prototype.pa=function(t){return Ml.ca(t)},t.prototype.Ya=function(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Ls("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Sc();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),Ul=function(){function t(){this.iu=new Vl,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Vl,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Fl=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),$l=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){Ls("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){Ls("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ql={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gl=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Bl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return rt(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new Ds;s.listenOnce(As.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Ts.NO_ERROR:var e=s.getResponseJson();Ls("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ts.TIMEOUT:Ls("Connection",'RPC "'+t+'" timed out'),o(new Ws(Ys.DEADLINE_EXCEEDED,"Request time out"));break;case Ts.HTTP_ERROR:var n=s.getStatus();if(Ls("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ys).indexOf(e)>=0?e:Ys.UNKNOWN}(r.status);o(new Ws(a,r.message))}else o(new Ws(Ys.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ws(Ys.UNAVAILABLE,"Connection failed."));break;default:Us()}}finally{Ls("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n,r=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new bs,o=wi(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())||"object"==typeof navigator&&"ReactNative"===navigator.product||ft().indexOf("Electron/")>=0||function(){var t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||ft().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Ls("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,f=new Gl({fu:function(t){h?Ls("Connection","Not sending because WebChannel is closed:",t):(c||(Ls("Connection","Opening WebChannel transport."),u.open(),c=!0),Ls("Connection","WebChannel sending:",t),u.send(t))},du:function(){return u.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(u,Os.EventType.OPEN,(function(){h||Ls("Connection","WebChannel transport opened.")})),l(u,Os.EventType.CLOSE,(function(){h||(h=!0,Ls("Connection","WebChannel transport closed"),f.Ru())})),l(u,Os.EventType.ERROR,(function(t){h||(h=!0,Vs("Connection","WebChannel transport errored:",t),f.Ru(new Ws(Ys.UNAVAILABLE,"The operation could not be completed")))})),l(u,Os.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Fs(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ls("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=sc[t];if(void 0!==e)return lc(e)}(o),a=i.message;void 0===s&&(s=Ys.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Ru(new Ws(s,a)),u.close()}else Ls("Connection","WebChannel received:",n),f.Pu(n)}})),l(o,Ns.STAT_EVENT,(function(t){t.stat===Ss?Ls("Connection","Detected buffering proxy"):t.stat===ks&&Ls("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Au()}),0),f},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);Ls("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return Ls("RestConnection","Received: ",t),t}),(function(e){throw Vs("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.0",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=ql[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zl(){return"undefined"!=typeof window?window:null}function Hl(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kl(t){return new qc(t,!0)}var Yl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&Ls("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Wl=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Yl(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return ot(this,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return ot(this,void 0,void 0,(function(){return st(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return ot(this,void 0,void 0,(function(){return st(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Ys.RESOURCE_EXHAUSTED?(Ms(e.toString()),Ms("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Ys.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Ws(Ys.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return ot(t,void 0,void 0,(function(){return st(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return Ls("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(Ls("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Xl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return rt(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Us()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Fs(void 0===e||"string"==typeof e),Ks.fromBase64String(e||"")):(Fs(void 0===e||e instanceof Uint8Array),Ks.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ys.UNKNOWN:lc(t.code);return new Ws(e,t.message||"")}(a);n=new Lc(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Xc(t,r.document.name),o=Hc(r.document.updateTime);var a=new ja({mapValue:{fields:r.document.fields}}),u=(s=new qa(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Cc(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Xc(t,r.document),o=r.readTime?Hc(r.readTime):oa.min(),a=new Ga(i,o),s=r.removedTargetIds||[],n=new Cc([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Xc(t,r.document),o=r.removedTargetIds||[],n=new Cc([],o,i,null);else{if(!("filter"in e))return Us();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new hc(r),o=h.targetId,n=new Rc(o,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return oa.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?oa.min():e.readTime?Hc(e.readTime):oa.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Zc(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Wa(r)?{documents:ih(t,r)}:{query:oh(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=Bc(t,e.resumeToken):e.Ot._(oa.min())>0&&(n.readTime=Gc(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Us()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Zc(this.Qt),e.removeTarget=t,this.th(e)},e}(Wl),Ql=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return rt(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Fs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Fs(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Hc(t.updateTime):Hc(e);return n.isEqual(oa.min())&&(n=Hc(e)),new zu(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Hc(t.commitTime);return this.listener.dh(n,e)}return Fs(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Zc(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return nh(e.Qt,t)}))};this.th(n)},e}(Wl),Jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return rt(e,t),e.prototype.Ih=function(){if(this.Th)throw new Ws(Ys.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Ys.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Ys.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),Zl=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Ms(e),this.Rh=!1):Ls("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),tp=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return ot(o,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return cp(this)?(Ls("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ot(this,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return(e=$s(t)).Nh.add(4),[4,np(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,ep(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new Zl(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ep(t){return ot(this,void 0,void 0,(function(){var e,n;return st(this,(function(r){switch(r.label){case 0:if(!cp(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function np(t){return ot(this,void 0,void 0,(function(){var e,n;return st(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function rp(t,e){var n=$s(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),up(n)?ap(n):Tp(n).Hu()&&op(n,e))}function ip(t,e){var n=$s(t),r=Tp(n);n.xh.delete(e),r.Hu()&&sp(n,e),0===n.xh.size&&(r.Hu()?r.Xu():cp(n)&&n.Oh.set("Unknown"))}function op(t,e){t.kh.on(e.targetId),Tp(t).uh(e)}function sp(t,e){t.kh.on(e),Tp(t).hh(e)}function ap(t){t.kh=new Vc({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Tp(t).start(),t.Oh.Ph()}function up(t){return cp(t)&&!Tp(t).zu()&&t.xh.size>0}function cp(t){return 0===$s(t).Nh.size}function hp(t){t.kh=void 0}function fp(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){return t.xh.forEach((function(e,n){op(t,e)})),[2]}))}))}function lp(t,e){return ot(this,void 0,void 0,(function(){return st(this,(function(n){return hp(t),up(t)?(t.Oh.Vh(e),ap(t)):t.Oh.set("Unknown"),[2]}))}))}function pp(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o;return st(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof Lc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o;return st(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ls("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,dp(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Cc?t.kh.dn(e):e instanceof Rc?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(oa.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,fl(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Ks.T,n.Ot)),sp(t,e);var r=new ku(n.target,e,1,n.sequenceNumber);op(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ls("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,dp(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function dp(t,e,n){return ot(this,void 0,void 0,(function(){var r=this;return st(this,(function(i){switch(i.label){case 0:if(!Th(e))throw e;return t.Nh.add(1),[4,np(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return fl(t.bh)}),t._s.po((function(){return ot(r,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return Ls("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,ep(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function vp(t,e){return e().catch((function(n){return dp(t,n,e)}))}function yp(t){return ot(this,void 0,void 0,(function(){var e,n,r,i,o;return st(this,(function(s){switch(s.label){case 0:e=$s(t),n=Ap(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return cp(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,pl(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Ap(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,dp(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return mp(e)&&gp(e),[2]}}))}))}function mp(t){return cp(t)&&!Ap(t).zu()&&t.Ch.length>0}function gp(t){Ap(t).start()}function bp(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){return Ap(t).Eh(),[2]}))}))}function wp(t){return ot(this,void 0,void 0,(function(){var e,n,r,i;return st(this,(function(o){for(e=Ap(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function Ip(t,e,n){return ot(this,void 0,void 0,(function(){var r,i;return st(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=rf.from(r,e,n),[4,vp(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,yp(t)];case 2:return o.sent(),[2]}}))}))}function Ep(t,e){return ot(this,void 0,void 0,(function(){return st(this,(function(n){switch(n.label){case 0:return e&&Ap(t)._h?[4,function(t,e){return ot(this,void 0,void 0,(function(){var n,r;return st(this,(function(i){switch(i.label){case 0:return fc(r=e.code)&&r!==Ys.ABORTED?(n=t.Ch.shift(),Ap(t).Yu(),[4,vp(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,yp(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return mp(t)&&gp(t),[2]}}))}))}function _p(t,e){return ot(this,void 0,void 0,(function(){var n;return st(this,(function(r){switch(r.label){case 0:return n=$s(t),e?(n.Nh.delete(2),[4,ep(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,np(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Tp(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=$s(t);return r.Ih(),new Xl(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:fp.bind(null,t),Tu:lp.bind(null,t),ah:pp.bind(null,t)}),t.$h.push((function(n){return ot(e,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),up(t)?ap(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),hp(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function Ap(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=$s(t);return r.Ih(),new Ql(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:bp.bind(null,t),Tu:Ep.bind(null,t),wh:wp.bind(null,t),dh:Ip.bind(null,t)}),t.$h.push((function(n){return ot(e,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,yp(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(Ls("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Np=function(){this.Kh=void 0,this.listeners=[]},Sp=function(){this.queries=new Nf((function(t){return _u(t)}),Eu),this.onlineState="Unknown",this.Wh=new Set};function kp(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return st(this,(function(c){switch(c.label){case 0:if(n=$s(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Np),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Dh(a,"Initialization of query '"+Tu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Pp(n),[2]}}))}))}function Op(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s;return st(this,(function(a){return n=$s(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function Dp(t,e){for(var n=$s(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&Pp(n)}function xp(t,e,n){var r=$s(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Pp(t){t.Wh.forEach((function(t){t.next()}))}var Cp=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Dc(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Dc.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Rp=function(t){this.key=t},Lp=function(t){this.key=t},Mp=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Ac(),this.De=Ac(),this.hl=Nu(t),this.ll=new kc(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Oc,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=du(this.query)&&i.size===this.query.limit?i.last():null,c=vu(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),f=e instanceof qa?e:null;f&&(f=Au(n.query,f)?f:null);var l=!!h&&n.De.has(h.key),p=!!f&&(f.Vt||n.De.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.wl(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.hl(f,u)>0||c&&n.hl(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),du(this.query)||vu(this.query))for(;s.size>this.query.limit;){var h=du(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Us()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new Dc(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Oc,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Ac(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new Lp(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new Rp(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Ac();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Dc.Ne(this.query,this.ll,this.De,0===this.al)},t}(),Vp=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jp=function(t){this.key=t,this.Pl=!1},Up=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Nf((function(t){return _u(t)}),Eu),this.Sl=new Map,this.Dl=new Set,this.Cl=new pc(ha.H),this.xl=new Map,this.Nl=new Il,this.$l={},this.Fl=new Map,this.Ol=Lf.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fp(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s,a;return st(this,(function(u){switch(u.label){case 0:return n=vd(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,dl(n.bh,wu(e))];case 2:return s=u.sent(),a=n.Vl.Fa(s.targetId),r=s.targetId,[4,$p(n,e,r,"current"===a)];case 3:i=u.sent(),n.Ml&&rp(n.yl,s),u.label=4;case 4:return[2,i]}}))}))}function $p(t,e,n,r){return ot(this,void 0,void 0,(function(){var i,o,s,a,u,c;return st(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return ot(this,void 0,void 0,(function(){var i,o,s;return st(this,(function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,yl(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(td(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,yl(t.bh,e,!0)];case 1:return i=h.sent(),o=new Mp(e,i.Rc),s=o.fl(i.documents),a=Pc.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),td(t,n,u.Il),c=new Vp(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function qp(t,e){return ot(this,void 0,void 0,(function(){var n,r,i;return st(this,(function(o){switch(o.label){case 0:return n=$s(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Eu(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,vl(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),ip(n.yl,r.targetId),Jp(n,r.targetId)})).catch(Af)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Jp(n,r.targetId),[4,vl(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Gp(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o,s;return st(this,(function(a){switch(a.label){case 0:r=yd(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=$s(t),i=ia.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ac());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Qu(c,n.get(c.key));null!=h&&s.push(new ec(c.key,h,Fa(h.proto.mapValue),Hu.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new pc(Bs)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,rd(r,i.ri)];case 3:return a.sent(),[4,yp(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Dh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Bp(t,e){return ot(this,void 0,void 0,(function(){var n,r;return st(this,(function(i){switch(i.label){case 0:n=$s(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ll(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(Fs(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Fs(r.Pl):t.Qe.size>0&&(Fs(r.Pl),r.Pl=!1))})),[4,rd(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Af(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function zp(t,e,n){var r=$s(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=$s(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&Pp(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Hp(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o,s,a,u;return st(this,(function(c){switch(c.label){case 0:return(r=$s(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new pc(ha.H)).zt(o,new Ga(o,oa.min())),a=Ac().add(o),u=new xc(oa.min(),new Map,new yc(Bs),s,a),[4,Bp(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),nd(r),[3,4];case 2:return[4,vl(r.bh,e,!1).then((function(){return Jp(r,e,n)})).catch(Af)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Kp(t,e){return ot(this,void 0,void 0,(function(){var n,r,i;return st(this,(function(o){switch(o.label){case 0:n=$s(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,hl(n.bh,e)];case 2:return i=o.sent(),Qp(n,r,null),Xp(n,r),n.Vl.Na(r,"acknowledged"),[4,rd(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Af(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Yp(t,e,n){return ot(this,void 0,void 0,(function(){var r,i;return st(this,(function(o){switch(o.label){case 0:r=$s(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=$s(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return Fs(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),Qp(r,e,n),Xp(r,e),r.Vl.Na(e,"rejected",n),[4,rd(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Af(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Wp(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s;return st(this,(function(a){switch(a.label){case 0:cp((n=$s(t)).yl)||Ls("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=$s(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Dh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Xp(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Qp(t,e,n){var r=$s(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Jp(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Zp(t,e)}))}function Zp(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(ip(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),nd(t))}function td(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Rp?(t.Nl.nr(o.key,e),ed(t,o)):o instanceof Lp?(Ls("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Zp(t,o.key)):Us()}}function ed(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(Ls("SyncEngine","New document in limbo: "+n),t.Dl.add(r),nd(t))}function nd(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new ha(aa.ot(e)),r=t.Ol.next();t.xl.set(r,new jp(n)),t.Cl=t.Cl.zt(n,r),rp(t.yl,new ku(wu(pu(n.path)),r,2,ra.q))}}function rd(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o,s;return st(this,(function(a){switch(a.label){case 0:return r=$s(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ol.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return st(this,(function(f){switch(f.label){case 0:n=$s(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return bh.forEach(e,(function(e){return bh.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return bh.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!Th(r=f.sent()))throw r;return Ls("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.fc.get(a),c=u.Ot,h=u.Lt(c),n.fc=n.fc.zt(a,h));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function id(t,e){return ot(this,void 0,void 0,(function(){var n,r;return st(this,(function(i){switch(i.label){case 0:return(n=$s(t)).currentUser.isEqual(e)?[3,3]:(Ls("SyncEngine","User change. New user:",e.A()),[4,cl(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new Ws(Ys.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,rd(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function od(t,e){var n=$s(t),r=n.xl.get(e);if(r&&r.Pl)return Ac().add(r.key);var i=Ac(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function sd(t,e){return ot(this,void 0,void 0,(function(){var n,r,i;return st(this,(function(o){switch(o.label){case 0:return[4,yl((n=$s(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&td(n,e.targetId,i.Il),i)]}}))}))}function ad(t){return ot(this,void 0,void 0,(function(){var e;return st(this,(function(n){return[2,gl((e=$s(t)).bh).then((function(t){return rd(e,t)}))]}))}))}function ud(t,e,n,r){return ot(this,void 0,void 0,(function(){var i,o;return st(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=$s(t),r=$s(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):bh.resolve(null)}))}))}((i=$s(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,yp(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Qp(i,e,r||null),Xp(i,e),function(t,e){$s($s(t).zo).xi(e)}(i.bh,e)):Us(),s.label=4;case 4:return[4,rd(i,o)];case 5:return s.sent(),[3,7];case 6:Ls("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function cd(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return st(this,(function(h){switch(h.label){case 0:return vd(n=$s(t)),yd(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,hd(n,r.it())]);case 1:return i=h.sent(),n.kl=!0,[4,_p(n.yl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],rp(n.yl,a);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):c=c.then((function(){return Jp(n,e),vl(n.bh,e,!0)})),ip(n.yl,e)})),[4,c]);case 4:return h.sent(),[4,hd(n,u)];case 5:return h.sent(),function(t){var e=$s(t);e.xl.forEach((function(t,n){ip(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new pc(ha.H)}(n),n.kl=!1,[4,_p(n.yl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function hd(t,e,n){return ot(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,f,l,p,d,v;return st(this,(function(y){switch(y.label){case 0:n=$s(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Sl.get(a))&&0!==c.length?[4,dl(n.bh,wu(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.vl.get(l),[4,sd(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,ml(n.bh,a)];case 8:return v=y.sent(),[4,dl(n.bh,v)];case 9:return u=y.sent(),[4,$p(n,fd(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function fd(t){return lu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ld(t){var e=$s(t);return $s($s(e.bh).persistence).Uo()}function pd(t,e,n,r){return ot(this,void 0,void 0,(function(){var i,o,s;return st(this,(function(a){switch(a.label){case 0:return(i=$s(t)).kl?(Ls("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gl(i.bh)];case 3:return o=a.sent(),s=xc.Me(e,"current"===n),[4,rd(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,vl(i.bh,e,!0)];case 6:return a.sent(),Jp(i,e,r),[3,8];case 7:Us(),a.label=8;case 8:return[2]}}))}))}function dd(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,f,l;return st(this,(function(p){switch(p.label){case 0:if(!(r=vd(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(Ls("SyncEngine","Adding an already active target "+s),[3,5]):[4,ml(r.bh,s)]):[3,6];case 2:return a=p.sent(),[4,dl(r.bh,a)];case 3:return u=p.sent(),[4,$p(r,fd(a),u.targetId,!1)];case 4:p.sent(),rp(r.yl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return st(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,vl(r.bh,t,!1).then((function(){ip(r.yl,t),Jp(r,t)})).catch(Af)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function vd(t){var e=$s(t);return e.yl.Dh.Lh=Bp.bind(null,e),e.yl.Dh.vn=od.bind(null,e),e.yl.Dh.Mh=Hp.bind(null,e),e.bl.ah=Dp.bind(null,e.gl),e.bl.Bl=xp.bind(null,e.gl),e}function yd(t){var e=$s(t);return e.yl.Dh.Bh=Kp.bind(null,e),e.yl.Dh.qh=Yp.bind(null,e),e}var md=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return this.Qt=Kl(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return ul(this.persistence,new sl,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Sl(Ol.ia,this.Qt)},t.prototype.Wl=function(t){return new Ul},t.prototype.terminate=function(){return ot(this,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return rt(e,t),e.prototype.initialize=function(e){return ot(this,void 0,void 0,(function(){return st(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,bl(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,yd(this.Yl._a)];case 4:return n.sent(),[4,yp(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return ul(this.persistence,new sl,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new qf(e,t._s)},e.prototype.jl=function(t){var e=rl(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Tf.Ys(this.cacheSizeBytes):Tf.ti;return new tl(this.synchronizeTabs,e,t.clientId,n,t._s,zl(),Hl(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new Ul},e}(md),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return rt(e,t),e.prototype.initialize=function(e){return ot(this,void 0,void 0,(function(){var n,r=this;return st(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof jl?(this.Vl._a={eu:ud.bind(null,n),nu:pd.bind(null,n),su:dd.bind(null,n),Uo:ld.bind(null,n),tu:ad.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return ot(r,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return[4,cd(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=zl();if(!jl.Kn(e))throw new Ws(Ys.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rl(t.yu.t,t.yu.persistenceKey);return new jl(e,t._s,n,t.clientId,t.Jl)},e}(gd),wd=function(){function t(){}return t.prototype.initialize=function(t,e){return ot(this,void 0,void 0,(function(){var n=this;return st(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return zp(n._a,t,1)},this.yl.Dh.n_=id.bind(null,this._a),[4,_p(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new Sp},t.prototype.Xl=function(t){var e,n=Kl(t.yu.t),r=(e=t.yu,new Bl(e));return function(t,e,n){return new Jl(t,e,n)}(t.credentials,r,n)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return zp(s._a,t,0)},o=$l.Kn()?new $l:new Fl,new tp(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Up(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return ot(this,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return e=$s(t),Ls("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,np(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),Id=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Ed=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new ca(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),_d=function(t){this._methodName=t},Td=function(t){this.d_=t};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ad(t,e,n){if(!n)throw new Ws(Ys.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Nd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Sd(t,e,n,r){if(!0===e&&!0===r)throw new Ws(Ys.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function kd(t){if(!ha.wt(t))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Od(t){if(ha.wt(t))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Dd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Us()}function xd(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ws(Ys.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Dd(t);throw new Ws(Ys.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Pd(t,e){if(e<=0)throw new Ws(Ys.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ws(Ys.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ws(Ys.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Sd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Rd=new Map,Ld=function(){function t(t,e){this.w_="(lite)",this.E_=new Cd({}),this.T_=!1,t instanceof Ps?(this.I_=t,this.m_=new Zs):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ws(Ys.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ps(t.options.projectId)}(t),this.m_=new ta(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Ws(Ys.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Ws(Ys.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Cd(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Zs;switch(t.type){case"gapi":var e=t.client;return Fs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new na(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ws(Ys.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=Rd.get(this))&&(Ls("ComponentProvider","Removing Datastore"),Rd.delete(this),t.terminate()),Promise.resolve();var t},t}(),Md=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new jd(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Vd=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,pu(r))||this).firestore=e,i.D_=r,i.type="collection",i}return rt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new Md(this.firestore,null,new ha(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Vd);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ud(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Td&&(t=t.d_),Ad("collection","path",e),t instanceof Ld)return Od(n=aa.ot.apply(aa,ut([e],r))),new jd(t,null,n);if(!(t instanceof Md||t instanceof jd))throw new Ws(Ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Od(n=aa.ot.apply(aa,ut([t.path],r)).child(aa.ot(e))),new jd(t.firestore,null,n)}function Fd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Td&&(t=t.d_),1===arguments.length&&(e=Gs.u()),Ad("doc","path",e),t instanceof Ld)return kd(n=aa.ot.apply(aa,ut([e],r))),new Md(t,null,new ha(n));if(!(t instanceof Md||t instanceof jd))throw new Ws(Ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kd(n=t.D_.child(aa.ot.apply(aa,ut([e],r)))),new Md(t.firestore,t instanceof jd?t.v_:null,new ha(n))}function $d(t,e){return t instanceof Td&&(t=t.d_),e instanceof Td&&(e=e.d_),(t instanceof Md||t instanceof jd)&&(e instanceof Md||e instanceof jd)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function qd(t,e){return t instanceof Td&&(t=t.d_),e instanceof Td&&(e=e.d_),t instanceof Vd&&e instanceof Vd&&t.firestore===e.firestore&&Eu(t.C_,e.C_)&&t.v_===e.v_
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Gd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ws(Ys.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ws(Ys.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Bs(this.x_,t.x_)||Bs(this.N_,t.N_)},t}(),Bd=/^__.*__$/,zd=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new ec(t,this.data,this.Gt,e,this.fieldTransforms):new tc(t,this.data,e,this.fieldTransforms)},t}(),Hd=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new ec(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Us()}}var Yd=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return dv(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Kd(this.k_)&&Bd.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Wd=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Kl(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Yd({k_:t,methodName:e,j_:n,path:ca.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Xd(t){var e=t.p_(),n=Kl(t.I_);return new Wd(t.I_,!!e.ignoreUndefinedProperties,n)}function Qd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);hv("Data must be an object, but it was:",s,r);var a,u,c=uv(r,s);if(o.merge)a=new da(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=fv(e,l[f],n);if(!s.contains(p))throw new Ws(Ys.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");vv(h,p)||h.push(p)}a=new da(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new zd(new ja(c),a,u)}var Jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(_d);function Zd(t,e,n){return new Yd({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.z_=function(t){return new Bu(t.path,new Mu)},e.prototype.isEqual=function(t){return t instanceof e},e}(_d),ev=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return rt(e,t),e.prototype.z_=function(t){var e=Zd(this,t,!0),n=this.H_.map((function(t){return av(t,e)})),r=new Vu(n);return new Bu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(_d),nv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return rt(e,t),e.prototype.z_=function(t){var e=Zd(this,t,!0),n=this.H_.map((function(t){return av(t,e)})),r=new Uu(n);return new Bu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(_d),rv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return rt(e,t),e.prototype.z_=function(t){var e=new $u(t.Qt,xu(t.Qt,this.J_));return new Bu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(_d);function iv(t,e,n,r){var i=t.G_(1,e,n);hv("Data must be an object, but it was:",i,r);var o=[],s=new Ua;la(r,(function(t,r){var a=pv(e,t,n);r instanceof Td&&(r=r.d_);var u=i.U_(a);if(r instanceof Jd)o.push(a);else{var c=av(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new da(o);return new Hd(s.Pt(),a,i.fieldTransforms)}function ov(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[fv(e,r,n)],u=[i];if(o.length%2!=0)throw new Ws(Ys.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(fv(e,o[c])),u.push(o[c+1]);for(var h=[],f=new Ua,l=a.length-1;l>=0;--l)if(!vv(h,a[l])){var p=a[l],d=u[l];d instanceof Td&&(d=d.d_);var v=s.U_(p);if(d instanceof Jd)h.push(p);else{var y=av(d,v);null!=y&&(h.push(p),f.set(p,y))}}var m=new da(h);return new Hd(f.Pt(),m,s.fieldTransforms)}function sv(t,e,n,r){return void 0===r&&(r=!1),av(n,t.G_(r?4:3,e))}function av(t,e){if(t instanceof Td&&(t=t.d_),cv(t))return hv("Unsupported field value:",e,t),uv(t,e);if(t instanceof _d)return function(t,e){if(!Kd(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=av(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Td&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xu(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ia.fromDate(t);return{timestampValue:Gc(e.Qt,n)}}if(t instanceof ia)return n=new ia(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Gc(e.Qt,n)};if(t instanceof Gd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xs)return{bytesValue:Bc(e.Qt,t.I)};if(t instanceof Md){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Kc(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+Dd(t))}(t,e)}function uv(t,e){var n={};return pa(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):la(t,(function(t,r){var i=av(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function cv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ia||t instanceof Gd||t instanceof Xs||t instanceof Md||t instanceof _d)}function hv(t,e,n){if(!cv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Dd(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function fv(t,e,n){if(e instanceof Td&&(e=e.d_),e instanceof Ed)return e.f_;if("string"==typeof e)return pv(t,e);throw dv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var lv=new RegExp("[~\\*/\\[\\]]");function pv(t,e,n){if(e.search(lv)>=0)throw dv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ed.bind.apply(Ed,ut([void 0],e.split("."))))).f_}catch(r){throw dv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function dv(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ws(Ys.INVALID_ARGUMENT,(a+=". ")+t+u)}function vv(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var yv=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return ot(this,void 0,void 0,(function(){var e,n=this;return st(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Ws(Ys.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ot(this,void 0,void 0,(function(){var n,r,i,o,s,a;return st(this,(function(u){switch(u.label){case 0:return n=$s(t),r=Zc(n.Qt)+"/documents",i={documents:e.map((function(t){return Wc(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Fs(!!e.found),e.found.name,e.found.updateTime;var n=Xc(t,e.found.name),r=Hc(e.found.updateTime),i=new ja({mapValue:{fields:e.found.fields}});return new qa(n,r,i,{})}(t,e):"missing"in e?function(t,e){Fs(!!e.missing),Fs(!!e.readTime);var n=Xc(t,e.missing),r=Hc(e.readTime);return new Ga(n,r)}(t,e):Us()}(n.Qt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Fs(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Ga||t instanceof qa?n.sf(t):Us()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new uc(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return ot(this,void 0,void 0,(function(){var t,e=this;return st(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ha._t(n);e.mutations.push(new cc(r,e.jt(r)))})),[4,function(t,e){return ot(this,void 0,void 0,(function(){var n,r,i;return st(this,(function(o){switch(o.label){case 0:return n=$s(t),r=Zc(n.Qt)+"/documents",i={writes:e.map((function(t){return nh(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof qa)e=t.version;else{if(!(t instanceof Ga))throw Us();e=oa.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ws(Ys.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Hu.updateTime(e):Hu.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(oa.min()))throw new Ws(Ys.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hu.updateTime(e)}return Hu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),mv=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Yl(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return ot(t,void 0,void 0,(function(){var t,e,n=this;return st(this,(function(r){return t=new yv(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ea(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!fc(e)}return!1},t}(),gv=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Qs.UNAUTHENTICATED,this.clientId=Gs.u(),this._f=function(){},this.C=new gh,this.credentials.v((function(t){Ls("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return ot(this,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Ws(Ys.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new gh;return this._s.Tf((function(){return ot(t,void 0,void 0,(function(){var t,n;return st(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Dh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bv(t,e){return ot(this,void 0,void 0,(function(){var n,r,i=this;return st(this,(function(o){switch(o.label){case 0:return t._s.Af(),Ls("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return ot(i,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return[4,cl(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function wv(t,e){return ot(this,void 0,void 0,(function(){var n,r;return st(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Iv(t)];case 1:return n=i.sent(),Ls("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return ot(this,void 0,void 0,(function(){var n,r;return st(this,(function(i){switch(i.label){case 0:return(n=$s(t))._s.Af(),Ls("RemoteStore","RemoteStore received new credentials"),r=cp(n),n.Nh.add(3),[4,np(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,ep(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Iv(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Ls("FirestoreClient","Using default OfflineComponentProvider"),[4,bv(t,new md)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Ev(t){return ot(this,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Ls("FirestoreClient","Using default OnlineComponentProvider"),[4,wv(t,new wd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function _v(t){return Iv(t).then((function(t){return t.persistence}))}function Tv(t){return Iv(t).then((function(t){return t.bh}))}function Av(t){return Ev(t).then((function(t){return t.yl}))}function Nv(t){return Ev(t).then((function(t){return t._a}))}function Sv(t){return ot(this,void 0,void 0,(function(){var e,n;return st(this,(function(r){switch(r.label){case 0:return[4,Ev(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Fp.bind(null,e._a),n.Hh=qp.bind(null,e._a),n)]}}))}))}function kv(t,e,n){var r=this;void 0===n&&(n={});var i=new gh;return t._s.Ps((function(){return ot(r,void 0,void 0,(function(){var r;return st(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Id({next:function(o){e.Ps((function(){return Op(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ws(Ys.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ws(Ys.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Cp(pu(n.path),o,{includeMetadataChanges:!0,nl:!0});return kp(t,s)},[4,Sv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function Ov(t,e,n){var r=this;void 0===n&&(n={});var i=new gh;return t._s.Ps((function(){return ot(r,void 0,void 0,(function(){var r;return st(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Id({next:function(n){e.Ps((function(){return Op(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Ws(Ys.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Cp(n,o,{includeMetadataChanges:!0,nl:!0});return kp(t,s)},[4,Sv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var Dv=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Yl(this,"async_queue_retry"),this.vf=function(){var e=Hl();e&&Ls("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=Hl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Hl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return ot(this,void 0,void 0,(function(){var t,e=this;return st(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Th(t=n.sent()))throw t;return Ls("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Ms("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Oh.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Us()},t.prototype.Af=function(){},t.prototype.Nf=function(){return ot(this,void 0,void 0,(function(){var t;return st(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function xv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Pv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new Dv,r.w_="name"in e?e.name:"[DEFAULT]",r}return rt(e,t),e.prototype.b_=function(){return this.qf||Rv(this),this.qf.terminate()},e}(Ld);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cv(t){return t.qf||Rv(t),t.qf.df(),t.qf}function Rv(t){var e=t.p_(),n=function(t,e,n){return new xs(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new gv(t.m_,t.Bf,n)}function Lv(t,e,n){var r=this,i=new gh;return t._s.enqueue((function(){return ot(r,void 0,void 0,(function(){var r;return st(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,bv(t,n)];case 1:return o.sent(),[4,wv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ys.FAILED_PRECONDITION||t.code===Ys.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Mv(t){if(t.R_||t.P_)throw new Ws(Ys.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vv=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Aa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ma(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(ga(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Us()}},t.prototype.Hf=function(t,e){var n=this,r={};return la(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Gd(ma(t.latitude),ma(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=wa(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Ia(t));default:return null}},t.prototype.Qf=function(t){var e=ya(t);return new ia(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=aa.ot(t);Fs(mh(n));var r=new Ps(n.get(1),n.get(3)),i=new ha(n.Y(5));return r.isEqual(e)||Ms("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),jv=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Md(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Uv(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Fv("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Uv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(jv);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fv(t,e){return"string"==typeof e?pv(t,e):e instanceof Td?e.d_.f_:e.f_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $v(t){if(vu(t)&&0===t.xt.length)throw new Ws(Ys.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qv=function(){};function Gv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Bv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return rt(e,t),e.prototype.td=function(t){var e=Xd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qv(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(Xv(r,t,f))}a={arrayValue:{values:u}}}else a=Xv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qv(s,o),a=sv(n,"where",s,"in"===o||"not-in"===o);var l=Xa.create(i,o,a);return function(t,e){if(e.Ct()){var n=mu(t);if(null!==n&&!n.isEqual(e.field))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=yu(t);null!==r&&Jv(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ws(Ys.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ws(Ys.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new Vd(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new fu(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(qv),zv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return rt(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new au(e,n);return function(t,e){if(null===yu(t)){var n=mu(t);null!==n&&Jv(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Vd(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new fu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(qv),Hv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return rt(e,t),e.prototype.td=function(t){return new Vd(t.firestore,t.v_,Iu(t.C_,this.od,this.ad))},e}(qv),Kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return rt(e,t),e.prototype.td=function(t){var e=Wv(t,this.type,this.ud,this.hd);return new Vd(t.firestore,t.v_,function(t,e){return new fu(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(qv),Yv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return rt(e,t),e.prototype.td=function(t){var e=Wv(t,this.type,this.ud,this.hd);return new Vd(t.firestore,t.v_,function(t,e){return new fu(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(qv);function Wv(t,e,n,r){if(n[0]instanceof Td&&(n[0]=n[0].d_),n[0]instanceof jv)return function(t,e,n,r,i){if(!r)throw new Ws(Ys.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=bu(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Pa(e,r.key));else{var c=r.field(u.field);if(ba(c))throw new Ws(Ys.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ou(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Xd(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Ws(Ys.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!gu(t)&&-1!==c.indexOf("/"))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(aa.ot(c));if(!ha.wt(h))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new ha(h);a.push(Pa(e,f))}else{var l=sv(n,r,c);a.push(l)}}return new ou(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Xv(t,e,n){if(n instanceof Td&&(n=n.d_),"string"==typeof n){if(""===n)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gu(e)&&-1!==n.indexOf("/"))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(aa.ot(n));if(!ha.wt(r))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Pa(t,new ha(r))}if(n instanceof Md)return Pa(t,n.S_);throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Dd(n)+".")}function Qv(t,e){if(!Array.isArray(t)||0===t.length)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Jv(t,e,n){if(!n.isEqual(e))throw new Ws(Ys.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ty=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return rt(e,t),e.prototype.Wf=function(t){return new Xs(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Md(this.firestore,null,e)},e}(Vv),ey=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ny=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return rt(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new ry(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Fv("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(jv),ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ny),iy=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new ey(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new ry(n.Yf,n.Xf,r.key,r,new ey(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Ws(Ys.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new ry(t.Yf,t.Xf,e.doc.key,e.doc,new ey(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ry(t.Yf,t.Xf,e.doc.key,e.doc,new ey(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:oy(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Us()}}function sy(t,e){return t instanceof ny&&e instanceof ny?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof iy&&e instanceof iy&&t.Yf===e.Yf&&qd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ay=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return rt(e,t),e.prototype.Wf=function(t){return new Xs(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Md(this.firestore,null,e)},e}(Vv);function uy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=xd(t,Md);var o=xd(t.firestore,Pv),s=Xd(o);return e instanceof Td&&(e=e.d_),hy(o,[("string"==typeof e||e instanceof Ed?ov(s,"updateDoc",t.S_,e,n,r):iv(s,"updateDoc",t.S_,e)).F_(t.S_,Hu.exists(!0))])}function cy(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Td&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||xv(i[a])||(s=i[a],a++);var u,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(xv(i[a])){var l=i[a];i[a]=null===(e=l.next)||void 0===e?void 0:e.bind(l),i[a+1]=null===(n=l.error)||void 0===n?void 0:n.bind(l),i[a+2]=null===(r=l.complete)||void 0===r?void 0:r.bind(l)}if(t instanceof Md)c=xd(t.firestore,Pv),h=pu(t.S_.path),u={next:function(e){i[a]&&i[a](fy(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=xd(t,Vd);c=xd(p.firestore,Pv),h=p.C_;var d=new ay(c);u={next:function(t){i[a]&&i[a](new iy(c,d,p,t))},error:i[a+1],complete:i[a+2]},$v(t.C_)}return function(t,e,n,r){var i=this,o=new Id(r),s=new Cp(e,o,n);return t._s.Ps((function(){return ot(i,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return e=kp,[4,Sv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return ot(i,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return e=Op,[4,Sv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Cv(c),h,f,u)}function hy(t,e){return function(t,e){var n=this,r=new gh;return t._s.Ps((function(){return ot(n,void 0,void 0,(function(){var n;return st(this,(function(i){switch(i.label){case 0:return n=Gp,[4,Nv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Cv(t),e)}function fy(t,e,n){var r=n.docs.get(e.S_),i=new ay(t);return new ny(t,i,e.S_,r,new ey(n.hasPendingWrites,n.fromCache),e.v_)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ly=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Xd(t)}return t.prototype.set=function(t,e,n){this.md();var r=py(t,this.Yf),i=Zv(r.v_,e,n),o=Qd(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Hu.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=py(t,this.Yf);return e instanceof Td&&(e=e.d_),o="string"==typeof e||e instanceof Ed?ov(this.Id,"WriteBatch.update",s.S_,e,n,r):iv(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Hu.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=py(t,this.Yf);return this.Ed=this.Ed.concat(new uc(e.S_,Hu.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Ws(Ys.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function py(t,e){if(t instanceof Td&&(t=t.d_),t.firestore!==e)throw new Ws(Ys.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return rt(e,t),e.prototype.get=function(e){var n=this,r=py(e,this.Yf),i=new ay(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new ny(n.Yf,i,r.S_,t.Zf,new ey(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Xd(t)}return t.prototype.get=function(t){var e=this,n=py(t,this.Yf),r=new ty(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Us();var i=t[0];if(i instanceof Ga)return new jv(e.Yf,r,n.S_,null,n.v_);if(i instanceof qa)return new jv(e.Yf,r,i.key,i,n.v_);throw Us()}))},t.prototype.set=function(t,e,n){var r=py(t,this.Yf),i=Zv(r.v_,e,n),o=Qd(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=py(t,this.Yf);return e instanceof Td&&(e=e.d_),o="string"==typeof e||e instanceof Ed?ov(this.Id,"Transaction.update",s.S_,e,n,r):iv(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=py(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vy(){if("undefined"==typeof Uint8Array)throw new Ws(Ys.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function yy(){if("undefined"==typeof atob)throw new Ws(Ys.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var my=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.fromBase64String=function(t){return yy(),new e(Xs.fromBase64String(t))},e.fromUint8Array=function(t){return vy(),new e(Xs.fromUint8Array(t))},e.prototype.toBase64=function(){return yy(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return vy(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Td),gy=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Mv(t=xd(t,Pv));var n=Cv(t),r=t.p_(),i=new wd;return Lv(n,i,new gd(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Mv(t=xd(t,Pv));var e=Cv(t),n=t.p_(),r=new wd;return Lv(e,r,new bd(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Ws(Ys.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new gh;return t.Bf.Tf((function(){return ot(e,void 0,void 0,(function(){var e;return st(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ot(this,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return Ih.Kn()?(e=t+"main",[4,Ih.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(rl(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),by=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Ps||(i.Pd=e),i}return rt(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=xd(t,Ld)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Vs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return ot(e,void 0,void 0,(function(){var e,n;return st(this,(function(r){switch(r.label){case 0:return[4,_v(t)];case 1:return e=r.sent(),[4,Av(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=$s(t);return e.Nh.delete(0),ep(e)}(n))]}}))}))}))}(Cv(xd(this.d_,Pv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return ot(e,void 0,void 0,(function(){var e,n;return st(this,(function(r){switch(r.label){case 0:return[4,_v(t)];case 1:return e=r.sent(),[4,Av(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return ot(this,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return(e=$s(t)).Nh.add(0),[4,np(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Cv(xd(this.d_,Pv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Sd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new gh;return t._s.Ps((function(){return ot(e,void 0,void 0,(function(){var e;return st(this,(function(r){switch(r.label){case 0:return e=Wp,[4,Nv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Cv(xd(this.d_,Pv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Id(e);return t._s.Ps((function(){return ot(n,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return e=function(t,e){$s(t).Wh.add(e),e.next()},[4,Sv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return ot(n,void 0,void 0,(function(){var e;return st(this,(function(n){switch(n.label){case 0:return e=function(t,e){$s(t).Wh.delete(e)},[4,Sv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Cv(t=xd(t,Pv)),xv(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Ws(Ys.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cy(this,Ud(this.d_,t))}catch(t){throw Ay(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ty(this,Fd(this.d_,t))}catch(t){throw Ay(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Dy(this,function(t,e){if(t=xd(t,Ld),Ad("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Vd(t,null,function(t){return new fu(aa.ct(),t)}(e))}(this.d_,t))}catch(t){throw Ay(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new gh;return t._s.Ps((function(){return ot(n,void 0,void 0,(function(){var n;return st(this,(function(i){switch(i.label){case 0:return[4,function(t){return Ev(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new mv(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(Cv(t),(function(n){return e(new dy(t,n))}))}(this.d_,(function(n){return t(new Iy(e,n))}))},e.prototype.batch=function(){var t=this;return Cv(this.d_),new Ey(new ly(this.d_,(function(e){return hy(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Ws(Ys.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ws(Ys.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Td),wy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return rt(e,t),e.prototype.Wf=function(t){return new my(new Xs(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Ty.yd(e,this.firestore,null)},e}(Vv);var Iy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new wy(e),r}return rt(e,t),e.prototype.get=function(t){var e=this,n=Ry(t);return this.d_.get(n).then((function(t){return new ky(e.Yf,new ny(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Ry(t);return n?(Nd("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ry(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,ut([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ry(t);return this.d_.delete(e),this},e}(Td),Ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.set=function(t,e,n){var r=Ry(t);return n?(Nd("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ry(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,ut([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ry(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Td),_y=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return rt(e,t),e.prototype.fromFirestore=function(t,e){var n=new ry(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Oy(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new wy(t),n),i.set(n,o)),o},e}(Td);_y.Vd=new WeakMap;var Ty=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new wy(e),r}return rt(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Ws(Ys.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new Md(n.d_,r,new ha(t)))},e.yd=function(t,n,r){return new e(n,new Md(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Cy(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cy(this.firestore,Ud(this.d_,t))}catch(t){throw Ay(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Td&&(t=t.d_),t instanceof Md&&$d(this.d_,t)},e.prototype.set=function(t,e){e=Nd("DocumentReference.set",e);try{return function(t,e,n){t=xd(t,Md);var r=xd(t.firestore,Pv),i=Zv(t.v_,e,n);return hy(r,[Qd(Xd(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Hu.Kt())])}(this.d_,t,e)}catch(t){throw Ay(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?uy(this.d_,t):uy.apply(void 0,ut([this.d_,t,e],n))}catch(t){throw Ay(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return hy(xd((t=this.d_).firestore,Pv),[new uc(t.S_,Hu.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ny(e),i=Sy(e,(function(e){return new ky(t.firestore,new ny(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return cy(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=xd(t,Md);var e=xd(t.firestore,Pv),n=Cv(e),r=new ay(e);return function(t,e){var n=this,r=new gh;return t._s.Ps((function(){return ot(n,void 0,void 0,(function(){var n;return st(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ot(this,void 0,void 0,(function(){var r,i;return st(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=$s(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof qa?n.resolve(i):i instanceof Ga?n.resolve(null):n.reject(new Ws(Ys.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Dh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Tv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new ny(e,r,t.S_,n,new ey(n instanceof qa&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=xd(t,Md);var e=xd(t.firestore,Pv);return kv(Cv(e),t.S_,{source:"server"}).then((function(n){return fy(e,t,n)}))}(this.d_):function(t){t=xd(t,Md);var e=xd(t.firestore,Pv);return kv(Cv(e),t.S_).then((function(n){return fy(e,t,n)}))}(this.d_)).then((function(t){return new ky(e.firestore,new ny(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this.d_.withConverter(_y.gd(this.firestore,t)):this.d_.withConverter(null))},e}(Td);function Ay(t,e,n){return t.message=t.message.replace(e,n),t}function Ny(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!xv(r))return r}return{}}function Sy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=xv(t[0])?t[0]:xv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ky=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return rt(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ty(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return sy(this.d_,t.d_)},e}(Td),Oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(ky),Dy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new wy(e),r}return rt(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Gv(this.d_,function(t,e,n){var r=e,i=Fv("where",t);return new Bv(i,r,n)}(t,n,r)))}catch(t){throw Ay(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Gv(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Fv("orderBy",t);return new zv(r,n)}(t,n)))}catch(t){throw Ay(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Gv(this.d_,function(t){return Pd("limit",t),new Hv("limit",t,"F")}(t)))}catch(t){throw Ay(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Gv(this.d_,function(t){return Pd("limitToLast",t),new Hv("limitToLast",t,"L")}(t)))}catch(t){throw Ay(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kv("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Ay(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kv("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Ay(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yv("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Ay(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gv(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yv("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Ay(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return qd(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=xd(t,Vd);var e=xd(t.firestore,Pv),n=Cv(e),r=new ay(e);return function(t,e){var n=this,r=new gh;return t._s.Ps((function(){return ot(n,void 0,void 0,(function(){var n;return st(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ot(this,void 0,void 0,(function(){var r,i,o,s,a;return st(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,yl(t,e,!0)];case 1:return a=u.sent(),r=new Mp(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Dh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Tv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new iy(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=xd(t,Vd);var e=xd(t.firestore,Pv),n=Cv(e),r=new ay(e);return Ov(n,t.C_,{source:"server"}).then((function(n){return new iy(e,r,t,n)}))}(this.d_):function(t){t=xd(t,Vd);var e=xd(t.firestore,Pv),n=Cv(e),r=new ay(e);return $v(t.C_),Ov(n,t.C_).then((function(n){return new iy(e,r,t,n)}))}(this.d_)).then((function(t){return new Py(e.firestore,new iy(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ny(e),i=Sy(e,(function(e){return new Py(t.firestore,new iy(t.firestore.d_,t.Xf,t.d_,e._d))}));return cy(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this.d_.withConverter(_y.gd(this.firestore,t)):this.d_.withConverter(null))},e}(Td),xy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return rt(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Oy(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Td),Py=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return rt(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Dy(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new Oy(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new xy(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new Oy(n.Yf,r))}))},e.prototype.isEqual=function(t){return sy(this.d_,t.d_)},e}(Td),Cy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return rt(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Ty(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ty(this.firestore,void 0===t?Fd(this.d_):Fd(this.d_,t))}catch(t){throw Ay(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=xd(t.firestore,Pv),r=Fd(t),i=Zv(t.v_,e);return hy(n,[Qd(Xd(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Hu.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new Ty(e.firestore,t)}))},e.prototype.isEqual=function(t){return $d(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this.d_.withConverter(_y.gd(this.firestore,t)):this.d_.withConverter(null))},e}(Dy);function Ry(t){return t instanceof Td&&(t=t.d_),xd(t,Md)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ly,My=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Ed.bind.apply(Ed,ut([void 0],e))))||this}return rt(e,t),e.documentId=function(){return new e(ca.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Td&&(t=t.d_),t instanceof Ed&&this.d_.f_.isEqual(t.f_)},e}(Td),Vy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rt(e,t),e.serverTimestamp=function(){var t=new tv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Jd("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ev("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nv("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new rv("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Td),jy={Firestore:by,GeoPoint:Gd,Timestamp:ia,Blob:my,Transaction:Iy,WriteBatch:Ey,DocumentReference:Ty,DocumentSnapshot:ky,Query:Dy,QueryDocumentSnapshot:Oy,QuerySnapshot:Py,CollectionReference:Cy,FieldPath:My,FieldValue:Vy,setLogLevel:function(t){var e;e=t,Cs.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new It("firestore",(function(t){return function(t,e){return new by(t,new Pv(t,e),new gy)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},jy)))})(Ly=Wt),Ly.registerVersion("@firebase/firestore","2.2.0");var Uy=Object.freeze({__proto__:null});return _n}();
//# sourceMappingURL=bundle.js.map
